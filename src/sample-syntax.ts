export const initialSyntax = `set.style.until: 1/4
set.style.scale: C major
set.click.velocity: 18
set.click.accent: 1
set.click.until: 1/3


@@ 3/3 200 {
  Fm7
  G7
  @click(1/6)
  '''Bm7b5~
  @/click
}:v80

@@ 1/3 {
  1|:map(0 step -7 * 3):to:1/6
  @offset
  C:step((16)3^46^5..):v(88|88|88|77|66|55):1/3
  {
    C^ C~~~~~:to(low!6/8)
  }:v65
}
`


export const xsampleSyntax = `set.style.until: 1/4
set.dual.panning: [0.5, 0, 1]
set.style.scale: C major

@@ 3/3 200 {
  Fm7
  G7
  @click(1/6)
  '''Bm7b5~
  @/click
}:v80

@@ 1/3 {
  1|:map(0 step -7 * 3):to:1/6
  @offset
  C:step((16)3^46^5..):v(99|88|88|77|66|55):1/3
  {
    C^ C~~~~~:to(low!6/8)
  }:v65
}

`;

export const sampleSyntax = `set.click.inst: 42 // 36 37 42
set.click.velocity: 60
set.dual.panning: [0.5, 0, 1]
set.style.until: 1/4
set.style.scale: E minor


@@ 320 {
  0|2|0:map(0 step 2 * 12 sos):1/16
  |0|2|0:map(0 step 2 * 12 sos):1/16
  |||0|2|0:map(0 step 2 * 12 sos):1/16
  12|:map(0 step 2 * 4 sos):map(0, 3, 6, 1):1/24:leg
  '''Eaug7~~~
}:bpm(..100)


@@ {
  {
    {
      Emaj7
      :step((16)5^2^f~~~)
      :map(0 step 2 * 2 sos)
    }:scale(C 100100100100)
    {
      Emaj7
      :step((16)5^2^f~~~)
      :map(0 step 2 * 2 sos)
    }:scale(E harmonicMinor)
  }
  :map(0, 2)
}


@@ 3/3 200 {
  Fm7
  G7
  @click(1/6)
  '''Bm7b5~
  @/click
}:v80

@@ 1/3 {
  1|:map(0 step -7 * 3):to:1/6
  @offset
  C:step((16)3^46^5..):v(99|88|88|77|66|55):1/3
  {
    C^ C~~~~~:to(low!6/8)
  }:v65
}

@@ 1/4 {
  %1 %2 %3 %4 %5 %6 %7 '''%1:step(2345...)
}:%(E harmonic minor 7th mode 7th):step((26)534):to

@@ 1/4 {
  %1 %2 %3 %4 %5 %6 %7 '''%1:step(f...)
}:%(F harmonic minor mode 6th):step((26)534):to

@@ 1/4 {
  %1 %2 %3 %4 %5 %6 %7 '''%1:step(f...)
}:%(G harmonic minor 7th mode 5th):step((26)534):to

@@ 1/4 {
  %1 %2 %3 %4 %5 %6 %7 '''%1:step(f...) ..|~~~
}:%(A harmonic minor mode 4th):step((26)534):to


// 展開できないコード
// @@ { Dmmaj7b5 G#m7b13 Am7b13 G#m7#11 F#m7#11 Fm7#11 }

@@ {
  |||2 |||3

  ||||5~~~~~
  } >>{
  ||2 ||3
} >> {
  ||||2 ||||3
}

@@ C#|F#|B|E|A|D|G|B|E 1/12 {
  22|23|24|23|22|21|22|22|21
} >> C#|F#|B|E|A|D|G|B|E {

} >> { C:1/15:v80 }:step(
  // comment
  123 /* sss */ 456
)

@@ {
  // slideのグラフがおかしくなる
  ..2|5|||0:to |12|10|||~~
  ..2|2|3|3|3:to |12|0|||~~
}

@@ {
  |3>>5/10-12-13:to:map(1) |12
  |12>>5/10-12-13:to:bd(vib) |22
  |||2!50>>|||5:step(3):to(1/16) |||15:to:v0
  |||2!500>>|||15:step(345):to(1/16!low.24) |||24~~~:to(1/2!fast):v0:bd(..30/32 vib 1 ast)
  |||2!500>>|||5:step(3):to(1/16) |||15:to
  |||2>>|||5:step(333):to |||15:to
  C:step(f123):to 17|17|17|17|17|17 |||2>>|||12
  0|:step(f123):to:map(-2) 17|17|17|17|17|17 |||12>>|||12
}

// __end__

@@ {
  4/0-21-3:bd(
    ..2 -1
    ..3 2
    .. vib
  ) C
}

@@ {
  {}:bd(
    ..2 -2
    ..3 2
    .. vib
  )
}

@@ {
  4/2-7-5-6:bd(
    ..2 -2
    ..3 2
    .. vib
  )
}

@@ {
  4/1-2-3:m:bd(
    ..2 -2
    ..3 2
    .. vib
  )
}

@@ {
  ||||17~~~:bd(
    ..2/32 -2
    ..7 2
  )
} >> {
  ||||17~~~:bd(
    ..2 -2
    ..3 2
    .. vib
  )
} >> {
  ||||17~~~:bd(
    ..2/32 -2
    ..7 2
  )
}

@@ {
  ||||17~~~~~~~:bd(
    3..5 cho 2
    10.. cho 0
  )
}

@@ C#|F#|B|E|A|D|G|B|E 1/12 { 22|23|24|23|22|21|22|22|21 }

@@ {
  C7 Dm7 Em7:map(3)
  |||3~~~:to(5/8!hi):bd(vib) |||12
}

@@ {
  |||||4~~~:bd(
    0..2/16 2
    12..16 -2
  )
  ||||10>>||||17~~~~~:bd(
    1..2/16 cho 0.5
    2..3 cho 0
    3..4 cho 0.4
    4..5 cho 0
    5..6 cho 0.5
    6..7 cho 0
    7..8 cho 0.45
    9..10 cho 0
    11..12 cho 0.45
    12.. cho 0
  ):to(low.5)
}

@@ {
  ||||17~~~:bd(
    // 重複しても通ってしまうケース
    ..22 -2
    ..8 2
    .. vib
  )
}

@@ {
  ||||17~~~:bd(
    ..2/32 -2
    ..7 2
  )
} >> {
  ||||17~~~:bd(
    ..2 -2
    ..3 2
    .. vib
  )
} >> {
  ||||17~~~:bd(
    5..7/32 -2
    .. 2
  )
}

// 最低音チューニング
@@ D|G|C|F|A#|D#|G#|C|F 1/8 {
  0|
  |0
  ||0
  |||0
  ||||0
  |||||0
  ||||||0
  |||||||0
  ||||||||0
  ''''0|0|0|0|0|0|0|0|0~
}:scale(E minor)

// 最高音チューニング
@@ C#|F#|B|E|A|D|G|B|E 1/12 {
  0|
  |0
  ||0
  |||0
  ||||0
  |||||0
  ||||||0
  |||||||0
  ||||||||0
  ''''0|0|0|0|0|0|0|0|0~~~
}

@@ {
  @click
  {
    |0|5|5|6| ..||||5:leg |5|5|5||:D !|0|5|5|5|:step(f.....fffffff) 
    |0|5|5|6| ..||||5:leg |5|5|5||:D !|0|5|5|5|:step(f.....ffff...)
  }:map(0..3 sos ss):scale(A minor)
  @/click
}:1/16

@@ 160 {
  { ''|0|0|2|1 }:map(0 step 3 * 8 sos):step(f123) ''''|0|0|5|5~~~
} >> {
  { ''0|||2|1|0 }:map(0 step 5 * 8 sos):step(f123) ''''0|||3|3|0~~~
} >> {
  { ''0|||2|1|0 }:map(2 step -2 * 8 sos):step(f123) ''''0|||3|3|0~~~
}

@@ D|A|D|G|A|D { 6|5|4|3|2|1:step(123456):1/8 }:scale(E minor)
@@ D|A|D|G|A|D { 6|5|4|3|2|1:step(123456) }:scale(E minor)
@@ D|A|D|G|A|D { 6|5|4|3|2|1:step(123456) }:scale(C minor)
@@ B|E|A|D|G|B|E { 7|0|2|4|5|2|1:step(123456) }:scale(E minor)
@@ F#|B|E|A|D|G|B|E { 8|7|6|5|4|3|2|1:step(123456) }:scale(A minor)
@@ C#|F#|B|E|A|D|G|B|E { 9|8|7|6|5|4|3|2|1:step(123456) }:scale(B harmonicMinor)

@@ 1/4 {
  {
    { C:map(0..70):1/16:step((16)25) }:bpm(10..800)
    { C:map(7..1):1/16:step((16)543) }:bpm(300..100)
    r '''''C~~~~~~~:map(4)
  }
}

@@ {
  // こっちは前方のviewが適用される(前方のみ)
  0| ..|0||||0:step((51)51) ..||0 ..|||0 ..||||0 ..|||||0
}

@@ {
||||12|12
} >> { E r }
@@ {
// 前方のviewが適用され無い → いつの間にか直ってた。場所による?
..0|~~~
}
@@ { C:d C:d C:d C:d }


// shiftedのview確認用
@@ {
  {
    {
      {
        C
      }:map(0,2):scale(A minor)
    }:map(2,4):scale(B minor)
  }:map(4,8):scale(C# minor)
}:map(6,10):scale(D minor)


// ---
@@ { r 0| } >> { r~~ } >> { r 0|0||| } // 0|は切れて、0|0||| が伸びて、且つ後続音とミックスされていればOK
// @@ { r r |||||12 r } >> { C~~~~~ } >> { r Gm7 r }
@@ { r } >> { r } >> { ..|||||5>>|||||10~~~~ }
@@ { C:d C:d C:d C:d }

// {{ --- region跨ぎで、且つ他のdualが自分より長い場合でも、continueが適用される確認 ||||12|12 ..0|~~~ が継続重複されればOK --- }}
@@ {
  ||||12|12
} >> { E r }
@@ {
  ..0|~~~
}
@@ { C:d C:d C:d C:d }

// ----- dualで @offsetの後に noteがないパターン
@@ { r }
@@ {
  |||2 |||3
  @offset
  ||||5~~~~~
} >> {
  ||2 ||3
  @offset  
} >> {
  ||||2 ||||3
  @offset
}
@@ { C7~~~ }
@@ { C:d C:d C:d C:d }

// ---
// {{ --- @@ { r |||||12 } >> { C~~~~~ } のような場合で、短い方(|||||12)が、regionの末端まで伸びてしまう確認用 --- }}
// ---
@@ { r 0| } >> { r~~~~~ } >> { r ||||12 } // 0|は切れて、||||12 が伸びればOK // todo $$ viewで切れてるように見える
// @@ { r r |||||12 r } >> { C~~~~~ } >> { r Gm7 r }
@@ { 2|2 } >> { |||||11 } >> { ..|||||10 }
@@ { C:d C:d C:d C:d }

// ---
// {{ --- ||||12 |||3| @offset で |||3|が鳴らないbug確認用（原因は 根本は currentLastTick が-1 であるため） --- }}
// ---
@@ {
  @click
  C~~~
  @/click
}
@@ {
  r r // |||2 |||3
  @offset
  ||||5~~~~~:bd(
    0..4/16 1
    4.. -2
  )
} >> {
  r r// ||2 ||3
  @offset
} >> {
  ||||12 |||3|
  @offset
  // |:0/1 // ■ |||3| の音が鳴らないbugは、これがあれば回避はできた
        // 可視化的には変化がないのでループの問題か
        // @offset 手前の、最後の音が適用されないらしい
}
@@ 260 { 0|||||:1/1 } >> { ||||12|~~~ } >> { |||||12~~~ }
@@ { C:d C:d C:d C:d }

// ----- dualで @offsetの後に noteがないパターン
@@ {
  @click
  C~~~
  @/click
}

@@ {
  |||2 |||3
  @offset
  ||||5~~~~~:bd(
    0..4/16 1
    4.. -2
  )
} >> {
  ||2 ||3
  @offset  
} >> {
  ||||2 ||||3
  @offset
}

@@ 160 { 0|||||:1/1 } >> { ||||12|~~~ } >> { |||||12~~~ }
@@ 160 { 0|||||:1/1 } >> { ||||12|~~~:bd(2) } >> { r~~~ }
@@ 160 { 0|||||:1/1 } >> { r~~~ } >> { ||||12|~~~:bd(-2) }

@@ { { C:d C:u }:1/16:map(0..4) }

// -----

@@ {C} >> { D~ }
@@ {} >> { |2:1/16:map(0..3) @offset D } >> { E }
@@ {C}

// ---
@@ { |||5:map(0..1):1/16 @offset }
/*
  これ（以下の @@ {}）を解放すると ..|2|2|2|2>>|5|5|5|5:to(continue) あたりでバグる(region bpm効かないとか、スライドの感じおかしくなるとか)
  前後関係も関係あるっぽい
*/
// @@ {}
@@ {C}
// ---

@@ {C}
@@ {C}
@@ {C}

// __end__

@@ { C:d C:d }

@@ { C~~~ }

@@ {} >> {
  |||||12 @offset /*ここから*/ |||||10 |||||11 |||||12 /*ここまで*/
} >> {
  |||||12 |||||11 |||||11 @offset |2|||| // 3スパン分を削ってしまって上記を待たない Bug 
}

@@ {} >> {} >> { C }

@@ { 0|||||0 }

@@ { C:d C:d }

@@ {C~}

@@ {
  D~
} >> {
  
} >> {

}

@@ {C~}
@@ {} >> {} >> { 2|2~ }
@@ {
  ||2:map(0..3):1/16 @offset D
} >> {
  |2|:map(0..3):1/16 @offset |||||12
} >> {
  |||2:map(0..3):1/16 @offset |||||15
}

@@ {} >> {
  |2|:map(0..3):1/16 @offset
  D D
}


@@ {
  {
    5/0 5/2-4:leg ''''G:step(f.162534)
  }:map(0 step 7 * 8):1/16:bpm(160..999)
  {
    5/0 5/2-4:leg ''''Gm7:step(f.654321)
  }:map(16 step -7 * 8):1/16:bpm(999..30)
  {
    r:1/4 ''''E7~
  }
}:scale(G melodicMinor)
@@ {
  Em7:1/1
  Dm7:1/1
  Am7:1/1
  Am7:1/1
  /4/12:1/1
}:bpm(130..280) >> {
  6/2-4-5-7-9-10-12-14:1/8
  5/2-4-5-7-9-10-12-14:1/8
  4/2-4-5-7-9-10-12-14:1/8
}

@@ 1/4 {
  { 3/0-2:map(0,2,3,8) }
  { 3/0-2:map(0,2):map(3,8) }
  { 1/0 }:map(0,3,6)
  { C |||||0 }:map(0 step 3 * 2)
  1/0:map(0,3,6)
}

@@ 1/6 380 {
  C:d
  { { 12|||||12 }:map(0 step 1 * 2) }:map(0, -5, -6)
  C:d
  { { 12|||||12:map(0 step 1 * 2) } }:map(0, -5, -6)
  C:d
  { 12|||||12 }:map(0 step 1 * 2):map(0, -5, -6)
  C:d
  12|||||12:map(0 step 1 * 2):map(0, -5, -6)
  C:d
  { { 6/12:0/1 ..1/12 }:map(0 step 1 * 2) }:map(0, -5, -6)
  C:d
  { 12|||||12 }:map(0,2):map(2,3):map(0, -5)
  C:d
  {{{ 12|||||12 }:map(0,2) }:map(2,3) }:map(0, -5)
  C:d
  {{{ 6/12:0/1 ..1/12 }:map(0,2) }:map(2,3) }:map(0, -5)
  C:d

}


@@ 1/8 { 4/0-2:map(0,1):map(0,5) }
@@ 1/8 { 4/0-2:map(0,1) }:map(0,5)
@@ 1/8 { { 4/0-2 }:map(0,1) }:map(0,5)
@@ 1/8 { { ||0 ||2 }:map(0,1):map(0,5) }
@@ 1/8 { { ||0 ||2 }:map(0,1) }:map(0,5)


@@ 1/4 {
  {
    {
      C:step((16)3(26)543):map(0,3):1/8
      Em:map(0 step 3 * 4)
    }
  }:map(4,-2):bpm(100..300)

  {
    {
      C:step((16)3(26)543):map(0,3):1/8
      Em:map(0 step 3 * 4)
    }
  }:map(4,-2):bpm(300..40)

}

@@ {  }

@@ { R }

@@ {
  R    r
} >> {
  C    
}

@@ {    }:bpm(111) >> { D   D }:stroke(1/4) 

@@ { r }

@@ 140 { Em7 @offset 0|0| r r } >> { r 12|12| 0| } >> { r r ||||12|12 }

@@ 150 { Em~~~~~ } >> { ||||2:map(0..9) }

@@ 160 { Am~~~~~ } >> { 0|:map(1..5) }

@@ { Em~~~~~ } 


// シンコペーション
@@ 1/4 200 {
  @click
  { D:d }:map(*4)
}
@@ 1/4 200 {
  // 改行で1小節見たいのでもいいか @
  Dm^ @offset ..|~~ ..|^
  Fm~~~
  Fm~~~ ..|^
  C~~ ..|^

  Dm~~~
  Fm~~~
  Fm7~~~ ..|^
  C~~~

  @/click
}

// __end__

@@ {
  Em r Ebm r Dm 2||2|||:map(-3 step 2 * 4):1/16
} >> {
  Em:step(52345)
} >> {
  Am:step(54321)
}

@@ {
  Dm r Dbm r Fm 2||2|||:map(-3 step 2 * 4):1/16
} >> {
  Dm:step(52345)
} >> {
  Bm:step(54321)
}

@@ {
  ..0|3|||3:to ..|12|10|||~~ // おかしい view が止まる => ModTick_dual.resolveで対応済み
}:map(0..2 sos, 3)

@@ {
  ..2|5|||0:to ..|12|10|||~~
}:map(0 step -2 * 4 sos)

@@ {
  ..|~~~~~~~
} >> {
  r r '''''0||2||0|~~~~~:v(60)
} >> {
  r r '''''|2||0||0~~~~~:v(60)
}

@@ { r:4/1 } >> { C D E F G A B C# D# E# F# G# A# B# } >> { r~~~~ Gm7 }

@@ { Fm7b5~~ Em:step(D^d^d^) }

@@ { 6|5|4|3|2|1:step(123456) }:%(F# harmonic minor)

@@ {
  {
    {
      { C D E }:map(1)
    }:map(2)
  }:map(3)
}


@@ 1/4 200 {
  { ''''C:step(f.2534) }:scale(A 110000000000):map(0 step3 * 4)
}

@@ 1/16 {
  { 0| }:scale(E melodicMinor):map(0,4,3,0)
  { |2 }:scale(A harmonicMinor):map(0,5,4,1)
}:map(0 step -1 * 7)

@@ {
  Em~~~~~~~
}

@@ { Em~ D7~:map(0 step 2 * 3) }
// >> { |||||5:1/6:map(0 step 2 * 3) }  >> { |||||12:1/8:map(0..5) }

@@ { Fm7b5~~ Em:step(D^d^d^) }

@@ { 6|5|4|3|2|1:step(123456) }:%(F# harmonic minor)

@@ {
  {
    {
      { C D E }:map(1)
    }:map(2)
  }:map(3)
}

@@ {
  {
    {
      { C D E }:map(1):scale(C# pentatonic)
    }:scale(D major)
  }:scale(E minor)
}


@@ 140 1/4 {
  // {
  //   |2:map(2) C
  // }:map(999, 998)
  // 2/1-4m-5^^
  //C:step(123f)

  |||||2:to |||||7
}

// __end__

@@ { C Cm7b5 %6m ||||2~~~ '''D   :to& }

@@ { 4/1-2-3m^^^-4 }



@@ C#|D|D#|E|A|D|G|B|E { { ''''''0|0|0|0|0|0|0|0|0:step(987654321) } }

@@ E|A|D|G|B|E { { C:step(f.23) }:map(0..15) }

@@ { Em D11 Cm7b5 DmMaj7 }:step((123.)23):to
@@ { Cm7b5 }//:step((23))


@@ {
  D:step(6mfm)
  //Fmaj7:step((16).52(16).52(16).52(43).16)
}

@@ {
  // Fmaj7~:step(6543f...) 
  Cdim~~ // ||11|9|8|9 となってしまう。押さえれないフィンガリング
  // そもそもディミニッシュはパターンがある
}

@@ {
  {
    {
      C:step(fff)
    }:step(123456)
  }
}

@@ {
  {
    {
      C:step(fff)
    }:step(123456)
  }
}

@@ 100 4/4 {
 { C 2|||||2 rn |2|2| rn |5|5| rn |7|7~~ |2|2| }:1/4
 { C Dm Em 0|2|2 ||2||7 ..5| C }
}

@@ { r }

@@ 160 {
  {
    { 4| 2|:leg /|||4| |||6|:leg }:1/16:map(1 step 22 * 8)
  }
}

@@ { { /||||2| }:map(0..2) }

@@ {
  Em r Ebm r Dm 2||2|||:map(-3 step 2 * 4):1/16
} >> {
  Em:step(52345)
} >> {
  Am:step(54321)
}

@@ {
  Dm r Dbm r Fm 2||2|||:map(-3 step 2 * 4):1/16
} >> {
  Dm:step(52345)
} >> {
  Bm:step(54321)
}

@@ {
  ..0|3|||3:to ..|12|10|||~~
}:map(0..2 sos, 3)

@@ {
  ..2|5|||0:to ..|12|10|||~~
}:map(0 step -2 * 4 sos)

@@ {
  ..|~~~~~~~
} >> {
  r r '''''0||2||0|~~~~~:v(60)
} >> {
  r r '''''|2||0||0~~~~~:v(60)
}

// __end__s

@@ {
  {
    E:map(2 step -2 * 2 ss):step((15)2345...)
  }:map(0 step 7 * 2)
}:map(0 step 7 * 2):to:1/12

// __end__

@@ 120 {
  { ..0| ..|2 ..||2 ..|||0 ..||||0 ..|||||0 }:map(0, 3 sos):1/8
  { ..0| ..|2 ..||2 ..|||0 ..||||0 ..|||||0  }:map(0 step 5 * 3, -2):1/24
  { ..0| ..|2 ..||2 ..|||0 ..||||0 ..|||||0 }:map(0 step 5 * 1 sos rev):1/8
}:scale(F# melodicMinor)

@@ 120 {
  5/0 5/2-4:leg Em:step(f.162534)
}:map(0 step 7 * 2):1/16

@@ {
  E#7~~~~~~~
}

@@ 160 {
  5/0 5/2-4:leg Em:step(f.162534)
}:map(0 step 7 * 16):1/16

@@ {
  @click
  Cm13~~~
  @/click
}

@@ {
  |||2 |||3
  @offset
  ||||5~~~~~:bd(
    0..4/16 1
    4.. -2
  )
} >> {
  ||2 ||3
  @offset  
} >> {
  ||||2 ||||3
  @offset
}

@@ 160 { 0|||||:1/1 } >> { ||||12|~~~ } >> { |||||12~~~ }
@@ 160 { 0|||||:1/1 } >> { ||||12|~~~:bd(2) } >> { r~~~ }
@@ 160 { 0|||||:1/1 } >> { r~~~ } >> { ||||12|~~~:bd(-2) }

@@ 160 {
  // { |||3:to& ..|2|0| { |5:leg |3:leg } { |5:leg |3:leg }:map(0 step 0 * 16):1/16 }
  { |2||||0~~:to& ..|5||||~~~~~ }
  { |12||||0~~:to& ..|15||||~~~~~ }
  { |15||||0~~:to& ..|12||||~~~~~ }
  { |12||||0~~:to& ..|5||||~~~~~ }
  { |5||||0~~:to& ..|2||||~~~~~ }
}

// @@ 160 { // RangeError: Maximum call stack size exceeded
//   {
//     ''''0|2|2|0|0|0~~~:to ''''12|0|0|12~~~:to:leg
//   }:map(100..-100 step 10)
// }:scale(E melodicMinor)

@@ {
  { 0||||:to&:map(0 step 5 * 9 nos):scale(E pentatonic) }
}

@@ 160 {
  { ''|0|0|2|1 }:map(0 step 3 * 8 sos):step(f123) ''''|0|0|5|5~~~
} >> {
  { ''0|||2|1|0 }:map(0 step 5 * 8 sos):step(f123) ''''0|||3|3|0~~~
}

@@ 160 {
  {
    // 0|||||0^~~:to:map(0, 4) { ||2 }:map(0..23 step 3 sos ss):leg:1/16
    0|||||0^~~:to:map(0, 4) { ||2 }:map(0 step 3 * 8 sos ss):leg:1/16
  }:map(0..-3, -2..1)
  '0|2|1|||3~~~~~~~~~~~~~~~
}:scale(E minor)

@@ 160 {
  {
    // 0|||||0^~~:to:map(0, 4) { ||2 }:map(0..23 step 3 sos ss):leg:1/16
    0|||||0^~~:to:map(0, 4) { ||2 }:map(0 step 3 * 8 sos ss):leg:1/16
  }:map(2 step -6 * 6)
  '0|2|1|||3~~~~~~~~~~~~~~~
}:scale(E minor)

@@ 140 {
  {
    |0||2|| |||5:leg |||4~~~:leg:to& ||5||~~~~~~~:bd(.. 2)
    0|||2|| |||5:leg |||4~~~:leg |||5~:leg |||5|~~~~~~~:bd(vib) // ...................
    Em:stroke(1/4):step(f...2534) 2/5-7-8-r 1/5-7-8-r-7-8
    2/5 4/2 3/7-8-9-10-11-12 Am7:step(ffduffdu)
  }:1/16:map(0 step 9 * 9 rev)
} >> {
  {
    Em~~~ Em~~~
  }:map(0 step 9 * 16)
}

@@ 160 {
  {
    Em:step((16)54324):to:1/8
    { 4| 2|:leg 4| 6|:leg }:1/16:map(0, 2, -7, 1 rev)
    12| 14|:leg 16|:leg
  }:map(0..6 ss):1/16
}:scale(E melodicMinor)

@@ 200 { // D|A|D|G|A|E E|A|D|G|B|E
  {

    D
    {
      { { 2| }:scale(Bb major) 0|||||0 |||0:leg:map(2,1) }:map(1 step 10 * 12):scale(E# major)
    }:1/16
    E~~~

    // { |2||||:map(0..2) }:map(0):scale(C major)
    // { |2 }:bpm(140) { |3 |4 }:bpm(300..400)
  }//:map(0..2)
}
@@ { r }

// @@ {
//   0| 2| 3| 2||||~:bd(-2):map(1,2,3,4,5,6,7,8) |||2
// 0|0|||~~~:map(1, -2) 弦指定不能なパターン
// }:1/8

@@ 160 {
  {
    1/12 1/15-12:leg 2/15 2/12:leg 
    /3/14~~~:bd(..4/16 vib, .. -2) 3/12 3/14-12:leg 4/14 4/12:leg
    1/12:1/4:bd(vib)
    ||2~~~ |4:leg |8:leg r
    |2~~~ |4:leg |8:leg r
  }:1/16:map(0, 7)
}

@@ 160 {
  |2||||:map(1,2)
}:degree(E minor 7th):scale(E dorian) // ダイアトニックではなく、スケール必要

@@ 140 {
  {
    |0||2|| |||5:leg |||4~~~:leg:to& ||5||~~~~~~~:bd(.. 2)
    0|||2|| |||5:leg |||4~~~:leg |||5~:leg |||5|~~~~~~~:bd(vib)
    Em:stroke(1/4):step(f...2534) 2/5-7-8-r 1/5-7-8-r-7-8
    2/5 4/2 3/7-8-9-10-11-12 Am7:step(ffduffdu)
  }:1/16:map(0 step 9 * 2)
}

@@ 160 {
  {
    |||5|5|5
    |||5|2|5
    |||5|3|5
    |||5|5|5
  }:step(fD^u^d^)
  |||5|5|5:step(fD^u^d^f.......)
}:1/8:v70 >> {
  |||||12:to& ..|||||7:bd(vib)
  |||||12:to ..|||||5:bd(vib)
  |||||12:to(hi) /..||||8|~~:bd(vib)
}

@@ {
  {
    |||0|0|3
    |||0|2|3
    |||0|3|3
  }:step(fD^u^d^)
  |||3|3|3:step(fD^u^d^f.......) r~
}:1/8:v65 >> {
  |2||||>>5/7:v80:bd(2../16 vib 1) { 4/4-5 3/2-3-5 }:1/24:v60
  @offset
  |||||12:to& ..|||||7:bd(vib)
  |||||12:to ..|||||5:bd(vib)
  |||||12:to(hi) /|||||15~~~~:bd(..4 2, ..8 0, ..12 vib 2, ..14 2, .. 0)
}

@@ 160 {
  {
    |||5|5|5
    |||5|2|5
    |||5|3|5
    |||5|5|5
  }:step(fD^u^d^)
  |||5|5|5:step(fD^u^d^f.......)
}:1/8:v70 >> {
  3/2:v80:bd(2../16 vib 1) { 4/4-5 3/2-3-5 }:1/24:v60
  @offset
  |||||12:to& ..|||||7:bd(vib)
  |||||12:to ..|||||5:bd(vib)
  |||||12:to(hi) /..||||8|~~:bd(vib)
}

@@ {
  {
    |||0|0|3
    |||0|2|3
    |||0|3|3
  }:step(fD^u^d^)
  |||3|3|3:step(fD^u^d^f.......) r~
}:1/8:v65 >> {
  4/2:v80:bd(2../16 vib 1) { 4/4-5 3/2-3-5 }:1/24:v60
  @offset
  |||||12:to& ..|||||7:bd(vib)
  |||||12:to ..|||||5:bd(vib)
  |||||12:to(hi) /|||||15~~~~:bd(..4 2, ..8 0, ..12 vib 2, ..14 2, .. 0)
}

@@ {
  Em7~~~
  G7~~~
} >> {
  2/7~~-7-9-10-12-r~-14-r~-15 2/15 1/15-17
  1/7-9-10-12-r~-14-r~-15-r~ 1/17~~:bd(../16 vib 2)
}:1/16:v75

@@ {
  Fm7~~~~~~~~~~~:stroke(1/4)
} >> {
  /|||||17~~~ /||||15~~~~~~~:bd(0..2/8 2) 
}

@@ {
  Fm7~~~~~~~~~~~:stroke(1/8)
} >> {
  {
    |||5:bd(0..0 -2) ..|:bd(2)
    |||10 |||15:bd(0..0 2) ..|:bd(0) |||12

    @offset
    |||10 |||15:bd(0..0 2) ..|:bd(0) |||12
    ||||5:bd(0..0 -2) ..|:bd(2) ||||10
    ||||15:bd(0..0 2) ..|:bd(0) ||||12  
    
    |||||5:bd(0..0 -2) ..|:bd(2) |||||10
    |||||15:bd(0..0 2) ..|:bd(0) |||||12
    |||||22:4/2:bd(..4 2, 12.. vib 1.7)
  }:1/16:v70
}

@@ {
  Dm7~~~~~~~~~~~:stroke(1/4):v70
} >> {
  /||19|17|17|17:step(1..2..3..4..):v(66|77|66|66|60|77)
}

@@ {
  0|2|0|0|0|3:step(f..4..3..2..):v(66|77|66|66|60|77):stroke(1/8)
} >> {
  ||||15|15~~~~~~~~~~~:bd(..4 2, vib 1)
}

// @@ 140 {
//   /|||||14 { |||||12 |||||13 }:v50:leg
//   {
//     |||||12 { ||||15 ||||14 |||12 }:v50
//     ||12 ||14 { ||15 ||14 ||12 }:v50:leg
//   }:1/24
//   ||14 { ||12 ||13 }:v50:leg
//   ||14 { ||12 ||13 }:v50:leg
//   ||14 { ||12 ||15 }:v50:leg
// }:1/16:bpm(200..100)

@@ {
  @click
  0| 2| 3| ||||2~~:bd(2) |||2
  0| 2| 3| ||||2~~:bd(2) |||2 |||0 ||2
  0| 2| 3| ||||3~~:bd(2) |||2
  0| 2| 3| ||||2~~:bd(2) |||2 |||0 ||2
  @/click
}:1/8

@@ 180 {
  { r:4/1 r~~~ }:map(0, 0)
} >> {
  {
    /|3:bd(0..0 -2) ..|:bd(0..0 0) ..|:bd(0..0 2)
    ||3 ||5:bd(0..0 0) ..|:bd(0..0 2)
    |||3 |||5:bd(0..0 0) ..|:bd(0..0 2) ..|:bd(0..0 0) ..|:bd(0..0 -2)
    ||3:bd(0..0 -2) ..|:bd(0..0 0) ..|:bd(0..0 2)

    |||3 |||5:bd(0..0 0) ..|:bd(0..0 2) ..|:bd(0..0 0) ..|:bd(0..0 -2)
    ||3:bd(0..0 -2) ..|:bd(0..0 0) ..|:bd(0..0 2)

    |3:bd(0..0 -2) ..|:bd(0..0 0) ..|:bd(0..0 2)
    ||5:bd(0..0 -2) ..|:bd(0..0 0) ..|:bd(0..0 2)
    ||3 ||5:bd(0..0 0) ..|:bd(0..0 2)

    |||3 |||5:bd(0..0 0) ..|:bd(0..0 2) ..|:bd(0..0 0) ..|:bd(0..0 -2)
    ||3:bd(0..0 -2) ..|:bd(0..0 0) ..|:bd(0..0 2)

    |||5:bd(0..0 -2) ..|~:bd(0..0 2) |||10
    |||15:bd(0..0 2) ..|:bd(0) |||12
  }:1/16:v70:map(0, -2)

  |||22:4/2:bd(..4 2, 12.. vib 1.7)
}:bpm(100..160)



@@ { /||5|5|6|8~~~:step(432f):stroke(1/4) }
>> { 3|3|6|8|~~~:step(rrrf):stroke(1/4) }

@@ {
  Em~
}

@@ {
  Em~
} >> {
  /4/4-5n-7-5-4:1/16
  @offset
  12|||||12~
}

@@ {
  Cm7~
} >> {
  4/4-5-7-5-4:1/16
  @offset
  12|||||12~
}

@@ {
  Em~
} >> {
  4/4-5-7-5-4:1/16
  @offset
  12|||||12~
}

// @@ {
//   Cm7~
// } >> {
//   4/4-5-7-5-4:1/16
//   @offset
//   12|||||12~
// }

// ---

// ---
// ---
// --- 
// ---
// ---

@@ {
  |||||12~~~:bd(
    ..3/16 -2
    ..4 1
    ..5 -2
    ..6 0
    .. -2, reset
  )
} >> {
  |||||15~~~:bd(
    ..3/16 -2
    ..4 0
    ..5 -2
    ..6 2
    .. -2, reset
  )
}

@@ { Edim~~~~~~~:bd(0..16/16 -2, 16.. vib -1.5, reset) }

@@ {
  0|2|0|0|0|0:step((16)54323)
  5|7|6|0|0|0:step((16)54323)
}:bpm(140..200)

@@ E|A|D|G|B|E|A {
  0|2|0|0|0|0|0:step((16)54323)
  5|7|6|0|0|0|0:step((16)54323)
}:bpm(200..240)

@@ F#|B|E|A|D|G|B|E {
  0|2|0|0|0|0|0|0:step((16)54323)
  5|7|6|0|0|0|0|0:step((16)54323)
}:bpm(240..280)

@@ C#|F#|B|E|A|D|G|B|E {
  0|2|0|0|0|0|0|0|0:step((16)54323)
  5|7|6|0|0|0|0|0|0:step((16)54323)
}:bpm(280..320)

@@ E|A|D|G|B|E {
  0|2|0|0|0|0:step((16)5(41)3(61)5)
  5|7|6|0|0|0:step((16)5(41)316)
}:bpm(320..160)

@@ {
   Fm7 Em7b5~~~
} >> {
  { 3/10-12-14 }:1/8
  @offset
  |||24~~~
}

@@ 160 {
  @click
  Dm7:2/1
  @/click
} >> {
  { 5/10-12-14 }:1/8
  @offset
  |||||15~~~~~:bd(0..2/12 2, 4.. 1 vib):to(hi) ..|:1/2
}

@@ 200 {
  @click
  Em:2/1
  @/click
} >> {
  { 5/12-14-15 }:1/8
  @offset
  |||||12~~~~~:bd(0..2/12 2, 4.. 1 vib):to(low!15/16) ..|:1/8
}

@@ {
  |||||2:1/16:v70:to&
  |||||4:1/16:v70:to&
  |||||2~~~:bd(
    ..2/8 2, vib,
    reset
  )
} >> {
  |||||12:1/16:v70:to&
  |||||14:1/16:v70:to&
  |||||12~~~:bd(
    ..2/8 2, vib,
    reset
  )
}

@@ {
   C E
} >> {
  |||||24
}

@@ {}
@@ {}
@@ {}
@@ {}
@@ {}
@@ {}
@@ {}
@@ {}
@@ {}
@@ {}

@@ { C } @@ { F } >> { G }:v50:v30

@@ { C } >> { |||||24:bd(
  0..1/16 2
  1.. 0
) }

@@ {
  /|||||12:0/1 ..||||15^:bd(../16 1.9)
  |||||12:0/1 ..||||15^:bd(0..3 2)
  |||||12:0/1 ..||||15^:bd(0..3 2)
  |||||12:0/1 ..||||15~~~~~:bd(0..3 2, 3..7 vib 1, 7.. 0)
}:map(0, 1..5 ss)

@@ {
  Dm7:to& ||21|22|21|~~ Dm7:to& ||22|22|22|
  Dm7:to& ||23|22|21|~~ Dm7:to& ||22|22|22|~~~~~~:bd(4../8 vib 1)
}

@@ {
  Em7:to& ||21|22|21|~~ Em7:to& ||22|22|22|
  Em7:to& ||23|22|21|~~ Em7:to& ||22|22|22|~~~~~~:bd(../6 vib 0.5)
}

@@ {
  ||||13|:0/1 ..|||12~~~:bd(..4/16 2, 4..8 vib)
}

@@ {
  { |3|5|5|4| ..|2 ..|1 |3|4|3|4 }:1/1:stroke(1/8)
} >> {
  { 2|||||2 ..| ..| 2|||||2 }:1/1
}

@@ 160 {
  // |||||12:bd() ..|~~:bd(2)
  // 2|^ ..|^:to 12|~~~

  2|2|2|2|2|2:2/1:to(hi) 9|9|9|9|9|9 
}

@@ { C D E 4/1-2-3 }:bpm(120..320)
@@ {
  |:bpm(40)
  0|||||12:0/1 ..||||15|:bd(..2/15 2, 4.. vib 1) ..|~~~~~~~:bd(0..0/12 1, 0.. vib 2)
  :bpm(160)
}:stroke(off)

@@ {
  |2
} >> {
  // ||||2
} // dualの方が短いので、continueXする場合、この ||||2^ 自体が長くなってしまう

@@ { }

@@ {
  ..||3~~
} >> {
  ..|||||2~~
}

// // ===== dualのnote総計は、block長と合わないため"resolveTicksWithForEachStrings"でバグるケース =====
// @@ { @click r:1/1 } >> {
//   r:1/16
//   Em:d:1/16
//   |||||0~~
// }
// @@ { r r r r r r:1/1 2| } >> {
//   ||||12|
// }

@@  {
  @click
  |||12|12|~:bd(0..2/32 2, 4..6 0)
  ..|:bd(0../16 vib 0.2) ..|:1/8
  ''|||12|12|12:bd() ..r|~~~:bd(../16 -2)
  @/click
}

@@ { C:step(d d d) } //>> { { C r F r Em r}:1/8 }

@@ { 4/3-4-5 }

@@ { |||||12~~~:bd(0..16/16 2) r~~~  } >> { 0|~~~ Em:step((16)234) }:v40
@@ { 0|~~~ Em:step((16)432) }:v40 >> { |||||12~~~:bd(0..16/16 2) }

@@ {
  ||||15|~~~:bd(
    0..1/4 2
    1..7 1 vib
    12.. -2
  )
}

@@ { r:1/1 } >> {
  C:step(D d u d u):1/16
  Em:step(D d u d u):1/16
  r:1/16 Em:d:1/16 C
}



// -----
// 以下、2点 base blockでも再現された不具合
// -----
// error[1]
@@ A|E|A|D|G|B|E { 6/2-3:1/4 }
@@ {}
// error[2]
@@ {}
@@ {} >> A|E|A|D|G|B|E { }
@@ { |||||24 } >> { Em:step(f) }
// ----- ここまで

// error[1]
@@ A|E|A|D|G|B|E { 1/12-13 } >> A|E|A|D|G|B|E { 2/12-13 }
@@ {}
// error[2]
@@ {}
@@ {} >> A|E|A|D|G|B|E { }
@@ { |||||12 } >> { Em:step(f) }

// @@ {
//   { C:map(1) D E }:map(2) F G
// }:degree(E major 7th mode 3th)

@@ { @click |||||10~~~ }
@@ {
  |||5^ |||7^ @offset |||||12
  @/click
} >> {
  2|||^ 3|||^ @offset ||||12
}

@@ {
  // @click
  '''C13:13/16
  4/2-4-5:1/16
  12|0|2|2|0|0:step((16)2345.6):1/8
} >> 1/4 {
    @offset
  |||2|2|2~~~~~
}

@@ A|E|A|D|G|B|E {
  // C:m
  4/2-4-5:1/16 Cm^
  12|0|2|2|0|0|0:step(f6723456):1/8
} >> A|E|A|D|G|B|E {
  ||||||5
}

// 
@@ { |||||4:bd(0..16/16 2) }

// @@ { Em:step(f123456):bd() ..|~~~~~~~:bd(0../16 vib 2):v1 }
// @@ { Em~:step((16)432):bd(2../16 -2, reset) }

@@ {
  ||||15|~~~:bd(
    0..1/24 2
    1..7 1 vib
    12.. -2
  )
}

@@ 160 {
  @click
  Em:2/1
  @/click
} >> {
  { 5/12-14-15 }:1/8
  @offset
  |||||12~~~~~:bd(0..2/12 2, 4.. 1 vib):to(low!14/16) ..|:1/8
}

@@ { 5/2-4-5-7:bd(0../16 2) }

@@ {
  |||7~~~:bd(
    0..2/8 1.2,
    vib 1
  )
}

@@ {
  |||||12~~~:bd(
    0..2/16 -2
    2..16 1 vib
  )
}

@@ 160 {
  // ||||10>>||||17~:to(low)
  ||||10>>||||17~~~~~~~:bd(
    1..2/16 cho 2 ast
    2..3 cho 0.6
    3..5 cho 2
    10.. cho 0
  )
}

@@ 160 {
  ||||10>>||||17~:to(low)
  ||||10>>||||17~~~~~:bd(
    1..2/16 cho 0.5
    2..3 cho 0
    3..4 cho 0.4
    4..5 cho 0
    5..6 cho 0.5
    6..7 cho 0
    7..8 cho 0.45
    9..10 cho 0
    11..12 cho 0.45
    12.. cho 0
  ):to(low.5)
  2|0|1|~~~:stroke(1/4)
}

@@ 160 {
  ||||10>>||||19~:to(low)
  ||||10>>||||20~:to(low)
  ||||10>>||||22~:to(low)
  ||||10>>||||20~~~~~:bd(
    1..2/8 cho 0.5
    2..3 cho 0
    3..4 cho 0.4
    4..5 cho 0
    5..6 cho 0.5
    6..7 cho 0
    7..8 cho 0.45
    9..10 cho 0
    11..12 cho 0.45
    12.. cho 0
  ):to(low.5)
  2|2|0|~~~:stroke(1/4)
}

@@ 160 {
  ||||2!500>>||||17~~~~~~~:bd(
    1..2/16 cho 0.7
    2..3 cho 0
    3..4 cho 1
    4..5 cho 0
    5..6 cho 1
    6..7 cho 0
    7..8 cho 1
    8.. cho 0
  )
}

@@ {
  // ||||12|!240>>||||15|
  { |||3~~~~~~ }:bd(
    1..8/16 cho 2
    8..10 vib 0.5
    10..14 vib 0.5
    // 12..14 vib 0.5
    14..16 vib 0.5
  )

  0| ..|:bd(0..1/4 vib 1) // エラーが出ないか確認(Cannot write negative variable-length integer)
}

@@ { Em } >> { Em7 }:v20
@@ { Em }:v20 >> { Em7 }
@@ { Em } >> { Em7 }:v50
@@ { Em }:v50 >> { Em7 }

@@ 100 {
  |||||2~~~:bd(
    2..2/16 cho 2
    3..3 cho 0
    4..4 cho 2
    5..5 cho 0
    6..6 cho 2
    7..7 cho 0
    8..8 cho 2
    // 2..end/4 vib
  )
}

@@ {

  0|0|||| ..|r|||| ..||||15|~~~:bd(
    0..1/4 cho 2
    // 2../4 vib 2
  )

  ||0|2| r
  ||0|2| r

  ||0|2|:0/1 ..|||||0~~~:bd(
    4..8/8 cho -2
  )
  ..||0|2|:bd(
    0..0/4 cho -2
    0..4 cho 2
  )
  ..||0|2|

  // ||0|2|:0/1 ..|||||0~~~:bd(
  //   4..4/8 cho 2
  // )
}

@@ {
  ||||3:0/1 ..|||2~~~:bd(
    // 0..2/4 cho 2
    0..1/24 cho 2
    2..3 cho 1
    4..5 cho 2
    //2..end vib 0.25
  )
}

@@ {
  ..||2| ..|||2 ..||||2~~~:to& ||15|15|15~~~

  |||||15:3/4:bd(
    1..3/8 cho 1
    3..4/8 cho 0
  ):to(continue) |||||12
}

/*
  チョーキングの開始終了位置の指定は、音長変化に影響受けたくない

  |||||15:bd(
    0..1/4 - 分母を4とした場合、1/4(1間隔)はあくまで 120tickとする
    2..8/4 - 分母を超過することもできる
    
  )
*/

@@ 120 {
  // @click
  r~~~
  ..|||||15~~~:bd(
    0..2/8 cho 1.5
    2..4/8 cho 0
    4..8/8 vib
  )

  // ..r|:1/1:bd()
}

@@ { |||||2!500>>|||||24~~~:bd(4..6/8 cho 2, 7..8/8 cho -2) ..|~:to(3/4) |||||20~~~ }

// @@ { 5/1-2-r-4-5::bd(0..8/8 cho 2) } //対応必要

@@ {
  ||||17| ..|||||12~:bd(0..8/8 cho 1) ..|:1/1

  // アームダウン
  |||2|| ..|||||12:bd(0..8/8 cho -2)
  // ここで normalも+に遷移するのは、"0から0以上"の場合も normal側に pitch0 を設定するため
  ..0|||||:1/1:bd(0..4/4 cho 2)
  // 戻る想定
  0| ..|||2||~~~:bd(0..4/8 cho 2)

}

// 

@@ {
  0| ..|||||15~~~~~:bd(
    0..2/8 cho -2
    2..4/8 cho 1
    4..5/8 cho 2
  )
}

@@ {
  |2|| |2||:bd(0..8/8 cho 1) |2||:bd(0..8/8 cho 2) |2||
}

// keep
@@ {

  // 5/1-2-r-4-5::bd(0..8/8 cho 2)

  |||||12:0/1 ..||||15|:bd(
    0..8/12 cho 1.1
    // 2..5/10 cho 2
    // 7..8/10 cho -2
    // 4..5/16 cho 2
  )

  |||||12:0/1:M ..||||15|:M:bd(
    0..8/12 cho 1.1
    // 2..5/10 cho 2
    // 7..8/10 cho -2
    // 4..5/16 cho 2
  )
  
  ||||10|>>||||20|~~~:bd(0..4/8 cho 2)

}

@@ {||2| ||3| |||5  /|||r|2|~~~ |||3 |||2 }:1/8

@@ 140 1/4  {
  {
    {
      Em
      ..||||15|~:bd(
        // 0..1/8 cho -1
        // 1..4/8 cho 2 
        1..4/8 cho 2 
        4..6/8 cho 2 
        6..8/8 cho -2 
      )
    }// :bd(1..7/8 vib 1 1/4)
  }
}

// keep
@@ {
  Em7:1/1
  Dm7:1/1
  Am7:1/1
  Am7:1/1
} >> {
  6/2-4-5-7-9-10-12-14:1/8
  5/2-4-5-7-9-10-12-14:1/8
  4/2-4-5-7-9-10-12-14:1/8
  /4/12:1/1
}

// keep
@@ 1/4{
  ||5|>>||3|:to ||7| /||12|~~~
  !''''C:v70 R r r
  |||2| /|||12|~:to(hi) R~
  |||5| /|||15|~:to(low)
}
>> 1/4 {
  ||10|>>||7|:to ||12| /||15|~~~
  r r !''''Em:v70 R
  |||5| /|||15|~:to(hi) R~
  |||9| /|||19|~:to(low)
}

@@ 1/4 {
  C5~~~
  // @click
  D~
  E~
  // @/click
  F~
  G~
}

@@ 1/4 {
  C7~~~
} >> 1/4 {
  ||||20|20~
  ||||22|22~
  @offset
}

@@ {
  // @click
  '''C13:13/16
  4/2-4-5:1/16
  12|0|2|2|0|0:step((16.)2345.6):1/8
} >> 1/4 {
  @offset
  |||2|2|2~~~~~
}

// --- step_1 ---
@@ A|E|A|D|G|B|E {
  // C:m
  4/2-4-5:1/16 Cm^
  12|0|2|2|0|0|0:step(f(16m)723456):1/8
}

@@ {
  // 2|0|2|2|0|0:step(123456):1/8
  D
}

// --- step_2 ---
@@ {
  D
} >> 5/5 {
  // 12|:to 0|
  // @offset // Auftakt対策
  // 2|||||2!300>>5|||||5
  5/5-4-2:m:1/16
}

// --- step_3 ---
@@ {
  E~~~:stroke(1/4)
}



@@ 1/4 {

  ||||15|12~~~:bd(
    0..4/8 cho 1
  )

  // groupサンプル
  // { C { D E:bd(1..2/4 vib) }:map(1):bd( 0..4/8 cho 2 ) }:bd( 0..4/8 cho 1 )

}

@@ {
  {
    { C
      D
      E:bd(0..8/8 cho 2)
      /||||15|12~
    }:bd(
      0..2/8 cho 1.25
      // 2..7/8 vib 1/4
      // 7..8/8 end
    )
    F F F
  }
}

/*
  --- BEND考査 ---
  bd(
    0..1/8.hi.2,
    7..8/8:low.0
  )

  // --- 複数ギター考査 ---
  // @dual指定直後のblock2つは、演奏開始タイミングが同期される。
  // 双方とも終了するまで次のblockは始まらない
  // システムとしては @dual フラッシュが出現した次の blockのblockIndexを記録するだけ
  // @dual後の2番めのブロックは、ツイン用に事前作成したもう一つの CompileSymbols に初期段階で移す。
  // 現状、evolveFlatTabObjListで flash処理しているが、flash処理自体を早期に解決する構造に変更して
  // @dualの対応もそこで実施する。
  // ==>> [OK:対応ずみ]現状、flashをブロック外に設定できないので対策必要

  // ...
  // replicationStepNote(map展開)が完了しないと、blockのtickがわからない
  // 
  // TODO:
  // - blockListの仕様が変わるかもしれないので、blockListを
  // - initBlockObj での処理で、@dualの場合、conduct.blockList"Dual".push(block) とする
  // - 上記の段階で、compileSymbolsList を2つに分ける
  // - 

*/

// @@ { Dm7 /||||12| ..D#~~~ ''''''E~ rn }:to(low)

// // undefinedで手前シフト完了してしまっていたため重なった
// @@ { Em:step(61) }
// @@ { Em~:step((16)) }


@@ 1/4 {
  C C C^ C^ C^ C^
  2||2:to(hi) rn 2| %1 ..2|||~~~ rn
}

@@ { 5|5|5:to(continue) |8|8 }

@@ 100 4/4 {
 { C 2|||||2 r |2|2| r |5|5| r |7|7~~ |2|2| }:1/4
 { C Dm Em 0|2|2 ||2||7 ..5| C }
}

@@ 1/4 { { Em Cm A B Dm }:to }
@@ { 2|2|2>>5|5|5|||:to(continue) 14|||||14>>12|||||12 }

@@ {
  |||2||^:to |15|15|||^
  /||||8
}

@@ { 2/1-r-1-2-4:1/8 C:step(f1234):1/4 }
@@ 160 { %1:degree(E minor) }
@@ { 0|||:m 0|||:m 0|||:m 0|||:m }:1/4
@@ B|E|A|D|G|B|E 1/4 { 7/5 6/0 }

@@ { '''C  }
@@ D|E|A|D|G|B|E 1/4 { 1/2-4-5 }
@@ E|A|D|G|B|E 1/4 { Em %3 6|5|4|3|2|1>>0|2|2|0|0|0 }
@@ 1/4 { C:step(12(34)) }

@@ 1/4 E|A|D|G|B|E {
  ''|||0|0|0 C D E
}//:bpm(100..200)

@@ E|A|D|G|B|E {
  ''''|||0|0|0
}

@@ E|A|D|G|B|E {
  ''''|||0|0|0
}

@@ { C D E Em:step((16)234(25)615):1/4 }
@@ E|A|D|G|B|E 160 { Em:1/4:step((16)234(25)615) ''C '''C ''''C '''''C ''''''C '''''''C }

@@ 1/4 {
  Em ||||2|~~~:delay(1/4)
}

@@ 1/4 {
  ..0|||^ ..2|||^ ..3|||^
}

@@ {
  ..||2|
}

@@ 1/4 160 {
  C~~~ Dm~~~ Em~~~ Fmaj7~~~
  ../''|||2|2|2
  ../''''|||5|5|5
  ''%1
  C C C C ''''C C C C
  { C C C C C C C C }:1/24, C~~~
  ..||||2|>>8|10|10|9|8|~
  '''''C~~~
  '''''%1/4~~~
  ..||||2|>>8|10|10|9|8|~
  0|2||:m 0|2||:m 0|2||:m 0|2||:m
  %1~~~ %4:step(f253)
  %1m7~~~ %47:step(f456)
}

// // 222
@@ 160 {
  Em7~~~~~~~ 
} >> {
  {
    {
      |||12||>>|||14||:bd(0.. 2) ..||||12| |||||12
      |||14||:bd(0.. 2) ..||||12| |||||12
      |||14||:bd(.. 2) ..||||12| |||||12
      ||||12|!50>>||||15| ||||12| |||14||
    }:1/12
    {
      |||12||>>|||14||:bd(.. 2) ..||||12| |||||12
      |||14||:bd(.. 2) ..||||12| |||||12
      |||14||:bd(.. 2) ..||||12| |||||12
      |||||12!50>>|||||15 ||||12| |||14||
    }:1/12
  }:v70
}

// 

@@ 160 {
  @click
  Am7~~~~~~~
} >> {
  {
    {
      |||12||>>|||14||:bd(0.. 2) ..||||12| |||||12
      |||14||:bd(0.. 2) ..||||12| |||||12
      |||14||:bd(.. 2) ..||||12| |||||12
      ||||12|!50>>||||15| ||||12| |||14||
    }:1/12
    {
      |||12||>>|||14||:bd(.. 2) ..||||12| |||||12
      |||14||:bd(.. 2) ..||||12| |||||12
      |||14||:bd(.. 2) ..||||12| |||||12
      |||||12!50>>|||||15 ||||12| |||14||
    }:1/12
  }:v70
}

@@ 160 {
  C7~~~~~~~
} >> {
  {
    {
      |||12||>>|||14||:bd(0.. 2) ..||||12| |||||12
      |||14||:bd(0.. 2) ..||||12| |||||12
      |||14||:bd(.. 2) ..||||12| |||||12
      ||||12|!50>>||||15| ||||12| |||14||
    }:1/12
    {
      |||12||>>|||14||:bd(.. 2) ..||||12| |||||12
      |||14||:bd(.. 2) ..||||12| |||||12
      |||14||:bd(.. 2) ..||||12| |||||12
      |||||12!50>>|||||15 ||||12| |||14||
    }:1/12
  }:v70
}

@@ 160 {
  @/click
  Em7~~~~~~~
} >> {
  {
    {
      |||12||>>|||14||:bd(.. 2) ..||||12| |||||12
      |||14||:bd(.. 2) ..||||12| |||||12
      |||14||:bd(.. 2) ..||||12| |||||12
      ||||12|!50>>||||15| ||||12| |||14||
    }:1/12
    {
      |||12||>>|||14||:bd(.. 2) ..||||12| |||||12
      |||14||:bd(.. 2) ..||||12| |||||12
      ||||0|>>||||3| ||||0| |||2|| |||0|| |2|||| |0||||
    }:1/12
  }:v70
}

@@ {
  |3||5|:to& |5||7 |5||7
  |5||7|:to& |7||9 |7||9
  |7||9|:to& |10||12 |10||12
  |10||12|:to& |7||9 |7||9
}:1/8

@@ {
  |||2||5>>|||5||8:to& |||12||15~:to&
  ||2||5|>>||5||8|:to& ||20||23|~:to
  |2||4||>>|5||7||:to& |12||14||~:to&
  2||4||>>5||7||:to& 12||14||~~~:bd(.. -2)
}

@@ {
  |3||5|:to& |5||7 |5||7
  |5||7|:to& |7||9 |7||9
  |7||9|:to& |10||12 |10||12
  |10||12|:to& |7||9 |7||9
}:1/8 >> {
  ||3||5|:to& ||5||7 ||5||7
  ||5||7|:to& ||7||9 ||7||9
  ||7||9|:to& ||10||12 ||10||12
  ||10||12|:to& ||7||9 ||7||9
}:1/8

@@ {
  |||2||5>>|||5||8:to& |||12||15~:to&
  ||2||5|>>||5||8|:to& ||20||23|~:to
  |2||4||>>|5||7||:to& |12||14||~:to&
  2||4||>>5||7||:to& 12||14||~~~:bd(.. -2)
} >> {
  ||2||5>>||5||8:to& ||12||15~:to&
  |2||5|>>|5||8|:to& |20||23|~:to
  2||4||>>5||7||:to& 12||14||~:to&
  2||4||>>5||7||:to& 12||14||~~~:bd(.. -2)
}

@@ { r:1/1 } >> {
  C:step(D d u d u):1/16 Em:step(D d u d u):1/16 r:1/16 Em:d:1/16 C
}

@@ 1/8 160 {
  C7 /|||||5>>|||||7~~~:to(low) C7~~
  Fmaj7:stroke(1/8) /|||||5>>|||||7~~~:delay(1/4):to(low) Fmaj7~~:stroke(1/8)
  G7:stroke(1/8) /|||||3>>|||||6~~~:delay(1/4):to(low) G7~~:stroke(1/8)
  C7 /|||||5>>|||||10~~~:to(low) C#dim~~

  |0|5|5:step((543n.)5):m |0|7|7:step(fn.555):m
  |0|4|7:step(fn.5):m     |0|3|5:step(fn.555):m
  |0|3|4:step((543n.)5):m |0|3|3|3:step(fn.555):m
  |0|5|5:step((543n.)5):m |0|7|7:step(fn.555):m
  |0|5|5:step((543n.)5):M |0|7|7:step(fn.555):M
  |0|4|7:step(fn.5):M     |0|3|5:step(fn.555):M
  |0|3|4:step((543n.)5):M |0|3|3|3:step(fn.555):M
  |0|5|5:step((543n.)5):M |0|7|7:step(fn.555):M
}//:v(100|90|80|70|60|60)

@@ E|A|D|E|A|D|G|B|E {
  2|2|2|2|2|2|2|2|2~~~~~~~:bd(0..1/128 -2, 1.. vib 2, reset)
} >> E|A|D|E|A|D|G|B|E {
  // C~~~~~~~
  0|0|0|0|0|0|0|0|0~~~~~~~:bd(0..1/128 -2, 1.. vib 2, reset)
}

// @@ {
//   0| 0| 0| 0|
//   7| 12| 0| 0|
//   5| 7| 9| 7|
//   5| 3| 0| 0|
// }:to >> {
//   12| 0| 12| 0|
//   12| 0| 12| 0|
//   12| 0| 12| 0|
//   12| 0| 12| 0|
// }:to
  
@@ {
  |0| |0|  |0| |0|
  |7| |12| |0| |0|
  |5| |7|  |9| |7|
  |5| |3|  |0| |0|
}:to >> {
  |12| 0| 12| 0|
  |12| 0| 12| 0|
  |12| 0| 3| 12|
  0|~~~
}:to 

// 

@@ { 0| 0| 0| 0| 7| 12| 0| 0| 5| 7| 9| 7| 5| 3| 0| }:to >> {
  |||||12:1/8 |||||10:1/8
  @offset
  ..|~~~~~~:1/8
  |||||15>>|||||17~~~:1/8:to&

  |||||12:1/8 |||||10:1/8
  ..|~~~~~~:1/8
  |||||15>>|||||17:1/8:to&
}

@@ A|E|A|D|G|B|E {
  2|2|2|2|2|2|2:step((16))
}



@@ 1/4 160 {

  5| ..|2|2|2|2>>|5|5|5|5:to(continue) ..|2|||5:to(continue) ..|6|6||9:to(continue) ..||9||12~~~
  {
    |||12|12|12:step(231.):v60
    |||10|10|10:step(231.):v60
    |||9|9|10:step(231.):v60
    |||8|9|10:step(231.):v60
  }:1/8

  5| ..|2|2|2|2>>|5|5|5|5:to ..|2|||5:to ..|6|6||9:to ..||9||12~~~
  0|9|9|0|0|10:step(f...4.5...63..6.):stroke(1/4):v65:1/8
  
  5| ..|2|2|2|2>>|5|5|5|5:to(continue) ..|2|||5:to(continue) ..|6|6||9:to(continue) ..||9||12~~~
  {
    |||12|12|12:step(231.):v60
    |||10|10|10:step(231.):v60
    |||9|9|10:step(231.):v60
    |||8|9|10:step(231.):v60
  }:1/8
  
  5| ..|2|2|2|2>>|5|5|5|5:to ..|2|||5:to ..|6|6||9:to ..||9||12~~~
  7|9|9|0|0|7~~~~~~~:stroke(1/3):v65

  ..0| ..|3||:to ..|7|7|:to ..0|2|2|0~~~:stroke(1/8)
  ..0| ..|3||:to ..|7|7|:to ..|3||12~~~
  ..2| ..||3|:to ..|7|7|:to ..|2||12~~~
  ..0| ..|3||:to ..|7|7|:to ..|0||12~~~
  ..2| ..|3||:to ..|7|7|:to ..0|3|3|4~~~:stroke(1/6)
  ..0| ..|3||:to ..|7|7|:to ..|3||12~~~
  ..2| ..||3|:to ..|7|7|:to ..|2||12~~~
  ..0| ..|3||:to ..|7|7|:to ..|0||12~~~~~~~

  {
    // to + step 特定弦のみ
    0|2|0|0|0|0:step(654312):to
    ..7|9|9|7|7|12~:step(2536....):to:v70
  
    0|2|0|0|0|0:step(654312):to
    ..5|7|5|5|5|8~:step(2536....):v65
    
    0|2|0|0|0|0:step(654312):to
    ..7|9|9|7|7|12~:step(2536....):to:v70
    
    12|14|14|12|12|0:step(654312):to
    ..5|7|7|5|5|8~:step(2536....):v88
  
    ||2>>||7|7|7:to(low):step(432)
    ||5>>||9|9|9:to(low):step(432)
    ||6>>||10|10|10:step(432)
    ..|||||12~~~

    12|14|14|12|12|0:step(654312):to
    ..5|7|7|5|5|8~:step(2531....):v88

  }:1/8

  // アルペジオ後の自力スライド
    3|5|4|2:step(6):1/8:v70
  ..3|5|4|2:step(5):1/8:v85
  ..3|5|4|2:step(4):2/8:v100
  ..3|5|4|2:step(3):1/8:v80
  ..|5|4:3/8:v95:stroke(1/16):to ..|12|11|~~~:v65 ..0|12|11|0|0|0:8/4:stroke(1/4):v55

  0|2|2|0:step(5):1/8:v70
  ..0|2|2|0:step(4):1/8:v85
  ..0|2|2|0:step(f):2/8:v100
  ..0|2|2|0:step(6):1/8:v80
  ..0|2|2|0:3/8:v95:to(hi.24)

  ..|:4/4

  2|3|2|2|0|0~~~:stroke(1/4)

  // - チョーキング弦の選択 32= の場合3弦と2弦のみ。指定自体ない場合、鳴弦全て
  // - (1.2:fast|v3:big)のうち
  //      1.2は目指すピッチ、fast.3はチョーキング曲線
  //      v3は、3連でビブラート、bigは揺れ幅で、数値指定も可能
  // - タブルチョーキングのビブラートで、チョーキングしない方の弦も少し揺れたい
  // ||||15|12~~~:bd(2=.(1.2:fast.3|v3:big)..(1.0).(v2).)

  ||||10|7>>||||15|12~~~:to(hi) //:bd(2=.(1.2:fast.3|v3:big).(1.2)(1.0).(v2).)

  ||||2|2~~~:to ||||15|15>>||||7|7~~~
  ||||2|5~~~:to ||||15|18>>||||7|10~~~

  ||2>>||7|7|7^:to(low.24):step(432.)
  0|2|2|1|0|0:step(123456):1/16
  ..|:8/4

  // --- slide to おかしいパターン
  ||||10|>>||||15|12~~~ // 1弦の弾き初めがスライド開始と同時 → ユースケース的にはこれが正しいと思っている
  ||||10|!120>>0|0|0|0|15|12~~~:step(f) // 1弦の弾き初めがスライド開始と同時 コードだとしても可視化すると変
  
  // --- refLandedApproachのコメントアウト解除で治ったケース
  ||||10|10~~~:to ..||||5|5!400>>||||15|15~~~ // 最初の to の効果が 5弦だけになっている
  
  // --- 複雑なケーステスト
  5||||5|5!300>>2||||2|2:step(621):to ..||||5|5!300>>||||3|3~~~ //:step((12).1..2):v(|50|50|50)

  // // --- 良いケース
  |||2|2|2>>||||9|9~~~ // 開始が多いが着地点に合わせている
  5||||5|5!300>>2||||2|2:step(621) ..|5|5|5||>>|2|2|2^:step(543...):v(|50|50|50) // step仕様
  |||0|2|2:to ..|||0|5|5 // 4弦は鳴らしっぱなしにするべきか? 次noteで4弦を指定しなければ良い

  ||||10|>>||||15|12~~~
  ||||10|!120>>0|0|0|0|15|12~~~:step(f)

  ||||7|>>||||5|2~~~

  ||2>>||7|7|7:to(low):step(432)
  ||5>>||9|9|9:to(low):step(432)
  ||7>>||10|10|10:to&:step(432)
  ..|||||15~
  ..0|2|2|0|0|3:step(2536....):to(!continue)
  12|~~~:to(continue)
  2|
  
  // 初期自力スライド
  // { ||||8:v85 ||||9 }:1/64:v50 ||||10~~~:v50 // ■
  // { ||||10:v65:1/256 ||||9:v60 ||||8:v57 ||||7:v54 }:1/64:v45 ||||5~~:v50 // ■

  /* スライド全般確認用 */

  {
    2| 5| 5|>>7|
    8| 10| 12| 14|
    |10:to |24:to |14 ||10|
    ||12| ||14|~~
  }:1/4:v85

  
  { 10|10>>15|~~:to(0/16!fast) 0|0|2|2||~:stroke(1/16) }
  { 2|>>24|:to(1/16!fast) 0|~~~ }
  5|~:to(1/16!fast) 12|~~

  ||||8>>||||10~:1/8 ||||8:1/8:v50 |||11~
  { 2| 5| 5|>>7| 9| 10|:to 12| 17| 19| }:1/8
  { 2| 5| 5|>>7| 8| 10| 12| 14| |10:to |12 |14 ||10| ||12| ||14|~~~~~~~:to(2/8) ||2| }:1/16

  C7~:to(hi.3)
  Dm~:to(hi.3)
  5|>>7|~:to(8/16!fast):v100 Em~~:stroke(1/4):to(hi.3)

  F7:to(hi.3)
  Bm:to(hi.3)
  5|>>7|~:to(8/16!fast):v100 C/E~~:stroke(1/4):to(hi)


  // スライド指定パターン
  // --- mix
  2|2|2|2^:step(6543....):to
  7|7|7|7^:step(34(56.)):to
  2|2|2|2^:step((65)43.....)
  
  // --- mix
  r 7|7|7|7|7|>>2|2|2|2|2|2:step((64.)2r(345..)) // stepにapproach
  { |0|0>>|24|24~~~:to(slow) 0|2|2|0|0:to(hi.24):stroke(1/4):v(70|80|80|70|60|50):step(f.1.3...) }
  { 5|!120>>15|~:to(fast!1/8) 0|2|2|0|0~~~:to(hi.24) }
  { 7|!120>>20|~~:to(fast!1/8) 5|4|4|0|0~~~:to(low) }
  { 2|!120>>24|~~:to(fast!1/8) 7|9|9|7~~~~~~~:to(3/4!low.12!slow) }

  // --- slide
  // start until
  2|~:to(5/6) 12|~
  2|~:to(4/6) 12|~
  2|~:to(3/6) 12|~
  2|~:to(2/6) 12|~
  2|~:to(1/6) 12|~

  // continue
  2|~:to(5/6) 12|~
  2|~:to(5/6!continue) 12|~

  // fast, slow, auto
  2|~~:to 12|~
  2|~~:to(auto) 12|~ 
  
  2|~~:to(fast) 12|~
  2|~~:to(fast!auto) 12|~ 
  
  2|~~:to(slow) 12|~
  2|~~:to(slow!auto) 12|~

  // --- approach
  { r } 2|>>7|~ 2|!150>>7|~ 2|!120>>7|~ 2|!130>>7|~ 
  { r } 12|>>7|~ 12|!150>>7|~ 12|!50>>7|~ 12|!50>>7|~ 

  // --- release
  { r } |7~:to(low.24) |2 |7~:to(low.16) |2 |7~:to(low.12) |5 |7~:to(low.6) |2 |7~:to(low) |2
  { r } |7~:to(hi.24) |5 |7~:to(hi.16) |5 |7~:to(hi.12) |5 |7~:to(hi.6) |5 |7~:to(hi)|5 

  // --- mix
  r 0|2:to(!continue) ..|7~
  r |5>>0|2:to(!continue) ..|7~
  r |7>>0|2:to(!continue) ..|7~:to(hi.24)

  {
    // アルペジオチェック
  
    // to + step 特定弦のみ ■現状エラーは解消済み
    { 0|2|0|0|0|0~~~:to ..2|5|5|2|2|2:step(2536....) }
    // to + step 特定弦のみ
    0|2|2|0|0|0~~~:to:stroke(1/4) ..5|7|7|5|5|5:step((61)345..):v(60|80|70|60|50|40)

    // to + step 全弦
    { 5|8|7|7|5|5~~~:to ..2|5|4|4|2|2:step(f536....) }
    
    // step + stroke
    { 5|8|7|7|5|5~~~ ..2|5|4|4|2|2:step(f536....):stroke(1/4) }
  
  }:v100//:v(80|90|90|80|70|60|50)
}

// 

@@ 1/4 160 {
  ||3|3|3|~:to(hi.24) 5|5|3|5|3|5:step(DudUduDudUdu):1/16
  ||3|3|3|~:to(hi.12) 7|7|7|7|7|7:step(DUduDUdu):1/16
  ||3|3|3|:to(1/2!hi.12) 12|12|12||:step(DUduDUdu):1/16
  3|3|3|3|3|3:step(D.Du.uduD.Du.uduD.Du.uduD.Du.uduD.Du.uduD.Du.uduD.Du.uduD.Du.udu):1/16
  C:1/8:step(f.......1.23.4.5)//:stroke(1/4)
}

@@ 1/4 160 {
  ||3|3|3|:to(hi.12) ||3||3|:step(D.Du.udu):1/16
  ||3|3|3|:to(hi.7) ||3||3|:step(DUduDUdu):1/16
  ||3|3|3|:to(low) ||3||3|:step(DUduDUdu):1/16
  ||3|3|3|:to(hi.4) ||3|3||:step(D.Du.udu):1/16
  ||3|3|3|:to(hi.8) |0|3||3|:step(D.Du.udu):1/16
  ||3|3|3|:to(hi.12) 0|0|3||3|:step(D.Du.udu):1/16
  ||3|3|3|~~~:to(1/2!hi.12)
}
// >> 1/4 160 {
//   |15|||15:to(hi.12) |3||3|:step(D.Du.udu):1/16
//   |15|||15:to(hi.7) |3||3|:step(DUduDUdu):1/16
//   |15|||15:to(low) |3||3|:step(DUduDUdu):1/16
//   |15|||15:to(hi.4) |3|3||:step(D.Du.udu):1/16
//   |15|||15:to(hi.8) 0|3||3|:step(D.Du.udu):1/16
//   |15|||15:to(hi.12) |0|0|3||3:step(D.Du.udu):1/16
//   ||7|7|7|~~~:to(1/2!hi.12)
// }

@@ {
  Dm7:to& ||21|22|21|~~ Dm7:to& ||22|22|22|
  Dm7:to& ||23|22|21|~~ Dm7:to& ||22|22|22|~~~~~~:bd(../6 vib 0.5)
}
@@ {
  { 12|12|12|12|12|12:step((61)2(52)3) ..|~~:to 0||15|15|15|0:step((234)1613) ..|~~:bd(0..0/16 -2, 0.. 2) }:bd(0..0/1 -2)
  13|12|12|14|14|14:step((61)2(52)3) ..|~~:to 0||13|13|15|0:step((234)1613) ..|~~:to(hi)
  2|2|2|2|2|2:step((61)2(52)3) ..|~~:to 0||5|3|3|0:step((234)1613) ..|~~
  0|0|3|0|0|0:step((61)2(52)3) ..|~~:to 0||5|5|3|0:step((234)1613) ..|~~:bd(0..8/16 -1):to(hi)
}

@@ {
  Em7:to& ||21|22|21|~~ Em7:to& ||22|22|22|
  Em7:to& ||23|22|21|~~ Em7:to& ||22|22|22|~~~~~~:bd(../6 vib 0.5)
}
@@ {
  { 2|2|2|2|2|2:step((61)2(52)3) ..|~~:to 0||15|15|15|0:step((234)1613) ..|~~:bd(0..0/16 -2, 0.. 2) }:bd(0..0/1 -2)
  3|2|2|4|4|4:step((61)2(52)3) ..|~~:to 0||13|13|15|0:step((234)1613) ..|~~:to(hi)
  12|12|12|12|12|12:step((61)2(52)3) ..|~~:to 0||5|3|3|0:step((234)1613) ..|~~
  2|2|2|3|3|3:step((61)2(52)3) ..|~~:to 0||5|5|3|0:step((234)1613) ..|~~:bd(0..8/16 -1):to(hi)
}

@@ { |||2:to&(1/2) |||12~~~:bd(vib 1) }

@@ { r }

// 

@@ {
  // @click
  |||12||12!300>>|||14||14:1/8:to&(8/16) |||12||12^~~~~~~
  |||10||10!300>>|||12||12:1/8:to&(8/16) |||10||10^~~~~~~
  |||12||12!300>>|||14||14:1/8:to&(8/16) |||12||12^~~
  |||10||10!300>>|||12||12:1/8:to&(8/16) |||10||10^~~~
  C^:step(ffff) ..|^~ rn^^
  Em:2/1 ..|^^ E#m7:2/1 E#m7:2/1 E#m7b5:1/1 Bbm:1/1
}

// BASS Tuning
// @@ E|A|D|G|A|A|A { 0| 0| 0|~~~~~ 0| }

@@ 180 {
  r:4/1 r~~~
} >> {
  {
    |3:bd(0..0 -2) ..|:bd(0..0 0) ..|:bd(0..0 2)
    ||3 ||5:bd(0..0 0) ..|:bd(0..0 2)
    |||3 |||5:bd(0..0 0) ..|:bd(0..0 2) ..|:bd(0..0 0) ..|:bd(0..0 -2)
    ||3:bd(0..0 -2) ..|:bd(0..0 0) ..|:bd(0..0 2)

    |||3 |||5:bd(0..0 0) ..|:bd(0..0 2) ..|:bd(0..0 0) ..|:bd(0..0 -2)
    ||3:bd(0..0 -2) ..|:bd(0..0 0) ..|:bd(0..0 2)

    |3:bd(0..0 -2) ..|:bd(0..0 0) ..|:bd(0..0 2)
    |3:bd(0..0 -2) ..|:bd(0..0 0) ..|:bd(0..0 2)
    ||3 ||5:bd(0..0 0) ..|:bd(0..0 2)

    |||3 |||5:bd(0..0 0) ..|:bd(0..0 2) ..|:bd(0..0 0) ..|:bd(0..0 -2)
    ||3:bd(0..0 -2) ..|:bd(0..0 0) ..|:bd(0..0 2)

    |||5:bd(0..0 -2) ..|~:bd(0..0 2) |||10
    |||15:bd(0..0 2) ..|:bd(0) |||12
  }:1/16:v70

  |||22:4/2:bd(..4 2, 12.. vib 1.7)
}

// 

@@ { @click }
@@ { '''Em~~~~~~~:v80 } >> E|A|D|G|B|E|E|E { 0|~ 5|^ 7| 0|~~ 0|^ 0|^ 0|^ }:to
@@ { '''Am7~~~~~~~:v80 } >> E|A|D|G|B|E|E|E { 0|~ 5|^ 7| 0|~~ 0|^ 0|^ 0|^ }:to
@@ { !'''G7~~~~~~~:v80 } >> E|A|D|G|B|E|E|E { 3|~ 5|^ 7| 3|~~ 3|^ 2|^ 1|^ }:to
@@ { '''Em~~~~~~~:v80 } >> E|A|D|G|B|E|E|E { 0|~ 5|^ 7| 0|~~ 0|^ 0|^ 0|^ }:to
@@ { @/click }

@@ {
  ||||15>>||||17^^:to& ||||15~~~:bd(2../4 2)
  |||15>>|||17^^:to& |||15~~~:bd(0..0/4 0, 2../4 2) |:bd(0)
}

@@ 160 {
  ||5 ||5>>||10 ||10~:bd(vib)
  ||15
  ||15>>||20
  ||20~:bd(0..16/32 0.5):to(1/2)
  5|7~~~:to&(7/8)
  7|9~~~:to&(3/4)
  12|14:4/1:bd(vib 0.5)
} >> {
  ||2 ||2>>||5 ||5~:bd(vib)
  ||12
  ||12>>||15
  ||15~:bd(0..16/32 0.5):to(1/2)
  0|2~~~:to&(7/8)
  ..|5~~~:to&(3/4)
  ..|12:4/1:bd(vib 0.5)
}

@@ { @click }
@@ { '''Em~~~~~~~:v80 } >> E|A|D|G|B|E|E|E { 0|~ 5|^ 7| 0|~~ 0|^ 0|^ 0|^ }:to
@@ { '''Am7~~~~~~~:v80 } >> E|A|D|G|B|E|E|E { 0|~ 5|^ 7| 0|~~ 0|^ 0|^ 0|^ }:to
@@ { !'''G7~~~~~~~:v80 } >> E|A|D|G|B|E|E|E { 3|~ 5|^ 7| 3|~~ 3|^ 2|^ 1|^ }:to
@@ { '''Em~~~~~~~:v80 } >> E|A|D|G|B|E|E|E { 0|~ 5|^ 7| 0|~~ 0|^ 0|^ 0|^ }:to
@@ { @/click }

// 

@@ {
  %1 %2 %3 %4
}:stroke(1/6):step(f.42.1..):degree(G melodic minor 7th)
@@ {
  %4 %3 %2 %1
}:stroke(1/6):step(f.42.1..):degree(E harmonic minor) 

// @@ { ''6|1|2|0|0|0 :map(1..400 step 11):1/1 ..|~~~~~~~}:scale(E minor)
// >> { 1|:map(1..765 step 7):1/3:to:bd(../16 vib) ..|:2/1 }

// @@ { ''4|2|2|0|0|0:map(1..200 step 11):1/1:v70 ..|~~~~~~~}:scale(E minor)
// >> { 4|:map(1..260 step 7):1/2:to:bd(../16 vib):v90 ..|:2/1 }

// @@ 200 E|A|D|G|B|E {
//   { Em r~~ }:map(0 * 8)
// } >> {
//   |||||12:map(
//     0 * 8,
//     1 step 3 * 8,
//     0 * 8,
//     1 step -3 * 8,
//   ):scale(E minor)
// } >> {
//   |||||5:map(
//     0 * 8,
//     1 step 3 * 8,
//     0 * 8,
//     1 step -3 * 8,
//   ):scale(E minor)
// }

// @@ 200 E|A|D|G|B|E {
//   { Gm r~~ }:map(0 * 8)
// } >> {
//   |||3||:map(
//     0 * 8,
//     1 step 3 * 8,
//     0 * 8,
//     1 step -3 * 8,
//   ):scale(G minor)
// } >> {
//   ||3|||:map(
//     0 * 8,
//     1 step 3 * 8,
//     0 * 8,
//     1 step -3 * 8,
//   ):scale(G minor)
// }

@@ 1/8 {
  C '''E G7
}:map(0 step 3 * 4):map(0..7):bpm(120..700)

@@ 140 1/4 {
  {
    {
      { C D E F }:stroke(1/4):to
    }:map(0 step 2 * 1)
  }:map(0 step 2 * 1)
}:map(0 step 2 * 4):bpm(200..900) >> 1/4 {
  {
    {
      { C D E F }:stroke(1/4):to
    }:map(0 step 3 * 1)
  }:map(0 step 3 * 1)
}:map(0 step 3 * 3):bpm(200..900) >> 1/4 {
  {
    {
      { C:step((25)341) }:stroke(1/4):to
    }:map(0 step 3 * 1)
  }:map(0 step 3 * 1)
}:map(0 step 3 * 3):bpm(200..900)


@@ {
  {
    5/0 5/2-4:leg ''''G:step(f.162534)
  }:map(0 step 7 * 7):1/16:bpm(60..160)
  {
    5/0 5/2-4:leg ''''Gm7:step(f.654321)
  }:map(16 step -7 * 7):1/16:bpm(160..30)
  {
    G:d:1/4 ''''Edim~
  }
}:scale(G melodicMinor) >> {
  
  {
    %1~~~~~~~~~:to
  }:map(0 step 7 * 9):1/16
  {
    %3~~~~~~~~~:to
  }:map(16 step -7 * 9):1/16

}:scale(G melodicMinor) >> {
  
  {
    %5~~~~:to
  }:map(0 step 7 * 9):1/16
  {
    %7~~~~
  }:map(16 step -7 * 9):1/16

}:scale(G melodicMinor)

`;


export const LsampleSyntax = `set.style.until: 1/4
set.dual.panning: [0.5, 0, 1]
set.style.scale: C major

@@ 1/4 {
  {
    C:step((54)21):v(60,60,60,70,40,40)
    { '''Dm7~:to(1/16!hi) }
  }
  :map(2..0)
  :scale(A minor)
  :1/4
}
:map(0,7)
:scale(A minor)
:v(60,60,60,70,80,50)
`;
