import{s as le,a as oy,b as oa,c as Jn,P as Oe,r as R,R as re,d as Kr,u as Qt,e as ay,f as cy,g as ly,h as uy,i as fy,j as dy,k as hy,l as my,m as gy,n as py,o as yy,p as vy,q as by,t as xy,v as wy,w as _y,x as Py,L as On,y as jn,z as Mf,A as Ts,B as Au,C as ky,D as y,E as My,O as Sy,F as ue,G as aa,H as Sf,I as Tf,J as Ty,K as Cy,M as Iy,N as Ay}from"./index-BMDqzyv9.js";typeof AudioWorkletGlobalScope<"u"?AudioWorkletGlobalScope.wasmModule:Module;class Ly extends Error{constructor(r,n,s){super(n),this.baseName=r,this.detail=s,s&&s.stack&&(this.stack=s.stack)}}function Ga(t,r){const n={port:t,defers:{},deferId:0};return t.addEventListener("message",s=>Ey(n.defers,r,s)),t.start(),n}function Lu(t){return new Ly(t.baseName,t.message,t.detail)}function Ey(t,r,n){const s=n.data;if(!s||r&&r(s))return;const a=t[s.id];if(a)delete t[s.id],s.error?a.reject(Lu(s.error)):a.resolve(s.val);else if(s.error)throw Lu(s.error)}function me({port:t},r,n){t.postMessage({id:-1,method:r,args:n})}function Pe(t,r,n){const s=t.deferId++;(t.deferId===1/0||t.deferId<0)&&(t.deferId=0);const a=new Promise((l,u)=>{t.defers[s]={resolve:l,reject:u}}),c=[];return n[0]instanceof MessagePort&&c.push(n[0]),t.port.postMessage({id:s,method:r,args:n},c),a}class Ny{constructor(r,n){this.name=n,this._messaging=Ga(r)}getName(){return this.name}getPreset(r,n){return Pe(this._messaging,"getPreset",[r,n])}getPresetIterable(){return Pe(this._messaging,"getPresetIterable",[])}}class Eu{constructor(r){this._messaging=Ga(r)}getRaw(){return Pe(this._messaging,"getRaw",[])}registerSequencerClientByName(r,n,s){return this.getRaw().then(a=>Pe(this._messaging,"registerSequencerClientByName",[a,r,n,s]))}close(){me(this._messaging,"close",[])}registerSynthesizer(r){let n;if(r instanceof Cf)n=r._getRawSynthesizer();else return Promise.reject(new TypeError("'synth' is not a compatible type instance"));return n.then(s=>Pe(this._messaging,"registerSynthesizer",[s]))}unregisterClient(r){me(this._messaging,"unregisterClient",[r])}getAllRegisteredClients(){return Pe(this._messaging,"getAllRegisteredClients",[])}getClientCount(){return Pe(this._messaging,"getClientCount",[])}getClientInfo(r){return Pe(this._messaging,"getClientInfo",[r])}setTimeScale(r){me(this._messaging,"setTimeScale",[r])}getTimeScale(){return Pe(this._messaging,"getTimeScale",[])}getTick(){return Pe(this._messaging,"getTick",[])}sendEventAt(r,n,s){me(this._messaging,"sendEventAt",[r,n,s])}sendEventToClientAt(r,n,s,a){me(this._messaging,"sendEventToClientAt",[r,n,s,a])}removeAllEvents(){me(this._messaging,"removeAllEvents",[])}removeAllEventsFromClient(r){me(this._messaging,"removeAllEventsFromClient",[r])}processSequencer(r){me(this._messaging,"processSequencer",[r])}}let Oy=null;function jy(){return Oy}class Cf{constructor(){this._status={playing:!1,playerPlaying:!1},this._messaging=null,this._node=null,this._gain=.5,this.handleLoggingChanged=this._handleLoggingChanged.bind(this),this.handleLoggingChanged}get node(){return this._node}createAudioNode(r,n){const s={settings:n,disabledLoggingLevel:jy()},a=new AudioWorkletNode(r,"fluid-js",{numberOfInputs:0,numberOfOutputs:1,channelCount:2,outputChannelCount:[2],processorOptions:s});return this._node=a,this._messaging=Ga(a.port,c=>c.method==="updateStatus"?(this._status=c.val,!0):!1),a}isInitialized(){return this._messaging!==null}init(r,n){}close(){me(this._messaging,"init",[0])}isPlaying(){return this._status.playing}setInterpolation(r,n){me(this._messaging,"setInterpolation",[r,n])}getGain(){return this._gain}setGain(r){this._gain=r,Pe(this._messaging,"setGain",[r]).then(()=>Pe(this._messaging,"getGain",[])).then(n=>{this._gain=n})}setChannelType(r,n){me(this._messaging,"setChannelType",[r,n])}waitForVoicesStopped(){return Pe(this._messaging,"waitForVoicesStopped",[])}loadSFont(r){return Pe(this._messaging,"loadSFont",[r])}unloadSFont(r){me(this._messaging,"unloadSFont",[r])}unloadSFontAsync(r){return Pe(this._messaging,"unloadSFont",[r])}getSFontObject(r){const n=new MessageChannel;return Pe(this._messaging,"getSFontObject",[n.port2,r]).then(s=>new Ny(n.port1,s))}getSFontBankOffset(r){return Pe(this._messaging,"getSFontBankOffset",[r])}setSFontBankOffset(r,n){me(this._messaging,"setSFontBankOffset",[r,n])}render(){throw new Error("Unexpected call")}midiNoteOn(r,n,s){me(this._messaging,"midiNoteOn",[r,n,s])}midiNoteOff(r,n){me(this._messaging,"midiNoteOff",[r,n])}midiKeyPressure(r,n,s){me(this._messaging,"midiKeyPressure",[r,n,s])}midiControl(r,n,s){me(this._messaging,"midiControl",[r,n,s])}midiProgramChange(r,n){me(this._messaging,"midiProgramChange",[r,n])}midiChannelPressure(r,n){me(this._messaging,"midiChannelPressure",[r,n])}midiPitchBend(r,n){me(this._messaging,"midiPitchBend",[r,n])}midiSysEx(r){me(this._messaging,"midiSysEx",[r])}midiPitchWheelSensitivity(r,n){me(this._messaging,"midiPitchWheelSensitivity",[r,n])}midiBankSelect(r,n){me(this._messaging,"midiBankSelect",[r,n])}midiSFontSelect(r,n){me(this._messaging,"midiSFontSelect",[r,n])}midiProgramSelect(r,n,s,a){me(this._messaging,"midiProgramSelect",[r,n,s,a])}midiUnsetProgram(r){me(this._messaging,"midiUnsetProgram",[r])}midiProgramReset(){me(this._messaging,"midiProgramReset",[])}midiSystemReset(){me(this._messaging,"midiSystemReset",[])}midiAllNotesOff(r){me(this._messaging,"midiAllNotesOff",[r])}midiAllSoundsOff(r){me(this._messaging,"midiAllSoundsOff",[r])}midiSetChannelType(r,n){me(this._messaging,"midiSetChannelType",[r,n])}resetPlayer(){return Pe(this._messaging,"resetPlayer",[])}closePlayer(){me(this._messaging,"closePlayer",[])}isPlayerPlaying(){return this._status.playerPlaying}addSMFDataToPlayer(r){return Pe(this._messaging,"addSMFDataToPlayer",[r])}playPlayer(){return Pe(this._messaging,"playPlayer",[])}stopPlayer(){me(this._messaging,"stopPlayer",[])}retrievePlayerCurrentTick(){return Pe(this._messaging,"retrievePlayerCurrentTick",[])}retrievePlayerTotalTicks(){return Pe(this._messaging,"retrievePlayerTotalTicks",[])}retrievePlayerBpm(){return Pe(this._messaging,"retrievePlayerBpm",[])}retrievePlayerMIDITempo(){return Pe(this._messaging,"retrievePlayerMIDITempo",[])}seekPlayer(r){me(this._messaging,"seekPlayer",[r])}setPlayerLoop(r){me(this._messaging,"setPlayerLoop",[r])}setPlayerTempo(r,n){me(this._messaging,"setPlayerTempo",[r,n])}waitForPlayerStopped(){return Pe(this._messaging,"waitForPlayerStopped",[])}createSequencer(){const r=new MessageChannel;return Pe(this._messaging,"createSequencer",[r.port2]).then(()=>new Eu(r.port1))}hookPlayerMIDIEventsByName(r,n){return Pe(this._messaging,"hookPlayerMIDIEventsByName",[r,n])}registerSequencerClientByName(r,n,s,a){return r instanceof Eu?r.registerSequencerClientByName(n,s,a):Promise.reject(new TypeError("Invalid sequencer object"))}callFunction(r,n){return Pe(this._messaging,"callFunction",[r,n])}_getRawSynthesizer(){return Pe(this._messaging,"getRawSynthesizer",[])}_handleLoggingChanged(r){this._messaging!=null&&me(this._messaging,"loggingChanged",[r])}}const Qn={title:"Axentax",dualLength:3,defaultEditorFontSize:14};var Ka=(t=>(t[t.electron=0]="electron",t[t.browser=1]="browser",t))(Ka||{});const nr={Platform:1,title:Qn.title+" playground version1.0",assetsPath:"./assets",defaultRightColumnWidth:410};class By{static async init(r){const n=new AudioContext,s=Fy(r);await n.audioWorklet.addModule(nr.assetsPath+"/js/libfluidsynth-2.3.0.js"),await n.audioWorklet.addModule(nr.assetsPath+"/js/js-synthesizer.worklet.js");const a=new Cf;a.init(n.sampleRate),a.createAudioNode(n).connect(n.destination);const l=await s;return await a.loadSFont(l),a}}function Fy(t){return Ry(t)}async function Ry(t){return await(await fetch(t)).arrayBuffer()}class Dy{static sleep(r){return new Promise(n=>setTimeout(n,r))}}const Wy=10;class ve{constructor(){this.synth=null,this.loopFlag=0,this.boundInitForListener=()=>{},this.afterCB=null,this.lastStopTick=-1}static getInstance(){if(!ve.instance)throw"no synth instance";return ve.instance}static init(r){if(ve.instance)r();else{ve.instance=new ve,ve.instance.afterCB=r;const n=ve.initForListener.bind(ve.instance);ve.instance.boundInitForListener=n,document.addEventListener("click",n)}}static initLocal(r){ve.instance?r():(ve.instance=new ve,ve.instance.afterCB=r,this.initForListener())}static initForListener(){document.removeEventListener("click",ve.instance.boundInitForListener),ve.instance.synth||By.init(nr.assetsPath+"/data/TimGM6mb_slim2.sf2").then(r=>{ve.instance.synth=r,console.log("synth ready"),ve.instance.afterCB&&ve.instance.afterCB()})}getSynth(){return this.synth}async startSeekObserver(){const r=this.synth;let n=0;if(r)for(;n===0&&r.retrievePlayerTotalTicks().then(s=>{le.dispatch(oy(s)),n=s}),r.retrievePlayerCurrentTick().then(s=>{this.lastStopTick!==s&&(le.dispatch(oa(s)),this.lastStopTick=s)}),!!this.loopFlag;)await Dy.sleep(Wy)}async setMidiFile(r){const n=this.synth;n&&r&&(n.stopPlayer(),n.closePlayer(),await n.addSMFDataToPlayer(r))}async play(r,n){const s=this.synth;s&&(await this.seekStatus()===1&&this.resetSeek(),le.dispatch(Jn(Oe.PLAY)),r&&(s.stopPlayer(),s.closePlayer(),await s.addSMFDataToPlayer(r)),s.playPlayer(),this.loopFlag=1,this.startSeekObserver(),await s.waitForPlayerStopped(),await s.waitForVoicesStopped(),le.getState().playStatus.status!==Oe.COMPILE&&le.dispatch(Jn(Oe.STOP)),this.loopFlag===1&&(this.loopFlag=0),n(),s.stopPlayer())}stop(){const r=this.synth;r&&r.stopPlayer()}setSeek(r){const n=this.synth;n&&(n.seekPlayer(r),le.dispatch(oa(r)))}resetSeek(){const r=this.synth;r&&(r.seekPlayer(0),le.dispatch(oa(0)))}async seekStatus(){const r=this.synth;if(r){const n=await r.retrievePlayerTotalTicks(),s=await r.retrievePlayerCurrentTick();return n!==0?n<=s?1:s===0?2:3:0}return null}}function Uy(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Nu(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Ou(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Nu(Object(n),!0).forEach(function(s){Uy(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nu(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function zy(t,r){if(t==null)return{};var n={},s=Object.keys(t),a,c;for(c=0;c<s.length;c++)a=s[c],!(r.indexOf(a)>=0)&&(n[a]=t[a]);return n}function $y(t,r){if(t==null)return{};var n=zy(t,r),s,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(a=0;a<c.length;a++)s=c[a],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function qy(t,r){return Hy(t)||Gy(t,r)||Ky(t,r)||Vy()}function Hy(t){if(Array.isArray(t))return t}function Gy(t,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],s=!0,a=!1,c=void 0;try{for(var l=t[Symbol.iterator](),u;!(s=(u=l.next()).done)&&(n.push(u.value),!(r&&n.length===r));s=!0);}catch(d){a=!0,c=d}finally{try{!s&&l.return!=null&&l.return()}finally{if(a)throw c}}return n}}function Ky(t,r){if(t){if(typeof t=="string")return ju(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ju(t,r)}}function ju(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,s=new Array(r);n<r;n++)s[n]=t[n];return s}function Vy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zy(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Bu(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Fu(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Bu(Object(n),!0).forEach(function(s){Zy(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bu(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Yy(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(s){return r.reduceRight(function(a,c){return c(a)},s)}}function ti(t){return function r(){for(var n=this,s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return a.length>=t.length?t.apply(this,a):function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];return r.apply(n,[].concat(a,u))}}}function Cs(t){return{}.toString.call(t).includes("Object")}function Xy(t){return!Object.keys(t).length}function li(t){return typeof t=="function"}function Jy(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function Qy(t,r){return Cs(r)||Nn("changeType"),Object.keys(r).some(function(n){return!Jy(t,n)})&&Nn("changeField"),r}function ev(t){li(t)||Nn("selectorType")}function tv(t){li(t)||Cs(t)||Nn("handlerType"),Cs(t)&&Object.values(t).some(function(r){return!li(r)})&&Nn("handlersType")}function nv(t){t||Nn("initialIsRequired"),Cs(t)||Nn("initialType"),Xy(t)&&Nn("initialContent")}function rv(t,r){throw new Error(t[r]||t.default)}var iv={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Nn=ti(rv)(iv),is={changes:Qy,selector:ev,handler:tv,initial:nv};function sv(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};is.initial(t),is.handler(r);var n={current:t},s=ti(cv)(n,r),a=ti(av)(n),c=ti(is.changes)(t),l=ti(ov)(n);function u(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return is.selector(h),h(n.current)}function d(h){Yy(s,a,c,l)(h)}return[u,d]}function ov(t,r){return li(r)?r(t.current):r}function av(t,r){return t.current=Fu(Fu({},t.current),r),r}function cv(t,r,n){return li(r)?r(t.current):Object.keys(n).forEach(function(s){var a;return(a=r[s])===null||a===void 0?void 0:a.call(r,t.current[s])}),n}var lv={create:sv},uv={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function fv(t){return function r(){for(var n=this,s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return a.length>=t.length?t.apply(this,a):function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];return r.apply(n,[].concat(a,u))}}}function dv(t){return{}.toString.call(t).includes("Object")}function hv(t){return t||Ru("configIsRequired"),dv(t)||Ru("configType"),t.urls?(mv(),{paths:{vs:t.urls.monacoBase}}):t}function mv(){console.warn(If.deprecation)}function gv(t,r){throw new Error(t[r]||t.default)}var If={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Ru=fv(gv)(If),pv={config:hv},yv=function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return function(a){return n.reduceRight(function(c,l){return l(c)},a)}};function Af(t,r){return Object.keys(r).forEach(function(n){r[n]instanceof Object&&t[n]&&Object.assign(r[n],Af(t[n],r[n]))}),Ou(Ou({},t),r)}var vv={type:"cancelation",msg:"operation is manually canceled"};function ca(t){var r=!1,n=new Promise(function(s,a){t.then(function(c){return r?a(vv):s(c)}),t.catch(a)});return n.cancel=function(){return r=!0},n}var bv=lv.create({config:uv,isInitialized:!1,resolve:null,reject:null,monaco:null}),Lf=qy(bv,2),ui=Lf[0],Fs=Lf[1];function xv(t){var r=pv.config(t),n=r.monaco,s=$y(r,["monaco"]);Fs(function(a){return{config:Af(a.config,s),monaco:n}})}function wv(){var t=ui(function(r){var n=r.monaco,s=r.isInitialized,a=r.resolve;return{monaco:n,isInitialized:s,resolve:a}});if(!t.isInitialized){if(Fs({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),ca(la);if(window.monaco&&window.monaco.editor)return Ef(window.monaco),t.resolve(window.monaco),ca(la);yv(_v,kv)(Mv)}return ca(la)}function _v(t){return document.body.appendChild(t)}function Pv(t){var r=document.createElement("script");return t&&(r.src=t),r}function kv(t){var r=ui(function(s){var a=s.config,c=s.reject;return{config:a,reject:c}}),n=Pv("".concat(r.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=r.reject,n}function Mv(){var t=ui(function(n){var s=n.config,a=n.resolve,c=n.reject;return{config:s,resolve:a,reject:c}}),r=window.require;r.config(t.config),r(["vs/editor/editor.main"],function(n){Ef(n),t.resolve(n)},function(n){t.reject(n)})}function Ef(t){ui().monaco||Fs({monaco:t})}function Sv(){return ui(function(t){var r=t.monaco;return r})}var la=new Promise(function(t,r){return Fs({resolve:t,reject:r})}),Nf={config:xv,init:wv,__getMonacoInstance:Sv},Tv={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ua=Tv,Cv={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Iv=Cv;function Av({children:t}){return re.createElement("div",{style:Iv.container},t)}var Lv=Av,Ev=Lv;function Nv({width:t,height:r,isEditorReady:n,loading:s,_ref:a,className:c,wrapperProps:l}){return re.createElement("section",{style:{...ua.wrapper,width:t,height:r},...l},!n&&re.createElement(Ev,null,s),re.createElement("div",{ref:a,style:{...ua.fullWidth,...!n&&ua.hide},className:c}))}var Ov=Nv,Of=R.memo(Ov);function jv(t){R.useEffect(t,[])}var jf=jv;function Bv(t,r,n=!0){let s=R.useRef(!0);R.useEffect(s.current||!n?()=>{s.current=!1}:t,r)}var St=Bv;function ri(){}function wr(t,r,n,s){return Fv(t,s)||Rv(t,r,n,s)}function Fv(t,r){return t.editor.getModel(Bf(t,r))}function Rv(t,r,n,s){return t.editor.createModel(r,n,s?Bf(t,s):void 0)}function Bf(t,r){return t.Uri.parse(r)}function Dv({original:t,modified:r,language:n,originalLanguage:s,modifiedLanguage:a,originalModelPath:c,modifiedModelPath:l,keepCurrentOriginalModel:u=!1,keepCurrentModifiedModel:d=!1,theme:h="light",loading:m="Loading...",options:p={},height:b="100%",width:w="100%",className:P,wrapperProps:S={},beforeMount:L=ri,onMount:T=ri}){let[C,A]=R.useState(!1),[k,N]=R.useState(!0),U=R.useRef(null),$=R.useRef(null),V=R.useRef(null),Z=R.useRef(T),K=R.useRef(L),Ae=R.useRef(!1);jf(()=>{let z=Nf.init();return z.then(q=>($.current=q)&&N(!1)).catch(q=>(q==null?void 0:q.type)!=="cancelation"&&console.error("Monaco initialization: error:",q)),()=>U.current?ge():z.cancel()}),St(()=>{if(U.current&&$.current){let z=U.current.getOriginalEditor(),q=wr($.current,t||"",s||n||"text",c||"");q!==z.getModel()&&z.setModel(q)}},[c],C),St(()=>{if(U.current&&$.current){let z=U.current.getModifiedEditor(),q=wr($.current,r||"",a||n||"text",l||"");q!==z.getModel()&&z.setModel(q)}},[l],C),St(()=>{let z=U.current.getModifiedEditor();z.getOption($.current.editor.EditorOption.readOnly)?z.setValue(r||""):r!==z.getValue()&&(z.executeEdits("",[{range:z.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),z.pushUndoStop())},[r],C),St(()=>{var z,q;(q=(z=U.current)==null?void 0:z.getModel())==null||q.original.setValue(t||"")},[t],C),St(()=>{let{original:z,modified:q}=U.current.getModel();$.current.editor.setModelLanguage(z,s||n||"text"),$.current.editor.setModelLanguage(q,a||n||"text")},[n,s,a],C),St(()=>{var z;(z=$.current)==null||z.editor.setTheme(h)},[h],C),St(()=>{var z;(z=U.current)==null||z.updateOptions(p)},[p],C);let Le=R.useCallback(()=>{var Be;if(!$.current)return;K.current($.current);let z=wr($.current,t||"",s||n||"text",c||""),q=wr($.current,r||"",a||n||"text",l||"");(Be=U.current)==null||Be.setModel({original:z,modified:q})},[n,r,a,t,s,c,l]),qe=R.useCallback(()=>{var z;!Ae.current&&V.current&&(U.current=$.current.editor.createDiffEditor(V.current,{automaticLayout:!0,...p}),Le(),(z=$.current)==null||z.editor.setTheme(h),A(!0),Ae.current=!0)},[p,h,Le]);R.useEffect(()=>{C&&Z.current(U.current,$.current)},[C]),R.useEffect(()=>{!k&&!C&&qe()},[k,C,qe]);function ge(){var q,Be,Xe,Bn;let z=(q=U.current)==null?void 0:q.getModel();u||((Be=z==null?void 0:z.original)==null||Be.dispose()),d||((Xe=z==null?void 0:z.modified)==null||Xe.dispose()),(Bn=U.current)==null||Bn.dispose()}return re.createElement(Of,{width:w,height:b,isEditorReady:C,loading:m,_ref:V,className:P,wrapperProps:S})}var Wv=Dv;R.memo(Wv);function Uv(t){let r=R.useRef();return R.useEffect(()=>{r.current=t},[t]),r.current}var zv=Uv,ss=new Map;function $v({defaultValue:t,defaultLanguage:r,defaultPath:n,value:s,language:a,path:c,theme:l="light",line:u,loading:d="Loading...",options:h={},overrideServices:m={},saveViewState:p=!0,keepCurrentModel:b=!1,width:w="100%",height:P="100%",className:S,wrapperProps:L={},beforeMount:T=ri,onMount:C=ri,onChange:A,onValidate:k=ri}){let[N,U]=R.useState(!1),[$,V]=R.useState(!0),Z=R.useRef(null),K=R.useRef(null),Ae=R.useRef(null),Le=R.useRef(C),qe=R.useRef(T),ge=R.useRef(),z=R.useRef(s),q=zv(c),Be=R.useRef(!1),Xe=R.useRef(!1);jf(()=>{let oe=Nf.init();return oe.then(Ee=>(Z.current=Ee)&&V(!1)).catch(Ee=>(Ee==null?void 0:Ee.type)!=="cancelation"&&console.error("Monaco initialization: error:",Ee)),()=>K.current?ir():oe.cancel()}),St(()=>{var Ee,ot,Fn,bt;let oe=wr(Z.current,t||s||"",r||a||"",c||n||"");oe!==((Ee=K.current)==null?void 0:Ee.getModel())&&(p&&ss.set(q,(ot=K.current)==null?void 0:ot.saveViewState()),(Fn=K.current)==null||Fn.setModel(oe),p&&((bt=K.current)==null||bt.restoreViewState(ss.get(c))))},[c],N),St(()=>{var oe;(oe=K.current)==null||oe.updateOptions(h)},[h],N),St(()=>{!K.current||s===void 0||(K.current.getOption(Z.current.editor.EditorOption.readOnly)?K.current.setValue(s):s!==K.current.getValue()&&(Xe.current=!0,K.current.executeEdits("",[{range:K.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),K.current.pushUndoStop(),Xe.current=!1))},[s],N),St(()=>{var Ee,ot;let oe=(Ee=K.current)==null?void 0:Ee.getModel();oe&&a&&((ot=Z.current)==null||ot.editor.setModelLanguage(oe,a))},[a],N),St(()=>{var oe;u!==void 0&&((oe=K.current)==null||oe.revealLine(u))},[u],N),St(()=>{var oe;(oe=Z.current)==null||oe.editor.setTheme(l)},[l],N);let Bn=R.useCallback(()=>{var oe;if(!(!Ae.current||!Z.current)&&!Be.current){qe.current(Z.current);let Ee=c||n,ot=wr(Z.current,s||t||"",r||a||"",Ee||"");K.current=(oe=Z.current)==null?void 0:oe.editor.create(Ae.current,{model:ot,automaticLayout:!0,...h},m),p&&K.current.restoreViewState(ss.get(Ee)),Z.current.editor.setTheme(l),u!==void 0&&K.current.revealLine(u),U(!0),Be.current=!0}},[t,r,n,s,a,c,h,m,p,l,u]);R.useEffect(()=>{N&&Le.current(K.current,Z.current)},[N]),R.useEffect(()=>{!$&&!N&&Bn()},[$,N,Bn]),z.current=s,R.useEffect(()=>{var oe,Ee;N&&A&&((oe=ge.current)==null||oe.dispose(),ge.current=(Ee=K.current)==null?void 0:Ee.onDidChangeModelContent(ot=>{Xe.current||A(K.current.getValue(),ot)}))},[N,A]),R.useEffect(()=>{if(N){let oe=Z.current.editor.onDidChangeMarkers(Ee=>{var Fn;let ot=(Fn=K.current.getModel())==null?void 0:Fn.uri;if(ot&&Ee.find(bt=>bt.path===ot.path)){let bt=Z.current.editor.getModelMarkers({resource:ot});k==null||k(bt)}});return()=>{oe==null||oe.dispose()}}return()=>{}},[N,k]);function ir(){var oe,Ee;(oe=ge.current)==null||oe.dispose(),b?p&&ss.set(c,K.current.saveViewState()):(Ee=K.current.getModel())==null||Ee.dispose(),K.current.dispose()}return re.createElement(Of,{width:w,height:P,isEditorReady:N,loading:d,_ref:Ae,className:S,wrapperProps:L})}var qv=$v,Hv=R.memo(qv),Gv=Hv;/*!
 * Axentax.js v1.0.0
 * Copyright (c) 2024 Mitsuru Yasuda
 * GPL-3.0 License
 *
 * use:
 * - tonaljs { chord, midi } - https://github.com/tonaljs/tonal
 * - decimal.js - https://github.com/MikeMcl/decimal.js
 */var Kv=Object.defineProperty,Vv=(t,r,n)=>r in t?Kv(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,Du=(t,r,n)=>Vv(t,typeof r!="symbol"?r+"":r,n);function rt(t){var r,n,s,a=t.length-1,c="",l=t[0];if(a>0){for(c+=l,r=1;a>r;r++)(n=J-(s=t[r]+"").length)&&(c+=An(n)),c+=s;(n=J-(s=(l=t[r])+"").length)&&(c+=An(n))}else if(l===0)return"0";for(;l%10==0;)l/=10;return c+l}function yt(t,r,n){if(t!==~~t||r>t||t>n)throw Error(mn+t)}function ii(t,r,n,s){var a,c,l,u;for(c=t[0];c>=10;c/=10)--r;return 0>--r?(r+=J,a=0):(a=Math.ceil((r+1)/J),r%=J),c=Ke(10,J-r),u=t[a]%c|0,s==null?3>r?(r==0?u=u/100|0:r==1&&(u=u/10|0),l=4>n&&u==99999||n>3&&u==49999||u==5e4||u==0):l=(4>n&&u+1==c||n>3&&u+1==c/2)&&(t[a+1]/c/100|0)==Ke(10,r-2)-1||(u==c/2||u==0)&&!(t[a+1]/c/100|0):4>r?(r==0?u=u/1e3|0:r==1?u=u/100|0:r==2&&(u=u/10|0),l=(s||4>n)&&u==9999||!s&&n>3&&u==4999):l=((s||4>n)&&u+1==c||!s&&n>3&&u+1==c/2)&&(t[a+1]/c/1e3|0)==Ke(10,r-3)-1,l}function ys(t,r,n){for(var s,a,c=[0],l=0,u=t.length;u>l;){for(a=c.length;a--;)c[a]*=r;for(c[0]+=Ls.indexOf(t.charAt(l++)),s=0;c.length>s;s++)c[s]>n-1&&(c[s+1]===void 0&&(c[s+1]=0),c[s+1]+=c[s]/n|0,c[s]%=n)}return c.reverse()}function X(t,r,n,s){var a,c,l,u,d,h,m,p,b,w=t.constructor;e:if(r!=null){if(!(p=t.d))return t;for(a=1,u=p[0];u>=10;u/=10)a++;if(0>(c=r-a))c+=J,d=(m=p[b=0])/Ke(10,a-(l=r)-1)%10|0;else if((u=p.length)>(b=Math.ceil((c+1)/J))){for(m=u=p[b],a=1;u>=10;u/=10)a++;d=0>(l=(c%=J)-J+a)?0:m/Ke(10,a-l-1)%10|0}else{if(!s)break e;for(;u++<=b;)p.push(0);m=d=0,a=1,l=(c%=J)-J+1}if(s=s||0>r||p[b+1]!==void 0||(0>l?m:m%Ke(10,a-l-1)),h=4>n?(d||s)&&(n==0||n==(0>t.s?3:2)):d>5||d==5&&(n==4||s||n==6&&(c>0?l>0?m/Ke(10,a-l):0:p[b-1])%10&1||n==(0>t.s?8:7)),1>r||!p[0])return p.length=0,h?(p[0]=Ke(10,(J-(r-=t.e+1)%J)%J),t.e=-r||0):p[0]=t.e=0,t;if(c==0?(p.length=b,u=1,b--):(p.length=b+1,u=Ke(10,J-c),p[b]=l>0?(m/Ke(10,a-l)%Ke(10,l)|0)*u:0),h)for(;;){if(b==0){for(c=1,l=p[0];l>=10;l/=10)c++;for(l=p[0]+=u,u=1;l>=10;l/=10)u++;c!=u&&(t.e++,p[0]==Bt&&(p[0]=1));break}if(p[b]+=u,p[b]!=Bt)break;p[b--]=0,u=1}for(c=p.length;p[--c]===0;)p.pop()}return ne&&(t.e>w.maxE?(t.d=null,t.e=NaN):w.minE>t.e&&(t.e=0,t.d=[0])),t}function Xt(t,r,n){if(!t.isFinite())return Df(t);var s,a=t.e,c=rt(t.d),l=c.length;return r?(n&&(s=n-l)>0?c=c.charAt(0)+"."+c.slice(1)+An(s):l>1&&(c=c.charAt(0)+"."+c.slice(1)),c=c+(0>t.e?"e":"e+")+t.e):0>a?(c="0."+An(-a-1)+c,n&&(s=n-l)>0&&(c+=An(s))):l>a?((s=a+1)<l&&(c=c.slice(0,s)+"."+c.slice(s)),n&&(s=n-l)>0&&(a+1===l&&(c+="."),c+=An(s))):(c+=An(a+1-l),n&&(s=n-a-1)>0&&(c=c+"."+An(s))),c}function vs(t,r){var n=t[0];for(r*=J;n>=10;n/=10)r++;return r}function Is(t,r,n){if(r>ed)throw ne=1,n&&(t.precision=n),Error(Va);return X(new t(xs),r,1,1)}function Kt(t,r,n){if(r>Ps)throw Error(Va);return X(new t(ws),r,n,1)}function Wu(t){var r=t.length-1,n=r*J+1;if(r=t[r]){for(;r%10==0;r/=10)n--;for(r=t[0];r>=10;r/=10)n++}return n}function An(t){for(var r="";t--;)r+="0";return r}function Ff(t,r,n,s){var a,c=new t(1),l=Math.ceil(s/J+4);for(ne=0;;){if(n%2&&$u((c=c.times(r)).d,l)&&(a=1),(n=nt(n/2))===0){n=c.d.length-1,a&&c.d[n]===0&&++c.d[n];break}$u((r=r.times(r)).d,l)}return ne=1,c}function Uu(t){return 1&t.d[t.d.length-1]}function Rf(t,r,n){for(var s,a=new t(r[0]),c=0;++c<r.length;){if(!(s=new t(r[c])).s){a=s;break}a[n](s)&&(a=s)}return a}function fa(t,r){var n,s,a,c,l,u,d,h=0,m=0,p=0,b=t.constructor,w=b.rounding,P=b.precision;if(!t.d||!t.d[0]||t.e>17)return new b(t.d?t.d[0]?0>t.s?0:1/0:1:t.s?0>t.s?0:t:NaN);for(r==null?(ne=0,d=P):d=r,u=new b(.03125);t.e>-2;)t=t.times(u),p+=5;for(d+=s=Math.log(Ke(2,p))/Math.LN10*2+5|0,n=c=l=new b(1),b.precision=d;;){if(c=X(c.times(t),d,1),n=n.times(++m),rt((u=l.plus(ke(c,n,d,1))).d).slice(0,d)===rt(l.d).slice(0,d)){for(a=p;a--;)l=X(l.times(l),d,1);if(r!=null)return b.precision=P,l;if(h>=3||!ii(l.d,d-s,w,h))return X(l,b.precision=P,w,ne=1);b.precision=d+=10,n=c=u=new b(1),m=0,h++}l=u}}function In(t,r){var n,s,a,c,l,u,d,h,m,p,b,w=1,P=t,S=P.d,L=P.constructor,T=L.rounding,C=L.precision;if(0>P.s||!S||!S[0]||!P.e&&S[0]==1&&S.length==1)return new L(S&&!S[0]?-1/0:P.s!=1?NaN:S?0:P);if(r==null?(ne=0,m=C):m=r,L.precision=m+=10,s=(n=rt(S)).charAt(0),Math.abs(c=P.e)>=15e14)return h=Is(L,m+2,C).times(c+""),P=In(new L(s+"."+n.slice(1)),m-10).plus(h),L.precision=C,r==null?X(P,C,T,ne=1):P;for(;7>s&&s!=1||s==1&&n.charAt(1)>3;)s=(n=rt((P=P.times(t)).d)).charAt(0),w++;for(c=P.e,s>1?(P=new L("0."+n),c++):P=new L(s+"."+n.slice(1)),p=P,d=l=P=ke(P.minus(1),P.plus(1),m,1),b=X(P.times(P),m,1),a=3;;){if(l=X(l.times(b),m,1),rt((h=d.plus(ke(l,new L(a),m,1))).d).slice(0,m)===rt(d.d).slice(0,m)){if(d=d.times(2),c!==0&&(d=d.plus(Is(L,m+2,C).times(c+""))),d=ke(d,new L(w),m,1),r!=null)return L.precision=C,d;if(!ii(d.d,m-10,T,u))return X(d,L.precision=C,T,ne=1);L.precision=m+=10,h=l=P=ke(p.minus(1),p.plus(1),m,1),b=X(P.times(P),m,1),a=u=1}d=h,a+=2}}function Df(t){return t.s*t.s/0+""}function Ia(t,r){var n,s,a;for((n=r.indexOf("."))>-1&&(r=r.replace(".","")),(s=r.search(/e/i))>0?(0>n&&(n=s),n+=+r.slice(s+1),r=r.substring(0,s)):0>n&&(n=r.length),s=0;r.charCodeAt(s)===48;s++);for(a=r.length;r.charCodeAt(a-1)===48;--a);if(r=r.slice(s,a)){if(a-=s,t.e=n=n-s-1,t.d=[],s=(n+1)%J,0>n&&(s+=J),a>s){for(s&&t.d.push(+r.slice(0,s)),a-=J;a>s;)t.d.push(+r.slice(s,s+=J));r=r.slice(s),s=J-r.length}else s-=a;for(;s--;)r+="0";t.d.push(+r),ne&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.constructor.minE>t.e&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Zv(t,r){var n,s,a,c,l,u,d,h,m;if(r.indexOf("_")>-1){if(r=r.replace(/(\d)_(?=\d)/g,"$1"),Na.test(r))return Ia(t,r)}else if(r==="Infinity"||r==="NaN")return+r||(t.s=NaN),t.e=NaN,t.d=null,t;if(Jf.test(r))n=16,r=r.toLowerCase();else if(Xf.test(r))n=2;else{if(!Qf.test(r))throw Error(mn+r);n=8}for((c=r.search(/p/i))>0?(d=+r.slice(c+1),r=r.substring(2,c)):r=r.slice(2),c=r.indexOf("."),s=t.constructor,(l=c>=0)&&(c=(u=(r=r.replace(".","")).length)-c,a=Ff(s,new s(n),c,2*c)),c=m=(h=ys(r,n,Bt)).length-1;h[c]===0;--c)h.pop();return 0>c?new s(0*t.s):(t.e=vs(h,m),t.d=h,ne=0,l&&(t=ke(t,a,4*u)),d&&(t=t.times(54>Math.abs(d)?Ke(2,d):Tt.pow(2,d))),ne=1,t)}function xr(t,r,n,s,a){var c,l,u,d,h=t.precision,m=Math.ceil(h/J);for(ne=0,d=n.times(n),u=new t(s);;){if(l=ke(u.times(d),new t(r++*r++),h,1),u=a?s.plus(l):s.minus(l),s=ke(l.times(d),new t(r++*r++),h,1),(l=u.plus(s)).d[m]!==void 0){for(c=m;l.d[c]===u.d[c]&&c--;);if(c==-1)break}c=u,u=s,s=l,l=c}return ne=1,l.d.length=m+1,l}function os(t,r){for(var n=t;--r;)n*=t;return n}function zu(t,r){var n,s=0>r.s,a=Kt(t,t.precision,1),c=a.times(.5);if((r=r.abs()).lte(c))return hn=s?4:1,r;if((n=r.divToInt(a)).isZero())hn=s?3:2;else{if((r=r.minus(n.times(a))).lte(c))return hn=Uu(n)?s?2:3:s?4:1,r;hn=Uu(n)?s?1:4:s?3:2}return r.minus(a).abs()}function da(t,r,n,s){var a,c,l,u,d,h,m,p,b,w=t.constructor,P=n!==void 0;if(P?(yt(n,1,dn),s===void 0?s=w.rounding:yt(s,0,8)):(n=w.precision,s=w.rounding),t.isFinite()){for(P?(a=2,r==16?n=4*n-3:r==8&&(n=3*n-2)):a=r,0>(l=(m=Xt(t)).indexOf("."))||(m=m.replace(".",""),(b=new w(1)).e=m.length-l,b.d=ys(Xt(b),10,a),b.e=b.d.length),c=d=(p=ys(m,10,a)).length;p[--d]==0;)p.pop();if(p[0]){if(0>l?c--:((t=new w(t)).d=p,t.e=c,p=(t=ke(t,b,n,s,0,a)).d,c=t.e,h=Zf),l=p[n],u=a/2,h=h||p[n+1]!==void 0,h=4>s?(l!==void 0||h)&&(s===0||s===(0>t.s?3:2)):l>u||l===u&&(s===4||h||s===6&&1&p[n-1]||s===(0>t.s?8:7)),p.length=n,h)for(;++p[--n]>a-1;)p[n]=0,n||(++c,p.unshift(1));for(d=p.length;!p[d-1];--d);for(l=0,m="";d>l;l++)m+=Ls.charAt(p[l]);if(P){if(d>1)if(r==16||r==8){for(l=r==16?4:3,--d;d%l;d++)m+="0";for(d=(p=ys(m,a,r)).length;!p[d-1];--d);for(l=1,m="1.";d>l;l++)m+=Ls.charAt(p[l])}else m=m.charAt(0)+"."+m.slice(1);m=m+(0>c?"p":"p+")+c}else if(0>c){for(;++c;)m="0"+m;m="0."+m}else if(++c>d)for(c-=d;c--;)m+="0";else d>c&&(m=m.slice(0,c)+"."+m.slice(c))}else m=P?"0p+0":"0";m=(r==16?"0x":r==2?"0b":r==8?"0o":"")+m}else m=Df(t);return 0>t.s?"-"+m:m}function $u(t,r){if(t.length>r)return t.length=r,1}function Yv(t){return new this(t).abs()}function Xv(t){return new this(t).acos()}function Jv(t){return new this(t).acosh()}function Qv(t,r){return new this(t).plus(r)}function eb(t){return new this(t).asin()}function tb(t){return new this(t).asinh()}function nb(t){return new this(t).atan()}function rb(t){return new this(t).atanh()}function ib(t,r){t=new this(t),r=new this(r);var n,s=this.precision,a=this.rounding,c=s+4;return t.s&&r.s?t.d||r.d?!r.d||t.isZero()?(n=0>r.s?Kt(this,s,a):new this(0)).s=t.s:!t.d||r.isZero()?(n=Kt(this,c,1).times(.5)).s=t.s:0>r.s?(this.precision=c,this.rounding=1,n=this.atan(ke(t,r,c,1)),r=Kt(this,c,1),this.precision=s,this.rounding=a,n=0>t.s?n.minus(r):n.plus(r)):n=this.atan(ke(t,r,c,1)):(n=Kt(this,c,1).times(r.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function sb(t){return new this(t).cbrt()}function ob(t){return X(t=new this(t),t.e+1,2)}function ab(t,r,n){return new this(t).clamp(r,n)}function cb(t){if(!t||typeof t!="object")throw Error(_s+"Object expected");var r,n,s,a=t.defaults==1,c=["precision",1,dn,"rounding",0,8,"toExpNeg",-_r,0,"toExpPos",0,_r,"maxE",0,_r,"minE",-_r,0,"modulo",0,9];for(r=0;c.length>r;r+=3)if(n=c[r],a&&(this[n]=Es[n]),(s=t[n])!==void 0){if(nt(s)!==s||c[r+1]>s||s>c[r+2])throw Error(mn+n+": "+s);this[n]=s}if(n="crypto",a&&(this[n]=Es[n]),(s=t[n])!==void 0){if(s!=1&&s!=0&&s!==0&&s!==1)throw Error(mn+n+": "+s);if(s){if(typeof crypto>"u"||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(Za);this[n]=1}else this[n]=0}return this}function lb(t){return new this(t).cos()}function ub(t){return new this(t).cosh()}function fb(t,r){return new this(t).div(r)}function db(t){return new this(t).exp()}function hb(t){return X(t=new this(t),t.e+1,3)}function mb(){var t,r,n=new this(0);for(ne=0,t=0;arguments.length>t;)if((r=new this(arguments[t++])).d)n.d&&(n=n.plus(r.times(r)));else{if(r.s)return ne=1,new this(1/0);n=r}return ne=1,n.sqrt()}function qu(t){return t instanceof Tt||t&&t.toStringTag===Yf||0}function gb(t){return new this(t).ln()}function pb(t,r){return new this(t).log(r)}function yb(t){return new this(t).log(2)}function vb(t){return new this(t).log(10)}function bb(){return Rf(this,arguments,"lt")}function xb(){return Rf(this,arguments,"gt")}function wb(t,r){return new this(t).mod(r)}function _b(t,r){return new this(t).mul(r)}function Pb(t,r){return new this(t).pow(r)}function kb(t){var r,n,s,a,c=0,l=new this(1),u=[];if(t===void 0?t=this.precision:yt(t,1,dn),s=Math.ceil(t/J),this.crypto)if(crypto.getRandomValues)for(r=crypto.getRandomValues(new Uint32Array(s));s>c;)429e7>(a=r[c])?u[c++]=a%1e7:r[c]=crypto.getRandomValues(new Uint32Array(1))[0];else{if(!crypto.randomBytes)throw Error(Za);for(r=crypto.randomBytes(s*=4);s>c;)214e7>(a=r[c]+(r[c+1]<<8)+(r[c+2]<<16)+((127&r[c+3])<<24))?(u.push(a%1e7),c+=4):crypto.randomBytes(4).copy(r,c);c=s/4}else for(;s>c;)u[c++]=1e7*Math.random()|0;for(s=u[--c],t%=J,s&&t&&(a=Ke(10,J-t),u[c]=(s/a|0)*a);u[c]===0;c--)u.pop();if(0>c)n=0,u=[0];else{for(n=-1;u[0]===0;n-=J)u.shift();for(s=1,a=u[0];a>=10;a/=10)s++;J>s&&(n-=J-s)}return l.e=n,l.d=u,l}function Mb(t){return X(t=new this(t),t.e+1,this.rounding)}function Sb(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function Tb(t){return new this(t).sin()}function Cb(t){return new this(t).sinh()}function Ib(t){return new this(t).sqrt()}function Ab(t,r){return new this(t).sub(r)}function Lb(){var t=0,r=arguments,n=new this(r[t]);for(ne=0;n.s&&++t<r.length;)n=n.plus(r[t]);return ne=1,X(n,this.precision,this.rounding)}function Eb(t){return new this(t).tan()}function Nb(t){return new this(t).tanh()}function Ob(t){return X(t=new this(t),t.e+1,1)}function er(t,r){return new Tt(t).add(new Tt(r)).toNumber()}function jb(t){return t.replace(/\s+\)/g,")").replace(/\(\s+/g,"(").replace(/\s*,\s*/g,",").replace(/\s+/g," ")}function Wf(t){switch(t){case"Cb":return"B";case"Db":return"C#";case"Eb":return"D#";case"E#":return"F";case"Fb":return"E";case"Gb":return"F#";case"Ab":return"G#";case"Bb":return"A#";case"B#":return"C";default:return t}}function Bb(t){if(t.length===3){const r=t.replace(/^([CDEFGAB])(b#|#b)$/,"$1");if(r!==t)return r;{const n=t.match(/^([CDEFGAB]#)#$/);if(n)return Uf(n[1]);{const s=t.match(/^([CDEFGAB])bb$/);if(s)return zf(s[1],2)}}}return Wf(t)}function Uf(t){const r=md.iKey,n=r.indexOf(t)+1;return r[n%12]}function zf(t,r=1){const n=md.iKey,s=n.indexOf(t)-r;return n[(12+s)%12]}function bs(t,r){return r*(60/t)*(1/Jt.PPS)}function Fb(t,r){return Jt.PPS*t/60*(r/1e3)}function As(t){return Jt.PPS/t[1]*t[0]}function Rb(t){const r=function(n,s){for(;s!==0;){const a=n;n=s,s=a%s}return n}(t[0],t[1]);return[t[0]/r,t[1]/r]}function $f(t){return t!==null&&typeof t=="object"&&"name"in t&&typeof t.name=="string"?1:0}function qf(t){return t!==null&&typeof t=="object"&&"step"in t&&typeof t.step=="number"&&"alt"in t&&typeof t.alt=="number"?1:0}function Hf(t){const{step:r,alt:n,oct:s,dir:a=1}=t,c=td[r]+7*n;return s===void 0?[a*c]:[a*c,a*(s-nd[r]-4*n)]}function Aa(t){return typeof t=="string"?Fa[t]||(Fa[t]=function(r){const n=function(w){const P=rd.exec(""+w);return P===null?["",""]:P[1]?[P[1],P[2]]:[P[4],P[3]]}(r);if(n[0]==="")return ks;const s=+n[0],a=n[1],c=(Math.abs(s)-1)%7,l=Da[c];if(l==="M"&&a==="P")return ks;const u=l==="M"?"majorable":"perfectable",d=""+s+a,h=0>s?-1:1,m=s===8||s===-8?s:h*(c+1),p=function(w,P){return P==="M"&&w==="majorable"||P==="P"&&w==="perfectable"?0:P==="m"&&w==="majorable"?-1:/^A+$/.test(P)?P.length:/^d+$/.test(P)?-1*(w==="perfectable"?P.length:P.length+1):0}(u,a),b=Math.floor((Math.abs(s)-1)/7);return{empty:0,name:d,num:s,q:a,step:c,alt:p,dir:h,type:u,simple:m,semitones:h*(Ra[c]+p+12*b),chroma:(h*(Ra[c]+p)%12+12)%12,coord:Hf({step:c,alt:p,oct:b,dir:h}),oct:b}}(t)):qf(t)?Aa(function(r){const{step:n,alt:s,oct:a=0,dir:c}=r;if(!c)return"";const l=n+1+7*a;return(0>c?"-":"")+(l===0?n+1:l)+function(u,d){return d===0?u==="majorable"?"M":"P":d===-1&&u==="majorable"?"m":d>0?Ba("A",d):Ba("d",u==="perfectable"?d:d+1)}(Da[n]==="M"?"majorable":"perfectable",s)}(t)):$f(t)?Aa(t.name):ks}function La(t){const r=JSON.stringify(t),n=Ua.get(r);if(n)return n;const s=typeof t=="string"?function(a){const c=Db(a);if(c[0]===""||c[3]!=="")return Wa;const l=c[0],u=c[1],d=c[2],h=(l.charCodeAt(0)+3)%7,m=od(u),p=d.length?+d:void 0,b=Hf({step:h,alt:m,oct:p}),w=l+u+d,P=l+u,S=(Ms[h]+m+120)%12,L=p===void 0?cd(Ms[h]+m,12)-1188:Ms[h]+m+12*(p+1),T=0>L||L>127?null:L;return{empty:0,acc:u,alt:m,chroma:S,coord:b,freq:p===void 0?null:440*Math.pow(2,(L-69)/12),height:L,letter:l,midi:T,name:w,oct:p,pc:P,step:h}}(t):qf(t)?La(function(a){const{step:c,alt:l,oct:u}=a,d=id(c);if(!d)return"";const h=d+sd(l);return u||u===0?h+u:h}(t)):$f(t)?La(t.name):Wa;return Ua.set(r,s),s}function Db(t){const r=ad.exec(t);return r?[r[1].toUpperCase(),r[2].replace(/x/g,"##"),r[3],r[4]]:["","","",""]}function Gf(t){return ld.test(t)}function Hu(t){const r=Gf(t)?t:ud(t)?za(t):Array.isArray(t)?function(n){if(n.length===0)return Pr.chroma;let s;const a=[0,0,0,0,0,0,0,0,0,0,0,0];for(let c=0;n.length>c;c++)s=La(n[c]),s.empty&&(s=Aa(n[c])),s.empty||(a[s.chroma]=1);return a.join("")}(t):fd(t)?t.chroma:Pr.chroma;return qa[r]=qa[r]||function(n){const s=$a(n),a=function(u){const d=u.split("");return d.map((h,m)=>function(p,b){const w=b.length,P=(p%w+w)%w;return b.slice(P,w).concat(b.slice(0,P))}(m,d).join(""))}(n).map($a).filter(u=>u>=2048).sort()[0],c=za(a),l=function(u){const d=[];for(let h=0;12>h;h++)u.charAt(h)==="1"&&d.push(dd[h]);return d}(n);return{empty:0,name:"",setNum:s,chroma:n,normalized:c,intervals:l}}(r)}function Kf(t,r,n,s){return{noteStr:"",syntaxLocation:void 0,tabObjId:r,regionIndex:t,regionNoteIndex:n,note:"",tab:Array(s).fill(void 0),velocity:Array(s).fill(void 0),continueX:0,styles:{},bar:{tick:void 0,fretStartTicks:Array(s).fill(void 0),fretStopTicks:Array(s).fill(void 0),startTick:void 0,stopTick:void 0},bpm:-1,isArpeggio:0,isBullet:0,refMovedSlideTarget:void 0,activeBows:Array(s).fill(void 0),refActiveBows:Array(s).fill(void 0),slideLandingTab:void 0,prevTabObj:void 0,nextTabObj:void 0,untilNext:void 0}}function Wb(t,r,n,s){const a=structuredClone(n);a.refActiveBows=a.tab.map(()=>a);const c=[a];return Ub(t,c,r,a,0,structuredClone(s)),c.length>1?c:null}function Ub(t,r,n,s,a,c){var l;const u=(l=s.styles.strum)!=null&&l.t?s.tab:s.activeBows,d=s.slideLandingTab?s.slideLandingTab:[],h=c.type==="to"?function(w,P,S){const L=[];let T=0;for(let C=0;w.length>C;C++){const A={};w[C]!==void 0&&w[C]!==P[C]&&(A.bowIndex=C,A.startFret=w[C],A.isOpenBowByStart=!A.startFret,P[C]!==void 0&&(A.landingFret=P[C],A.isOpenBowByLanding=!A.landingFret,A.slideWidth=A.landingFret-A.startFret,A.direction=A.slideWidth===0?0:0>A.slideWidth?-1:1,A.slideWidth=Math.abs(A.slideWidth),T++),L.push(A))}if(!L.length)return[];if(T){const C=L.filter(N=>N.landingFret!==void 0),A=L.filter(N=>N.slideWidth>1),k=Math.max(...A.map(N=>N.slideWidth));return C.forEach(N=>{const U=N.slideWidth-k;U&&N.slideWidth>1&&(N.slideWidth=k,N.startFret+=U*N.direction,1>N.startFret&&(N.startFret=1),N.startFret>24&&(N.startFret=24))}),C}{const C=P.filter($=>$!==void 0);if(!C.length)return[];const A=[],k=[];if(L.forEach($=>C.forEach(V=>{const Z=V-$.startFret;Z>0?A.push(Z):0>Z&&k.push(Z)})),!A.length&&!k.length)return[];const N=A.length>k.length?1:-1,U=Math.abs(N>0?Math.max(...A):Math.min(...k));return S.continue=void 0,L.map($=>($.landingFret=$.startFret+U*N,$.direction=N,$.slideWidth=U,$)).filter($=>$.landingFret>=0&&24>$.landingFret)}}(u,d,c):function(w,P,S){const L=[];if(S.releaseWidth===void 0&&!S.arrow){for(let T=0;w.length>T;T++)if(P[T]!==void 0&&w[T]!==void 0&&Math.abs(w[T]-P[T])>3){S.releaseWidth=w[T]-P[T],S.arrow=S.releaseWidth>0?1:-1,S.releaseWidth=Math.abs(S.releaseWidth);break}}if(S.releaseWidth===void 0&&!S.arrow){const T=Math.max(...w.filter(N=>!!N)),C=Math.min(...P.filter(N=>!!N)),A=Math.min(...w.filter(N=>!!N)),k=Math.max(...P.filter(N=>!!N));Math.abs(T-C)>Math.abs(A-k)?(S.releaseWidth=T-C,S.arrow=S.releaseWidth>0?1:-1,S.releaseWidth=Math.abs(S.releaseWidth)):(S.releaseWidth=k-A,S.arrow=S.releaseWidth>0?1:-1,S.releaseWidth=Math.abs(S.releaseWidth))}S.releaseWidth!==void 0||S.arrow||(S.releaseWidth=5,S.arrow=-1);for(let T=0;w.length>T;T++){const C={};if(w[T]!==void 0){if(C.startFret===0)continue;C.bowIndex=T,C.startFret=w[T],C.landingFret=C.startFret+(S.releaseWidth||9)*S.arrow,0>C.landingFret&&(C.landingFret=0),C.slideWidth=C.landingFret-C.startFret,C.direction=S.arrow,C.slideWidth=Math.abs(C.slideWidth),C.startFret!==C.landingFret&&L.push(C)}}return L}(u,d,c);if(!h.length)return s.slideTrueType=1,tr();const m=Math.max(...h.map(w=>w.slideWidth));let p=[];const b={};if(m>1){const w=function(S,L,T,C){L.startableTick=Math.max(...T.map(k=>{var N;return(N=S.refActiveBows[k.bowIndex])==null?void 0:N.bar.fretStartTicks[k.bowIndex]}).filter(k=>!isNaN(k))),L.stopableTick=Math.min(S.bar.stopTick,...T.map(k=>{var N;return(N=S.refActiveBows[k.bowIndex])==null?void 0:N.bar.fretStopTicks[k.bowIndex]}).filter(k=>!isNaN(k)));const A=S.bar.startTick+S.bar.tick/C[1]*C[0];return L.startTick=L.startableTick>A?L.startableTick:A,tr()}(s,b,h,c.startUntil);if(w.fail())return w;const P=function(S,L,T,C,A){const k=Math.max(...A.map(U=>U.slideWidth));let N=[];if(1>=k)return[];if(N=Gu(C.startTick,C.stopableTick,k-1,T),T.auto||T.type==="release"){const U=L.bpm;if(bs(U,Math.max(...N))>S.settings.play.slide.realization.autoStartPointAdjustmentThresholdSec)for(const $ of[2,4,6,8,12,16,23,32,64,128,256,568,1024]){const V=L.bar.startTick+L.bar.tick/$*($-1),Z=Gu(V,C.stopableTick,k-1,T),K=bs(U,Math.max(...Z));if(S.settings.play.slide.realization.autoStartPointAdjustmentThresholdSec>K){N=Z,C.startTick=V;break}}}return N}(t,s,c,b,h);h.forEach(S=>{s.refActiveBows[S.bowIndex].bar.fretStopTicks[S.bowIndex]=b.startTick}),p=function(S,L,T,C,A){var k,N;const U=((N=(k=L.styles)==null?void 0:k.slide)==null?void 0:N.type)==="to"?{min:S.settings.play.slide.velocity.min,max:S.settings.play.slide.velocity.max,decrease:S.settings.play.slide.velocity.decrease}:{min:S.settings.play.release.velocity.min,max:S.settings.play.release.velocity.max,decrease:S.settings.play.release.velocity.decrease},$=[];let V=.001;const Z=Array(L.tab.length).fill(void 0);C.flat().forEach(Le=>{Z[Le.bowIndex]=L.refActiveBows[Le.bowIndex].velocity[Le.bowIndex],Z[Le.bowIndex]>U.max&&(Z[Le.bowIndex]=U.max)});let K=T.startTick;const Ae=Math.max(5,20*bs(L.bpm,K-L.bar.startTick));T.attenuationVelocity=Ae;for(let Le=0;A.length>Le;Le++){const qe=A[Le];Z.forEach((z,q)=>{Z[q]!==void 0&&(Z[q]=Math.max(Z[q]-5,U.min)-Ae)});const ge=Kf(L.regionIndex,er(L.tabObjId,V),er(L.regionNoteIndex,V),L.tab.length);ge.styles.inst=fi.normal,ge.noteStr="#slide",ge.slideTrueType=3,V=er(.001,V),C.forEach(z=>{z.slideWidth>1&&(ge.tab[z.bowIndex]=z.startFret+(1+Le)*z.direction,ge.bar.fretStartTicks[z.bowIndex]=Math.floor(K),ge.bar.fretStopTicks[z.bowIndex]=Math.floor(K+qe))}),ge.velocity=Z.map((z,q)=>ge.tab[q]!==void 0?z:void 0),K+=qe,$.push(ge)}return $}(t,s,b,h,P),r.splice(a+1,0,...p),n.fullNoteIndexWithTick.splice(a+1,0,...Array(p.length).fill(-1))}return s.nextTabObj&&c.continue&&!s.nextTabObj.isRest&&h.forEach(w=>{s.nextTabObj.velocity[w.bowIndex]=Math.max(t.settings.play.slide.velocity.landing,s.nextTabObj.velocity[w.bowIndex]-m*t.settings.play.slide.velocity.decrease)-b.attenuationVelocity}),s.slideTrueType=1,tr()}function Gu(t,r,n,s){const a=(r-t)/n,c=s.inSpeedLevel,l=Array(n).fill(a);if(s.inSpeed&&s.inSpeed!=="mid"){for(let u=0;l.length-1>u;u++){let d=c;0>l[u]-c&&(d=l[u]/2),l[u]-=d;const h=l.length-u-1;for(let m=u+1;l.length>m;m++)l[m]+=d/h}s.inSpeed==="slow"&&l.reverse()}return l}function Ku(t,r,n,s,a){const c=structuredClone(n);c.refActiveBows=c.tab.map(()=>c);const l=a||[c];return zb(t,l,r,c,0,structuredClone(s)),l.length>1?l:null}function zb(t,r,n,s,a,c){const l=function(S,L){const T=[];let C=0;for(let A=0;S.length>A;A++){const k={};S[A]!==void 0&&S[A]!==L[A]&&(k.bowIndex=A,k.startFret=S[A],k.isOpenBowByStart=!k.startFret,L[A]!==void 0&&(k.landingFret=L[A],k.isOpenBowByLanding=!k.landingFret,k.slideWidth=k.landingFret-k.startFret,k.direction=k.slideWidth===0?0:0>k.slideWidth?-1:1,k.slideWidth=Math.abs(k.slideWidth),C++),T.push(k))}if(!T.length)return[];if(C){const A=T.filter(U=>U.landingFret!==void 0),k=T.filter(U=>U.slideWidth>1),N=Math.max(...k.map(U=>U.slideWidth));return A.forEach(U=>{const $=U.slideWidth-N;$&&U.slideWidth>1&&(U.slideWidth=N,U.startFret+=$*U.direction,1>U.startFret&&(U.startFret=1),U.startFret>24&&(U.startFret=24))}),A}{const A=L.filter(V=>V!==void 0);if(!A.length)return[];const k=[],N=[];if(T.forEach(V=>A.forEach(Z=>{const K=Z-V.startFret;K>0?k.push(K):0>K&&N.push(K)})),!k.length&&!N.length)return[];const U=k.length>N.length?1:-1,$=Math.abs(U>0?Math.max(...k):Math.min(...N));return T.map(V=>(V.landingFret=V.startFret+$*U,V.direction=U,V.slideWidth=$,V)).filter(V=>V.landingFret>=0&&24>V.landingFret)}}(c.bowWithFret,s.tab);if(!l.length)return s.slideTrueType=2,tr();const u=Math.max(...l.map(S=>S.slideWidth)),d={},h=function(S,L,T){L.startableTick=Math.max(...T.map(A=>{var k;return(k=S.refActiveBows[A.bowIndex])==null?void 0:k.bar.fretStartTicks[A.bowIndex]}).filter(A=>!isNaN(A))),L.stopableTick=Math.min(...T.map(A=>{var k;return(k=S.refActiveBows[A.bowIndex])==null?void 0:k.bar.fretStopTicks[A.bowIndex]}).filter(A=>!isNaN(A)));const C=S.bar.startTick+S.bar.tick/1*0;return L.startTick=L.startableTick>C?L.startableTick:C,tr()}(s,d,l);if(h.fail())return h;const{baseTick:m,maxSplitTick:p}=function(S,L,T){let C=S.settings.play.approach.widthOfSlide.baseTick,A=S.settings.play.approach.widthOfSlide.maxSplitTick;if(T){const k=T/100;C*=k,A*=k}return C>L.stopableTick-L.startableTick&&(C=L.stopableTick-L.startableTick),{baseTick:C,maxSplitTick:A}}(t,d,c.percentOfSpeed||0);let b=m/u;b>p&&(b=p);const{slideTabObjList:w,landingVelocity:P}=function(S,L,T,C,A,k){const N={min:S.settings.play.approach.velocity.min,max:S.settings.play.approach.velocity.max,decrease:S.settings.play.approach.velocity.decrease,minLanding:S.settings.play.approach.velocity.minLanding},U=[];let $=-.001;const V=S.settings.play.approach.velocity.decrease,Z=S.settings.play.approach.velocity.min;let K=0;const Ae=C.map(ge=>ge.bowIndex);let Le=T.startTick;for(let ge=0;k>ge;ge++){const z=Kf(L.regionIndex,er(L.tabObjId,$),er(L.regionNoteIndex,$),L.tab.length);z.velocity=L.velocity.map((q,Be)=>Ae.includes(Be)?q:void 0),z.styles.inst=fi.normal,z.noteStr="#approach",z.slideTrueType=4,$=er(-.001,$),C.forEach(q=>{if((q.slideWidth>1||ge===0)&&(ge===0?(z.tab[q.bowIndex]=q.startFret+ge*q.direction,z.bar.fretStartTicks[q.bowIndex]=L.bar.fretStartTicks[q.bowIndex]!==void 0?L.bar.fretStartTicks[q.bowIndex]:L.bar.fretStartTicks.find(Be=>Be!==void 0)):(z.tab[q.bowIndex]=q.startFret+ge*q.direction,z.bar.fretStartTicks[q.bowIndex]=Math.floor(Le)),z.bar.fretStopTicks[q.bowIndex]=Math.floor(Le+A)),K){z.velocity[q.bowIndex]>S.settings.play.approach.velocity.max&&(z.velocity[q.bowIndex]=S.settings.play.approach.velocity.max);const Be=z.velocity[q.bowIndex],Xe=Be-Be*(K/100);z.velocity[q.bowIndex]=Xe>Z?Xe:Z}}),Le+=A,K+=V,U.push(z)}const qe=structuredClone(L.velocity);return C.forEach(ge=>{qe[ge.bowIndex]>S.settings.play.approach.velocity.max&&(qe[ge.bowIndex]=S.settings.play.approach.velocity.max);const z=qe[ge.bowIndex],q=z-z*(K/100);qe[ge.bowIndex]=q>N.minLanding?q:N.minLanding}),{slideTabObjList:U,landingVelocity:qe}}(t,s,d,l,b,u);return r.splice(a,0,...w),n.fullNoteIndexWithTick.splice(a,0,...Array(w.length).fill(-1)),s.velocity=P,s.slideTrueType=2,l.forEach(S=>{s.bar.fretStartTicks[S.bowIndex]!==void 0&&(s.bar.fretStartTicks[S.bowIndex]=s.bar.fretStartTicks[S.bowIndex]+b*u)}),tr()}function En(t){return 10*s5*t}function Ea(t){return t>8191?8191:-8191>t?-8191:Math.floor(t)}function ha(t,r,n,s,a,c=0){const l=n-r,u=c?l:l/2;if(u===0)return[];const d=En(s),h=En(a)-d;for(let m=0;u>=m;m+=Jt.bendSeparateTick)t.push({pitch:Ea(d+Math.ceil((Math.sin(m/l*2*Math.PI-Math.PI/2)+1)/2*h)),tick:r+(c?m:2*m)});return t}function si(t,r,n,s,a,c=0){if(c){const l=n-r;return si(t,r,r+l/2-1,s,a),void si(t,r+l/2,n,a,s)}a>s?function(l,u,d,h,m){const p=d-u;if(!p)return[];const b=En(h),w=En(m)-b;for(let P=0;p>=P;P+=Jt.bendSeparateTick)l.push({tick:P+u,pitch:Ea(b+w/(p*p)*P*P)})}(t,r,n,s,a):function(l,u,d,h,m){const p=h,b=d-u,w=En(m),P=Math.floor(En(p))-w;if(P===0)return[];for(let S=0;b>=S;S+=Jt.bendSeparateTick){const L=b-S;l.push({tick:S+u,pitch:Ea(w+P/(b*b)*L*L)})}}(t,r,n,s,a)}function Vr(t,r){const n={bendNormalList:[],bendChannelList:[]};return $b(n,{tabObjId:-1,bar:t,styles:{inst:fi.normal}},structuredClone(r)),n.bendChannelList}function $b(t,r,n){const s={specifiedPitch:0,untilStep:0},a={view:[],bend:[]};let c=0;const l=r.styles.inst===void 0||r.styles.inst===fi.normal?0:1;for(let u=0;n.length>u;u++){const d=n[u],h=qb(s,r,d,a);if(h.fail())return h;if(s.untilStep=d.untilRange[0],h.res.length&&(t.bendChannelList.push({bend:h.res,hasMute:l,tabObjId:r.tabObjId}),a.bend.push(h.res),r.continueX)){const m=[];h.res.forEach((p,b)=>{p.pitch>0||(h.res.length-1>b&&h.res[b+1].pitch>0?m.push({tick:p.tick,pitch:0}):r.styles.legato||(c=1,m.push(p)))}),m.length&&t.bendNormalList.push({bend:m,hasMute:l,tabObjId:r.tabObjId})}}if(c){const u=Math.max(...r.bar.fretStopTicks.map(d=>d!==void 0?d:-1));0>u||t.bendNormalList.push({bend:[{tick:u,pitch:0}],hasMute:l,tabObjId:r.tabObjId})}return tr()}function qb(t,r,n,s){return n.method===void 0?function(a,c,l,u){const d=[],h=function(m,p){const b=As([1,p[2]]);let w=m.bar.startTick+b*p[0],P=-1;p[1]===-1?P=m.bar.stopTick:p[1]===-2?(w=m.bar.stopTick,P=m.bar.stopTick):P=m.bar.startTick+b*p[1];let S=Math.max(...m.bar.fretStartTicks.map(T=>T!==void 0?T:-1)),L=m.bar.fretStopTicks.filter(T=>T!==void 0).length?Math.min(...m.bar.fretStopTicks.filter(T=>T!==void 0)):-1;return S!==-1&&L>S||(S=m.bar.startTick,L=m.bar.stopTick),S>P||w>L?new Xn(void 0):(P>L&&(P=L),S>w&&(w=S),new Xn({startTick:w,stopTick:P}))}(c,l.untilRange);return h.fail()?h:(h.res!==void 0&&(h.res.startTick===h.res.stopTick?(d.push({tick:h.res.startTick-1,pitch:En(a.specifiedPitch)}),d.push({tick:h.res.startTick,pitch:En(l.pitch)})):l.curve!==Ss.ast?ha(d,h.res.startTick,h.res.stopTick,a.specifiedPitch,l.pitch):si(d,h.res.startTick,h.res.stopTick,a.specifiedPitch,l.pitch),u.view.push({startTick:h.res.startTick,stopTick:h.res.stopTick,row:l.row,line:l.line,linePos:l.linePos})),a.specifiedPitch=l.pitch,new Xn(d))}(t,r,n,s):(n.pitch===void 0&&(n.pitch=t.specifiedPitch===0?.3:t.specifiedPitch>0?t.specifiedPitch-.3:t.specifiedPitch+.3),function(c,l,u,d){const h=[];let m=0;if(u.untilRange[1]===-1){const p=As([1,u.untilRange[2]]);u.untilRange[1]=l.bar.tick/p}for(let p=u.untilRange[0];u.untilRange[1]>p;p++){const b=Hb(l,[p,p+1,u.untilRange[2]]);if(b.fail())return b;b.res!==void 0&&(m?u.curve!==Ss.ast?ha(h,b.res.startTick,b.res.stopTick,u.pitch,c.specifiedPitch):si(h,b.res.startTick,b.res.stopTick,u.pitch,c.specifiedPitch):u.curve!==Ss.ast?ha(h,b.res.startTick,b.res.stopTick,c.specifiedPitch,u.pitch):si(h,b.res.startTick,b.res.stopTick,c.specifiedPitch,u.pitch),d.view.push({startTick:b.res.startTick,stopTick:b.res.stopTick,row:u.row,line:u.line,linePos:u.linePos}),m=m?0:1)}return c.specifiedPitch=m?u.pitch:c.specifiedPitch,new Xn(h)}(t,r,n,s))}function Hb(t,r){const n=As([1,r[2]]);let s=t.bar.startTick+n*r[0],a=-1;a=r[1]===-1?t.bar.stopTick:t.bar.startTick+n*r[1];let c=Math.max(...t.bar.fretStartTicks.map(u=>u!==void 0?u:-1)),l=t.bar.fretStopTicks.filter(u=>u!==void 0).length?Math.min(...t.bar.fretStopTicks.filter(u=>u!==void 0)):-1;return c!==-1&&l>c||(c=t.bar.startTick,l=t.bar.stopTick),c>a||s>l?new Xn(void 0):(a>l&&(a=l),c>s&&(s=c),new Xn({startTick:s,stopTick:a}))}function Gb(t){var r,n;return t.i?t:(typeof(r=t.default)=="function"?(n=function s(){return this instanceof s?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)},n.prototype=r.prototype):n={},Object.defineProperty(n,"i",{value:1}),Object.keys(t).forEach(function(s){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,a.get?a:{enumerable:1,get:function(){return t[s]}})}),n)}function Kb(t){function r(){var l,u,d,h,m,p,b,w={};if(w.deltaTime=a.readVarInt(),240&~(l=a.readUInt8())){if(128&l)m=a.readUInt8(),s=l;else{if(s===null)throw"Running status byte encountered before status byte";m=l,l=s,w.running=1}switch(p=l>>4,w.channel=15&l,p){case 8:return w.type="noteOff",w.noteNumber=m,w.velocity=a.readUInt8(),w;case 9:return b=a.readUInt8(),w.type=b===0?"noteOff":"noteOn",w.noteNumber=m,w.velocity=b,b===0&&(w.byte9=1),w;case 10:return w.type="noteAftertouch",w.noteNumber=m,w.amount=a.readUInt8(),w;case 11:return w.type="controller",w.controllerType=m,w.value=a.readUInt8(),w;case 12:return w.type="programChange",w.programNumber=m,w;case 13:return w.type="channelAftertouch",w.amount=m,w;case 14:return w.type="pitchBend",w.value=m+(a.readUInt8()<<7)-8192,w;default:throw"Unrecognised MIDI event type: "+p}}else{if(l!==255){if(l==240)return w.type="sysEx",d=a.readVarInt(),w.data=a.readBytes(d),w;if(l==247)return w.type="endSysEx",d=a.readVarInt(),w.data=a.readBytes(d),w;throw"Unrecognised MIDI event type byte: "+l}switch(w.meta=1,u=a.readUInt8(),d=a.readVarInt(),u){case 0:if(w.type="sequenceNumber",d!==2)throw"Expected length for sequenceNumber event is 2, got "+d;return w.number=a.readUInt16(),w;case 1:return w.type="text",w.text=a.readString(d),w;case 2:return w.type="copyrightNotice",w.text=a.readString(d),w;case 3:return w.type="trackName",w.text=a.readString(d),w;case 4:return w.type="instrumentName",w.text=a.readString(d),w;case 5:return w.type="lyrics",w.text=a.readString(d),w;case 6:return w.type="marker",w.text=a.readString(d),w;case 7:return w.type="cuePoint",w.text=a.readString(d),w;case 32:if(w.type="channelPrefix",d!=1)throw"Expected length for channelPrefix event is 1, got "+d;return w.channel=a.readUInt8(),w;case 33:if(w.type="portPrefix",d!=1)throw"Expected length for portPrefix event is 1, got "+d;return w.port=a.readUInt8(),w;case 47:if(w.type="endOfTrack",d!=0)throw"Expected length for endOfTrack event is 0, got "+d;return w;case 81:if(w.type="setTempo",d!=3)throw"Expected length for setTempo event is 3, got "+d;return w.microsecondsPerBeat=a.readUInt24(),w;case 84:if(w.type="smpteOffset",d!=5)throw"Expected length for smpteOffset event is 5, got "+d;return h=a.readUInt8(),w.frameRate={0:24,32:25,64:29,96:30}[96&h],w.hour=31&h,w.min=a.readUInt8(),w.sec=a.readUInt8(),w.frame=a.readUInt8(),w.subFrame=a.readUInt8(),w;case 88:if(w.type="timeSignature",d!=2&&d!=4)throw"Expected length for timeSignature event is 4 or 2, got "+d;return w.numerator=a.readUInt8(),w.denominator=1<<a.readUInt8(),d===4?(w.metronome=a.readUInt8(),w.thirtyseconds=a.readUInt8()):(w.metronome=36,w.thirtyseconds=8),w;case 89:if(w.type="keySignature",d!=2)throw"Expected length for keySignature event is 2, got "+d;return w.key=a.readInt8(),w.scale=a.readUInt8(),w;case 127:return w.type="sequencerSpecific",w.data=a.readBytes(d),w;default:return w.type="unknownMeta",w.data=a.readBytes(d),w.metatypeByte=u,w}}}for(var n,s,a=new ut(t),c=[];!a.eof();)n=r(),c.push(n);return c}function ut(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}function Vb(t,r,n){var s,a=new ft,c=r.length,l=null;for(s=0;c>s;s++)n.running!=0&&(n.running||r[s].running)||(l=null),l=Zb(a,r[s],l,n.useByte9ForNoteOff);t.writeChunk("MTrk",a.buffer)}function Zb(t,r,n,s){var a,c,l=r.type,u=r.text||"",d=r.data||[],h=null;switch(t.writeVarInt(r.deltaTime),l){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(r.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(u.length),t.writeString(u);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(u.length),t.writeString(u);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(u.length),t.writeString(u);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(u.length),t.writeString(u);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(u.length),t.writeString(u);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(u.length),t.writeString(u);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(u.length),t.writeString(u);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(r.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(r.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(r.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5),t.writeUInt8(31&r.hour|{24:0,25:32,29:64,30:96}[r.frameRate]),t.writeUInt8(r.min),t.writeUInt8(r.sec),t.writeUInt8(r.frame),t.writeUInt8(r.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(r.numerator),t.writeUInt8(255&Math.floor(Math.log(r.denominator)/Math.LN2)),t.writeUInt8(r.metronome),t.writeUInt8(r.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(r.key),t.writeUInt8(r.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(d.length),t.writeBytes(d);break;case"unknownMeta":r.metatypeByte!=null&&(t.writeUInt8(255),t.writeUInt8(r.metatypeByte),t.writeVarInt(d.length),t.writeBytes(d));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(d.length),t.writeBytes(d);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(d.length),t.writeBytes(d);break;case"noteOff":(h=(s!=0&&r.byte9||s&&r.velocity==0?144:128)|r.channel)!==n&&t.writeUInt8(h),t.writeUInt8(r.noteNumber),t.writeUInt8(r.velocity);break;case"noteOn":(h=144|r.channel)!==n&&t.writeUInt8(h),t.writeUInt8(r.noteNumber),t.writeUInt8(r.velocity);break;case"noteAftertouch":(h=160|r.channel)!==n&&t.writeUInt8(h),t.writeUInt8(r.noteNumber),t.writeUInt8(r.amount);break;case"controller":(h=176|r.channel)!==n&&t.writeUInt8(h),t.writeUInt8(r.controllerType),t.writeUInt8(r.value);break;case"programChange":(h=192|r.channel)!==n&&t.writeUInt8(h),t.writeUInt8(r.programNumber);break;case"channelAftertouch":(h=208|r.channel)!==n&&t.writeUInt8(h),t.writeUInt8(r.amount);break;case"pitchBend":(h=224|r.channel)!==n&&t.writeUInt8(h),c=(a=8192+r.value)>>7&127,t.writeUInt8(127&a),t.writeUInt8(c);break;default:throw"Unrecognized event type: "+l}return h}function ft(){this.buffer=[]}function Vu(t,r,n){var s,a,c,l,u,d,h;if(n===void 0&&(n="ticks"),s=0,c=a=t.length,a>0&&r>=t[a-1][n])return a-1;for(;c>s;){if(d=t[(l=Math.floor(s+(c-s)/2))+1],(u=t[l])[n]===r){for(h=l;t.length>h;h++)t[h][n]===r&&(l=h);return l}if(r>u[n]&&d[n]>r)return l;u[n]>r?c=l:r>u[n]&&(s=l+1)}return-1}function Zu(t){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][t%12]}function Vf(t,r){var n,s;for(n=0;t.length>n;n++)Array.isArray(s=t[n])?Vf(s,r):r.push(s)}function Yb(t,r){return{absoluteTime:t.ticks,channel:r,controllerType:t.number,deltaTime:0,type:"controller",value:Math.floor(127*t.value)}}function Xb(t){return{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:"programChange"}}var _r,dn,Ls,xs,ws,Es,Zf,hn,ne,_s,mn,Va,Za,Yf,nt,Ke,Xf,Jf,Qf,Na,Bt,J,ed,Ps,D,ke,Tt,Ft,Oa,ja,oi,td,nd,Ba,ks,rd,Fa,Ra,Da,ma,Wa,Ua,id,sd,od,ad,cd,Ms,Pr,za,$a,ld,ud,fd,qa,dd,Yu,ga,Zr,Yr,Zn,hd,ai,Xu,Ju,ci,Kn,kr,pa,as,Xr,cs,ls,Qu,Jr,Mn,Qr,ya,ef,us,tf,Vn,nf,fs,rf,sf,of,va,af,ei,cf,ni,fn,lf,uf,ff,df,hf,fi=(t=>(t.normal="normal",t.mute="mute",t.muteContinue="muteContinue",t.rest="rest",t.restNoise="restNoise",t.brushing_d="brushing_d",t.brushing_D="brushing_D",t.brushing_u="brushing_u",t.brushing_U="brushing_U",t.strum="strum",t.normalUnContinueForStep="normalUnContinueForStep",t))(fi||{}),Jb=(t=>(t[t.vib=0]="vib",t))(Jb||{}),Ss=(t=>(t[t.ast=0]="ast",t[t.tri=1]="tri",t))(Ss||{}),Qb=(t=>(t[t.vib=0]="vib",t[t.cho=1]="cho",t[t.end=2]="end",t))(Qb||{}),e5=(t=>(t[t.fast=0]="fast",t[t.slow=1]="slow",t[t.auto=2]="auto",t))(e5||{}),Ha=(t=>(t[t.rev=0]="rev",t[t.ss=1]="ss",t[t.sos=2]="sos",t[t.nos=3]="nos",t))(Ha||{});Object.keys(Ha).filter(t=>isNaN(+t)&&!isNaN(Ha[t]));const Jt={dualJoiner:">>",dualLength:3,basicTick:480,PPS:1920,startTick:480,bpmTransitionSpan:2,maxUntilNext0:128,maxUntilNext1:128,minBPM:1,maxBPM:1e3,maxTopFret:24,maxBows:9,maxApproachPercent:500,maxStrumWidthMSec:100,maxSuffixExtensionLength:16,bendSeparateTick:10,bendMaxFixedUntilDenom:128,maxMappedStepOrder:1e3},md={iKey:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],iKey32material:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]};dn=1e9,Ls="0123456789abcdef",Es={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-(_r=9e15),maxE:_r,crypto:0},ne=1,mn=(_s="[DecimalError] ")+"Invalid argument: ",Va=_s+"Precision limit exceeded",Za=_s+"crypto unavailable",nt=Math.floor,Ke=Math.pow,Xf=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Jf=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Qf=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Na=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Bt=1e7,J=7,ed=(xs="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058").length-1,Ps=(ws="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789").length-1,(D={toStringTag:Yf="[object Decimal]"}).absoluteValue=D.abs=function(){var t=new this.constructor(this);return 0>t.s&&(t.s=1),X(t)},D.ceil=function(){return X(new this.constructor(this),this.e+1,2)},D.clampedTo=D.clamp=function(t,r){var n=this,s=n.constructor;if(t=new s(t),r=new s(r),!t.s||!r.s)return new s(NaN);if(t.gt(r))throw Error(mn+r);return 0>n.cmp(t)?t:n.cmp(r)>0?r:new s(n)},D.comparedTo=D.cmp=function(t){var r,n,s,a,c=this,l=c.d,u=(t=new c.constructor(t)).d,d=c.s,h=t.s;if(!l||!u)return d&&h?d!==h?d:l===u?0:!l^0>d?1:-1:NaN;if(!l[0]||!u[0])return l[0]?d:u[0]?-h:0;if(d!==h)return d;if(c.e!==t.e)return c.e>t.e^0>d?1:-1;for(r=0,n=(a=u.length)>(s=l.length)?s:a;n>r;++r)if(l[r]!==u[r])return l[r]>u[r]^0>d?1:-1;return s===a?0:s>a^0>d?1:-1},D.cosine=D.cos=function(){var t,r,n=this,s=n.constructor;return n.d?n.d[0]?(r=s.rounding,s.precision=(t=s.precision)+Math.max(n.e,n.sd())+J,s.rounding=1,n=function(a,c){var l,u,d,h,m;if(c.isZero())return c;for(32>(u=c.d.length)?d=""+1/os(4,l=Math.ceil(u/3)):(l=16,d="2.3283064365386962890625e-10"),a.precision+=l,c=xr(a,1,c.times(d),new a(1)),h=l;h--;)m=c.times(c),c=m.times(m).minus(m).times(8).plus(1);return a.precision-=l,c}(s,zu(s,n)),s.precision=t,s.rounding=r,X(hn==2||hn==3?n.neg():n,t,r,1)):new s(1):new s(NaN)},D.cubeRoot=D.cbrt=function(){var t,r,n,s,a,c,l,u,d,h,m=this,p=m.constructor;if(!m.isFinite()||m.isZero())return new p(m);for(ne=0,(c=m.s*Ke(m.s*m,1/3))&&Math.abs(c)!=1/0?s=new p(""+c):(n=rt(m.d),(c=((t=m.e)-n.length+1)%3)&&(n+=c==1||c==-2?"0":"00"),c=Ke(n,1/3),t=nt((t+1)/3)-(t%3==(0>t?-1:2)),(s=new p(n=c==1/0?"5e"+t:(n=c.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=m.s),l=(t=p.precision)+3;;)if(h=(d=(u=s).times(u).times(u)).plus(m),s=ke(h.plus(m).times(u),h.plus(d),l+2,1),rt(u.d).slice(0,l)===(n=rt(s.d)).slice(0,l)){if((n=n.slice(l-3,l+1))!="9999"&&(a||n!="4999")){+n&&(+n.slice(1)||n.charAt(0)!="5")||(X(s,t+1,1),r=!s.times(s).times(s).eq(m));break}if(!a&&(X(u,t+1,0),u.times(u).times(u).eq(m))){s=u;break}l+=4,a=1}return ne=1,X(s,t,p.rounding,r)},D.decimalPlaces=D.dp=function(){var t,r=this.d,n=NaN;if(r){if(n=((t=r.length-1)-nt(this.e/J))*J,t=r[t])for(;t%10==0;t/=10)n--;0>n&&(n=0)}return n},D.dividedBy=D.div=function(t){return ke(this,new this.constructor(t))},D.dividedToIntegerBy=D.divToInt=function(t){var r=this.constructor;return X(ke(this,new r(t),0,1,1),r.precision,r.rounding)},D.equals=D.eq=function(t){return this.cmp(t)===0},D.floor=function(){return X(new this.constructor(this),this.e+1,3)},D.greaterThan=D.gt=function(t){return this.cmp(t)>0},D.greaterThanOrEqualTo=D.gte=function(t){var r=this.cmp(t);return r==1||r===0},D.hyperbolicCosine=D.cosh=function(){var t,r,n,s,a,c,l,u,d=this,h=d.constructor,m=new h(1);if(!d.isFinite())return new h(d.s?1/0:NaN);if(d.isZero())return m;for(s=h.rounding,h.precision=(n=h.precision)+Math.max(d.e,d.sd())+4,h.rounding=1,32>(a=d.d.length)?r=""+1/os(4,t=Math.ceil(a/3)):(t=16,r="2.3283064365386962890625e-10"),d=xr(h,1,d.times(r),new h(1),1),l=t,u=new h(8);l--;)c=d.times(d),d=m.minus(c.times(u.minus(c.times(u))));return X(d,h.precision=n,h.rounding=s,1)},D.hyperbolicSine=D.sinh=function(){var t,r,n,s,a,c,l,u,d=this,h=d.constructor;if(!d.isFinite()||d.isZero())return new h(d);if(n=h.rounding,h.precision=(r=h.precision)+Math.max(d.e,d.sd())+4,h.rounding=1,3>(s=d.d.length))d=xr(h,2,d,d,1);else for(d=xr(h,2,d=d.times(1/os(5,t=(t=1.4*Math.sqrt(s))>16?16:0|t)),d,1),c=new h(5),l=new h(16),u=new h(20);t--;)a=d.times(d),d=d.times(c.plus(a.times(l.times(a).plus(u))));return h.precision=r,h.rounding=n,X(d,r,n,1)},D.hyperbolicTangent=D.tanh=function(){var t,r,n=this,s=n.constructor;return n.isFinite()?n.isZero()?new s(n):(r=s.rounding,s.precision=(t=s.precision)+7,s.rounding=1,ke(n.sinh(),n.cosh(),s.precision=t,s.rounding=r)):new s(n.s)},D.inverseCosine=D.acos=function(){var t,r=this,n=r.constructor,s=r.abs().cmp(1),a=n.precision,c=n.rounding;return s!==-1?s===0?r.isNeg()?Kt(n,a,c):new n(0):new n(NaN):r.isZero()?Kt(n,a+4,c).times(.5):(n.precision=a+6,n.rounding=1,r=r.asin(),t=Kt(n,a+4,c).times(.5),n.precision=a,n.rounding=c,t.minus(r))},D.inverseHyperbolicCosine=D.acosh=function(){var t,r,n=this,s=n.constructor;return n.lte(1)?new s(n.eq(1)?0:NaN):n.isFinite()?(r=s.rounding,s.precision=(t=s.precision)+Math.max(Math.abs(n.e),n.sd())+4,s.rounding=1,ne=0,n=n.times(n).minus(1).sqrt().plus(n),ne=1,s.precision=t,s.rounding=r,n.ln()):new s(n)},D.inverseHyperbolicSine=D.asinh=function(){var t,r,n=this,s=n.constructor;return!n.isFinite()||n.isZero()?new s(n):(r=s.rounding,s.precision=(t=s.precision)+2*Math.max(Math.abs(n.e),n.sd())+6,s.rounding=1,ne=0,n=n.times(n).plus(1).sqrt().plus(n),ne=1,s.precision=t,s.rounding=r,n.ln())},D.inverseHyperbolicTangent=D.atanh=function(){var t,r,n,s,a=this,c=a.constructor;return a.isFinite()?0>a.e?(t=c.precision,r=c.rounding,s=a.sd(),2*-a.e-1>Math.max(s,t)?X(new c(a),t,r,1):(c.precision=n=s-a.e,a=ke(a.plus(1),new c(1).minus(a),n+t,1),c.precision=t+4,c.rounding=1,a=a.ln(),c.precision=t,c.rounding=r,a.times(.5))):new c(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):new c(NaN)},D.inverseSine=D.asin=function(){var t,r,n,s,a=this,c=a.constructor;return a.isZero()?new c(a):(r=a.abs().cmp(1),n=c.precision,s=c.rounding,r!==-1?r===0?((t=Kt(c,n+4,s).times(.5)).s=a.s,t):new c(NaN):(c.precision=n+6,c.rounding=1,a=a.div(new c(1).minus(a.times(a)).sqrt().plus(1)).atan(),c.precision=n,c.rounding=s,a.times(2)))},D.inverseTangent=D.atan=function(){var t,r,n,s,a,c,l,u,d,h=this,m=h.constructor,p=m.precision,b=m.rounding;if(h.isFinite()){if(h.isZero())return new m(h);if(h.abs().eq(1)&&Ps>=p+4)return(l=Kt(m,p+4,b).times(.25)).s=h.s,l}else{if(!h.s)return new m(NaN);if(Ps>=p+4)return(l=Kt(m,p+4,b).times(.5)).s=h.s,l}for(m.precision=u=p+10,m.rounding=1,t=n=Math.min(28,u/J+2|0);t;--t)h=h.div(h.times(h).plus(1).sqrt().plus(1));for(ne=0,r=Math.ceil(u/J),s=1,d=h.times(h),l=new m(h),a=h;t!==-1;)if(a=a.times(d),c=l.minus(a.div(s+=2)),a=a.times(d),(l=c.plus(a.div(s+=2))).d[r]!==void 0)for(t=r;l.d[t]===c.d[t]&&t--;);return n&&(l=l.times(2<<n-1)),ne=1,X(l,m.precision=p,m.rounding=b,1)},D.isFinite=function(){return!!this.d},D.isInteger=D.isInt=function(){return!!this.d&&nt(this.e/J)>this.d.length-2},D.isNaN=function(){return!this.s},D.isNegative=D.isNeg=function(){return 0>this.s},D.isPositive=D.isPos=function(){return this.s>0},D.isZero=function(){return!!this.d&&this.d[0]===0},D.lessThan=D.lt=function(t){return 0>this.cmp(t)},D.lessThanOrEqualTo=D.lte=function(t){return 1>this.cmp(t)},D.logarithm=D.log=function(t){var r,n,s,a,c,l,u,d,h=this,m=h.constructor,p=m.precision,b=m.rounding;if(t==null)t=new m(10),r=1;else{if(n=(t=new m(t)).d,0>t.s||!n||!n[0]||t.eq(1))return new m(NaN);r=t.eq(10)}if(n=h.d,0>h.s||!n||!n[0]||h.eq(1))return new m(n&&!n[0]?-1/0:h.s!=1?NaN:n?0:1/0);if(r)if(n.length>1)c=1;else{for(a=n[0];a%10==0;)a/=10;c=a!==1}if(ne=0,l=In(h,u=p+5),s=r?Is(m,u+10):In(t,u),ii((d=ke(l,s,u,1)).d,a=p,b))do if(l=In(h,u+=10),s=r?Is(m,u+10):In(t,u),d=ke(l,s,u,1),!c){+rt(d.d).slice(a+1,a+15)+1==1e14&&(d=X(d,p+1,0));break}while(ii(d.d,a+=10,b));return ne=1,X(d,p,b)},D.minus=D.sub=function(t){var r,n,s,a,c,l,u,d,h,m,p,b,w=this,P=w.constructor;if(t=new P(t),!w.d||!t.d)return w.s&&t.s?w.d?t.s=-t.s:t=new P(t.d||w.s!==t.s?w:NaN):t=new P(NaN),t;if(w.s!=t.s)return t.s=-t.s,w.plus(t);if(b=t.d,u=P.precision,d=P.rounding,!(h=w.d)[0]||!b[0]){if(b[0])t.s=-t.s;else{if(!h[0])return new P(d===3?-0:0);t=new P(w)}return ne?X(t,u,d):t}if(n=nt(t.e/J),m=nt(w.e/J),h=h.slice(),c=m-n){for((p=0>c)?(r=h,c=-c,l=b.length):(r=b,n=m,l=h.length),c>(s=Math.max(Math.ceil(u/J),l)+2)&&(c=s,r.length=1),r.reverse(),s=c;s--;)r.push(0);r.reverse()}else{for((p=(l=b.length)>(s=h.length))&&(l=s),s=0;l>s;s++)if(h[s]!=b[s]){p=b[s]>h[s];break}c=0}for(p&&(r=h,h=b,b=r,t.s=-t.s),s=b.length-(l=h.length);s>0;--s)h[l++]=0;for(s=b.length;s>c;){if(h[--s]<b[s]){for(a=s;a&&h[--a]===0;)h[a]=Bt-1;--h[a],h[s]+=Bt}h[s]-=b[s]}for(;h[--l]===0;)h.pop();for(;h[0]===0;h.shift())--n;return h[0]?(t.d=h,t.e=vs(h,n),ne?X(t,u,d):t):new P(d===3?-0:0)},D.modulo=D.mod=function(t){var r,n=this,s=n.constructor;return t=new s(t),!n.d||!t.s||t.d&&!t.d[0]?new s(NaN):!t.d||n.d&&!n.d[0]?X(new s(n),s.precision,s.rounding):(ne=0,s.modulo==9?(r=ke(n,t.abs(),0,3,1)).s*=t.s:r=ke(n,t,0,s.modulo,1),r=r.times(t),ne=1,n.minus(r))},D.naturalExponential=D.exp=function(){return fa(this)},D.naturalLogarithm=D.ln=function(){return In(this)},D.negated=D.neg=function(){var t=new this.constructor(this);return t.s=-t.s,X(t)},D.plus=D.add=function(t){var r,n,s,a,c,l,u,d,h,m,p=this,b=p.constructor;if(t=new b(t),!p.d||!t.d)return p.s&&t.s?p.d||(t=new b(t.d||p.s===t.s?p:NaN)):t=new b(NaN),t;if(p.s!=t.s)return t.s=-t.s,p.minus(t);if(m=t.d,u=b.precision,d=b.rounding,!(h=p.d)[0]||!m[0])return m[0]||(t=new b(p)),ne?X(t,u,d):t;if(c=nt(p.e/J),s=nt(t.e/J),h=h.slice(),a=c-s){for(0>a?(n=h,a=-a,l=m.length):(n=m,s=c,l=h.length),a>(l=(c=Math.ceil(u/J))>l?c+1:l+1)&&(a=l,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(0>(l=h.length)-(a=m.length)&&(a=l,n=m,m=h,h=n),r=0;a;)r=(h[--a]=h[a]+m[a]+r)/Bt|0,h[a]%=Bt;for(r&&(h.unshift(r),++s),l=h.length;h[--l]==0;)h.pop();return t.d=h,t.e=vs(h,s),ne?X(t,u,d):t},D.precision=D.sd=function(t){var r,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(mn+t);return n.d?(r=Wu(n.d),t&&n.e+1>r&&(r=n.e+1)):r=NaN,r},D.round=function(){var t=this,r=t.constructor;return X(new r(t),t.e+1,r.rounding)},D.sine=D.sin=function(){var t,r,n=this,s=n.constructor;return n.isFinite()?n.isZero()?new s(n):(r=s.rounding,s.precision=(t=s.precision)+Math.max(n.e,n.sd())+J,s.rounding=1,n=function(a,c){var l,u,d,h,m,p=c.d.length;if(3>p)return c.isZero()?c:xr(a,2,c,c);for(c=xr(a,2,c=c.times(1/os(5,l=(l=1.4*Math.sqrt(p))>16?16:0|l)),c),d=new a(5),h=new a(16),m=new a(20);l--;)u=c.times(c),c=c.times(d.plus(u.times(h.times(u).minus(m))));return c}(s,zu(s,n)),s.precision=t,s.rounding=r,X(hn>2?n.neg():n,t,r,1)):new s(NaN)},D.squareRoot=D.sqrt=function(){var t,r,n,s,a,c,l=this,u=l.d,d=l.e,h=l.s,m=l.constructor;if(h!==1||!u||!u[0])return new m(!h||0>h&&(!u||u[0])?NaN:u?l:1/0);for(ne=0,(h=Math.sqrt(+l))==0||h==1/0?(((r=rt(u)).length+d)%2==0&&(r+="0"),h=Math.sqrt(r),d=nt((d+1)/2)-(0>d||d%2),s=new m(r=h==1/0?"5e"+d:(r=h.toExponential()).slice(0,r.indexOf("e")+1)+d)):s=new m(""+h),n=(d=m.precision)+3;;)if(s=(c=s).plus(ke(l,c,n+2,1)).times(.5),rt(c.d).slice(0,n)===(r=rt(s.d)).slice(0,n)){if((r=r.slice(n-3,n+1))!="9999"&&(a||r!="4999")){+r&&(+r.slice(1)||r.charAt(0)!="5")||(X(s,d+1,1),t=!s.times(s).eq(l));break}if(!a&&(X(c,d+1,0),c.times(c).eq(l))){s=c;break}n+=4,a=1}return ne=1,X(s,d,m.rounding,t)},D.tangent=D.tan=function(){var t,r,n=this,s=n.constructor;return n.isFinite()?n.isZero()?new s(n):(r=s.rounding,s.precision=(t=s.precision)+10,s.rounding=1,(n=n.sin()).s=1,n=ke(n,new s(1).minus(n.times(n)).sqrt(),t+10,0),s.precision=t,s.rounding=r,X(hn==2||hn==4?n.neg():n,t,r,1)):new s(NaN)},D.times=D.mul=function(t){var r,n,s,a,c,l,u,d,h,m=this,p=m.constructor,b=m.d,w=(t=new p(t)).d;if(t.s*=m.s,!(b&&b[0]&&w&&w[0]))return new p(!t.s||b&&!b[0]&&!w||w&&!w[0]&&!b?NaN:b&&w?0*t.s:t.s/0);for(n=nt(m.e/J)+nt(t.e/J),(h=w.length)>(d=b.length)&&(c=b,b=w,w=c,l=d,d=h,h=l),c=[],s=l=d+h;s--;)c.push(0);for(s=h;--s>=0;){for(r=0,a=d+s;a>s;)u=c[a]+w[s]*b[a-s-1]+r,c[a--]=u%Bt|0,r=u/Bt|0;c[a]=(c[a]+r)%Bt|0}for(;!c[--l];)c.pop();return r?++n:c.shift(),t.d=c,t.e=vs(c,n),ne?X(t,p.precision,p.rounding):t},D.toBinary=function(t,r){return da(this,2,t,r)},D.toDecimalPlaces=D.toDP=function(t,r){var n=this,s=n.constructor;return n=new s(n),t===void 0?n:(yt(t,0,dn),r===void 0?r=s.rounding:yt(r,0,8),X(n,t+n.e+1,r))},D.toExponential=function(t,r){var n,s=this,a=s.constructor;return t===void 0?n=Xt(s,1):(yt(t,0,dn),r===void 0?r=a.rounding:yt(r,0,8),n=Xt(s=X(new a(s),t+1,r),1,t+1)),s.isNeg()&&!s.isZero()?"-"+n:n},D.toFixed=function(t,r){var n,s,a=this,c=a.constructor;return t===void 0?n=Xt(a):(yt(t,0,dn),r===void 0?r=c.rounding:yt(r,0,8),n=Xt(s=X(new c(a),t+a.e+1,r),0,t+s.e+1)),a.isNeg()&&!a.isZero()?"-"+n:n},D.toFraction=function(t){var r,n,s,a,c,l,u,d,h,m,p,b,w=this,P=w.d,S=w.constructor;if(!P)return new S(w);if(h=n=new S(1),s=d=new S(0),c=(r=new S(s)).e=Wu(P)-w.e-1,r.d[0]=Ke(10,0>(l=c%J)?J+l:l),t==null)t=c>0?r:h;else{if(!(u=new S(t)).isInt()||u.lt(h))throw Error(mn+u);t=u.gt(r)?c>0?r:h:u}for(ne=0,u=new S(rt(P)),m=S.precision,S.precision=c=P.length*J*2;p=ke(u,r,0,1,1),(a=n.plus(p.times(s))).cmp(t)!=1;)n=s,s=a,h=d.plus(p.times(a=h)),d=a,r=u.minus(p.times(a=r)),u=a;return a=ke(t.minus(n),s,0,1,1),d=d.plus(a.times(h)),n=n.plus(a.times(s)),d.s=h.s=w.s,b=1>ke(h,s,c,1).minus(w).abs().cmp(ke(d,n,c,1).minus(w).abs())?[h,s]:[d,n],S.precision=m,ne=1,b},D.toHexadecimal=D.toHex=function(t,r){return da(this,16,t,r)},D.toNearest=function(t,r){var n=this,s=n.constructor;if(n=new s(n),t==null){if(!n.d)return n;t=new s(1),r=s.rounding}else{if(t=new s(t),r===void 0?r=s.rounding:yt(r,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(ne=0,n=ke(n,t,0,r,1).times(t),ne=1,X(n)):(t.s=n.s,n=t),n},D.toNumber=function(){return+this},D.toOctal=function(t,r){return da(this,8,t,r)},D.toPower=D.pow=function(t){var r,n,s,a,c,l,u=this,d=u.constructor,h=+(t=new d(t));if(!(u.d&&t.d&&u.d[0]&&t.d[0]))return new d(Ke(+u,h));if((u=new d(u)).eq(1))return u;if(s=d.precision,c=d.rounding,t.eq(1))return X(u,s,c);if((r=nt(t.e/J))>=t.d.length-1&&9007199254740991>=(n=0>h?-h:h))return a=Ff(d,u,n,s),0>t.s?new d(1).div(a):X(a,s,c);if(0>(l=u.s)){if(t.d.length-1>r)return new d(NaN);if(1&t.d[r]||(l=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=l,u}return(r=(n=Ke(+u,h))!=0&&isFinite(n)?new d(n+"").e:nt(h*(Math.log("0."+rt(u.d))/Math.LN10+u.e+1)))>d.maxE+1||d.minE-1>r?new d(r>0?l/0:0):(ne=0,d.rounding=u.s=1,(a=fa(t.times(In(u,s+(n=Math.min(12,(r+"").length)))),s)).d&&ii((a=X(a,s+5,1)).d,s,c)&&+rt((a=X(fa(t.times(In(u,(r=s+10)+n)),r),r+5,1)).d).slice(s+1,s+15)+1==1e14&&(a=X(a,s+1,0)),a.s=l,ne=1,d.rounding=c,X(a,s,c))},D.toPrecision=function(t,r){var n,s=this,a=s.constructor;return t===void 0?n=Xt(s,a.toExpNeg>=s.e||s.e>=a.toExpPos):(yt(t,1,dn),r===void 0?r=a.rounding:yt(r,0,8),n=Xt(s=X(new a(s),t,r),s.e>=t||a.toExpNeg>=s.e,t)),s.isNeg()&&!s.isZero()?"-"+n:n},D.toSignificantDigits=D.toSD=function(t,r){var n=this.constructor;return t===void 0?(t=n.precision,r=n.rounding):(yt(t,1,dn),r===void 0?r=n.rounding:yt(r,0,8)),X(new n(this),t,r)},D.toString=function(){var t=this,r=t.constructor,n=Xt(t,r.toExpNeg>=t.e||t.e>=r.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},D.truncated=D.trunc=function(){return X(new this.constructor(this),this.e+1,1)},D.valueOf=D.toJSON=function(){var t=this,r=t.constructor,n=Xt(t,r.toExpNeg>=t.e||t.e>=r.toExpPos);return t.isNeg()?"-"+n:n},ke=function(){function t(s,a,c){var l,u=0,d=s.length;for(s=s.slice();d--;)s[d]=(l=s[d]*a+u)%c|0,u=l/c|0;return u&&s.unshift(u),s}function r(s,a,c,l){var u,d;if(c!=l)d=c>l?1:-1;else for(u=d=0;c>u;u++)if(s[u]!=a[u]){d=s[u]>a[u]?1:-1;break}return d}function n(s,a,c,l){for(var u=0;c--;)s[c]-=u,s[c]=(u=a[c]>s[c]?1:0)*l+s[c]-a[c];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,c,l,u,d){var h,m,p,b,w,P,S,L,T,C,A,k,N,U,$,V,Z,K,Ae,Le,qe=s.constructor,ge=s.s==a.s?1:-1,z=s.d,q=a.d;if(!(z&&z[0]&&q&&q[0]))return new qe(s.s&&a.s&&(z?!q||z[0]!=q[0]:q)?z&&z[0]==0||!q?0*ge:ge/0:NaN);for(d?(w=1,m=s.e-a.e):(d=Bt,m=nt(s.e/(w=J))-nt(a.e/w)),Ae=q.length,Z=z.length,C=(T=new qe(ge)).d=[],p=0;q[p]==(z[p]||0);p++);if(q[p]>(z[p]||0)&&m--,c==null?(U=c=qe.precision,l=qe.rounding):U=u?c+(s.e-a.e)+1:c,0>U)C.push(1),P=1;else{if(U=U/w+2|0,p=0,Ae==1){for(b=0,q=q[0],U++;(Z>p||b)&&U--;p++)C[p]=($=b*d+(z[p]||0))/q|0,b=$%q|0;P=b||Z>p}else{for((b=d/(q[0]+1)|0)>1&&(q=t(q,b,d),z=t(z,b,d),Ae=q.length,Z=z.length),V=Ae,k=(A=z.slice(0,Ae)).length;Ae>k;)A[k++]=0;(Le=q.slice()).unshift(0),K=q[0],d/2>q[1]||++K;do b=0,0>(h=r(q,A,Ae,k))?(N=A[0],Ae!=k&&(N=N*d+(A[1]||0)),(b=N/K|0)>1?(d>b||(b=d-1),(h=r(S=t(q,b,d),A,L=S.length,k=A.length))==1&&(b--,n(S,L>Ae?Le:q,L,d))):(b==0&&(h=b=1),S=q.slice()),k>(L=S.length)&&S.unshift(0),n(A,S,k,d),h==-1&&1>(h=r(q,A,Ae,k=A.length))&&(b++,n(A,k>Ae?Le:q,k,d)),k=A.length):h===0&&(b++,A=[0]),C[p++]=b,h&&A[0]?A[k++]=z[V]||0:(A=[z[V]],k=1);while((V++<Z||A[0]!==void 0)&&U--);P=A[0]!==void 0}C[0]||C.shift()}if(w==1)T.e=m,Zf=P;else{for(p=1,b=C[0];b>=10;b/=10)p++;T.e=p+m*w-1,X(T,u?c+T.e+1:c,l,P)}return T}}(),D[Symbol.for("nodejs.util.inspect.custom")]=D.toString,D[Symbol.toStringTag]="Decimal",Tt=D.constructor=function t(r){function n(l){var u,d,h,m=this;if(!(m instanceof n))return new n(l);if(m.constructor=n,qu(l))return m.s=l.s,void(ne?!l.d||l.e>n.maxE?(m.e=NaN,m.d=null):n.minE>l.e?(m.e=0,m.d=[0]):(m.e=l.e,m.d=l.d.slice()):(m.e=l.e,m.d=l.d?l.d.slice():l.d));if((h=typeof l)=="number"){if(l===0)return m.s=0>1/l?-1:1,m.e=0,void(m.d=[0]);if(0>l?(l=-l,m.s=-1):m.s=1,l===~~l&&1e7>l){for(u=0,d=l;d>=10;d/=10)u++;return void(ne?u>n.maxE?(m.e=NaN,m.d=null):n.minE>u?(m.e=0,m.d=[0]):(m.e=u,m.d=[l]):(m.e=u,m.d=[l]))}return 0*l!=0?(l||(m.s=NaN),m.e=NaN,void(m.d=null)):Ia(m,""+l)}if(h!=="string")throw Error(mn+l);return(d=l.charCodeAt(0))===45?(l=l.slice(1),m.s=-1):(d===43&&(l=l.slice(1)),m.s=1),Na.test(l)?Ia(m,l):Zv(m,l)}var s,a,c;if(n.prototype=D,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=cb,n.clone=t,n.isDecimal=qu,n.abs=Yv,n.acos=Xv,n.acosh=Jv,n.add=Qv,n.asin=eb,n.asinh=tb,n.atan=nb,n.atanh=rb,n.atan2=ib,n.cbrt=sb,n.ceil=ob,n.clamp=ab,n.cos=lb,n.cosh=ub,n.div=fb,n.exp=db,n.floor=hb,n.hypot=mb,n.ln=gb,n.log=pb,n.log10=vb,n.log2=yb,n.max=bb,n.min=xb,n.mod=wb,n.mul=_b,n.pow=Pb,n.random=kb,n.round=Mb,n.sign=Sb,n.sin=Tb,n.sinh=Cb,n.sqrt=Ib,n.sub=Ab,n.sum=Lb,n.tan=Eb,n.tanh=Nb,n.trunc=Ob,r===void 0&&(r={}),r&&r.defaults!=1)for(c=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],s=0;c.length>s;)r.hasOwnProperty(a=c[s++])||(r[a]=this[a]);return n.config(r),n}(Es),xs=new Tt(xs),ws=new Tt(ws);const mf=Object.freeze(Object.defineProperty({__proto__:null,decimalizeAdd:er,decimalizeDiv:function(t,r){return new Tt(t).div(new Tt(r)).toNumber()},decimalizeMul:function(t,r){return new Tt(t).mul(new Tt(r)).toNumber()},decimalizeSub:function(t,r){return new Tt(t).minus(new Tt(r)).toNumber()},innerTrimerForStyleKey:jb,resolveNonRegularKey2str:Wf,resolveNonRegularKey3str:Bb,searchNextKey:Uf,searchPrevKey:zf},Symbol.toStringTag,{value:"Module"}));class Xn{constructor(r){Du(this,"res"),Du(this,"fail",()=>0),this.res=r}}const t5=new Xn(null),tr=()=>t5;Ft=(t=>(t[void 0]="undefined",t.flash="flush",t.note="note",t.bullet="bullet",t.degreeName="degree",t.style="style",t.blockStyle="blockStyle",t.regionStart="regionStart",t.regionProp="regionProp",t.comma="comma",t.openingCurlyBrace="openingCurlyBrace",t.closingCurlyBrace="closingCurlyBrace",t))(Ft||{});const n5={C:"C","C#":"C#",D:"D","D#":"D#",E:"E",F:"F","F#":"F#",G:"G","G#":"G#",A:"A","A#":"A#",B:"B"};Oa=(t=>(t.normal="",t.harmonic="harmonic",t.melodic="melodic",t))(Oa||{}),ja=(t=>(t.unknown="",t.major="major",t.minor="minor",t))(ja||{});const gf=Object.keys(oi=(t=>(t[t.major=0]="major",t[t.minor=1]="minor",t[t.dorian=2]="dorian",t[t.diminish=3]="diminish",t[t.halfDiminish=4]="halfDiminish",t[t.pentatonic=5]="pentatonic",t[t.harmonicMinor=6]="harmonicMinor",t[t.melodicMinor=7]="melodicMinor",t[t.chromatic=8]="chromatic",t))(oi||{})).filter(t=>isNaN(+t)&&!isNaN(oi[t])),r5={0:{bin:[1,0,1,0,1,1,0,1,0,1,0,1]},1:{bin:[1,0,1,1,0,1,0,1,1,0,1,0]},2:{bin:[1,0,1,1,0,1,0,1,0,1,1,0]},3:{bin:[1,0,1,1,0,1,1,0,1,1,0,1]},4:{bin:[1,1,0,1,1,0,1,1,0,1,1,0]},5:{bin:[1,0,0,1,0,1,0,1,0,0,1,0]},6:{bin:[1,0,1,1,0,1,0,1,1,0,0,1]},7:{bin:[1,0,1,1,0,1,0,1,0,1,0,1]},8:{bin:[1,1,1,1,1,1,1,1,1,1,1,1]}},i5={E:["E","F","F#","G","G#","A","A#","B","C","C#","D","D#"],F:["F","F#","G","G#","A","A#","B","C","C#","D","D#","E"],"F#":["F#","G","G#","A","A#","B","C","C#","D","D#","E","F"],G:["G","G#","A","A#","B","C","C#","D","D#","E","F","F#"],"G#":["G#","A","A#","B","C","C#","D","D#","E","F","F#","G"],A:["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],"A#":["A#","B","C","C#","D","D#","E","F","F#","G","G#","A"],B:["B","C","C#","D","D#","E","F","F#","G","G#","A","A#"],C:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],"C#":["C#","D","D#","E","F","F#","G","G#","A","A#","B","C"],D:["D","D#","E","F","F#","G","G#","A","A#","B","C","C#"],"D#":["D#","E","F","F#","G","G#","A","A#","B","C","C#","D"]};Object.freeze(Object.defineProperty({__proto__:null,calculateTimeForTicks:bs,getSoundLength:function(t,r){return 6e4/t/Jt.PPS*r},getTicksByTime:Fb,reduceUntilNextArrByGCD:Rb,untilNextToTick:As},Symbol.toStringTag,{value:"Module"}));nd=(td=[0,2,4,-1,1,3,5]).map(t=>Math.floor(7*t/12)),Ba=(t,r)=>Array(Math.abs(r)+1).join(t),ks={empty:1,name:"",acc:""},rd=RegExp("^([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})|(AA|A|P|M|m|d|dd)([-+]?\\d+)$"),Fa={},Ra=[0,2,4,5,7,9,11],Da="PMMPPMM",ma=(t,r)=>Array(Math.abs(r)+1).join(t),Wa={empty:1,name:"",pc:"",acc:""},Ua=new Map,id=t=>"CDEFGAB".charAt(t),sd=t=>0>t?ma("b",-t):ma("#",t),od=t=>t[0]==="b"?-t.length:t.length,ad=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/,cd=(t,r)=>(t%r+r)%r,Ms=[0,2,4,5,7,9,11],Pr={empty:1,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},za=t=>(+t).toString(2).padStart(12,"0"),$a=t=>parseInt(t,2),ld=/^[01]{12}$/,ud=t=>typeof t=="number"&&t>=0&&4095>=t,fd=t=>t&&Gf(t.chroma),qa={[Pr.chroma]:Pr},dd=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"],Yu=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],{...Pr},ga=[],Zr={},Yu.forEach(([t,r,n])=>function(s,a,c){const l=function(d){const h=m=>d.indexOf(m)!==-1;return h("5A")?"Augmented":h("3M")?"Major":h("5d")?"Diminished":h("3m")?"Minor":"Unknown"}(s),u={...Hu(s),name:c||"",quality:l,intervals:s,aliases:a};ga.push(u),u.name&&(Zr[u.name]=u),Zr[u.setNum]=u,Zr[u.chroma]=u,u.aliases.forEach(d=>function(h,m){Zr[m]=h}(u,d))}(t.split(" "),n.split(" "),r)),ga.sort((t,r)=>t.setNum-r.setNum),Yr={},[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]].forEach(([t,r,...n])=>function(s,a,c=[]){const l={...Hu(s),name:a,intervals:s,aliases:c};return Yr[l.name]=l,Yr[l.setNum]=l,Yr[l.chroma]=l,l.aliases.forEach(u=>function(d,h){Yr[h]=d}(l,u)),l}(t.split(" "),r,n));const pf={tonalObj:{tonic:"C",scale:Oa.normal,tonal:ja.major,tonalShift:1,modalShift:1,name:"C major",diatonicEvolverValue:{evolvedCodePrefix:["","m","m","","","m","dim"],bin:[1,0,1,0,1,1,0,1,0,1,0,1]},sys:{shiftedKeyArray:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],note7array:["C","D","E","F","G","A","B"]}},styleScaleX:{key:n5.C,scale:oi.major,bin:r5[oi.major].bin}};structuredClone(pf.tonalObj),structuredClone(pf.styleScaleX);const s5=409.55;Zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hd={},ai={},ut.prototype.eof=function(){return this.pos>=this.bufferLen},ut.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t},ut.prototype.readInt8=function(){var t=this.readUInt8();return 128&t?t-256:t},ut.prototype.readUInt16=function(){return(this.readUInt8()<<8)+this.readUInt8()},ut.prototype.readInt16=function(){var t=this.readUInt16();return 32768&t?t-65536:t},ut.prototype.readUInt24=function(){return(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},ut.prototype.readInt24=function(){var t=this.readUInt24();return 8388608&t?t-16777216:t},ut.prototype.readUInt32=function(){return(this.readUInt8()<<24)+(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},ut.prototype.readBytes=function(t){var r=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,r},ut.prototype.readString=function(t){var r=this.readBytes(t);return String.fromCharCode.apply(null,r)},ut.prototype.readVarInt=function(){for(var t,r=0;!this.eof();){if(!(128&(t=this.readUInt8())))return r+t;r+=127&t,r<<=7}return r},ut.prototype.readChunk=function(){var t=this.readString(4),r=this.readUInt32();return{id:t,length:r,data:this.readBytes(r)}},Xu=function(t){var r,n,s,a,c,l=new ut(t),u=l.readChunk();if(u.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+u.id+"'";for(r=function(d){var h=new ut(d),m={format:h.readUInt16(),numTracks:h.readUInt16()},p=h.readUInt16();return 32768&p?(m.framesPerSecond=256-(p>>8),m.ticksPerFrame=255&p):m.ticksPerBeat=p,m}(u.data),n=[],s=0;!l.eof()&&r.numTracks>s;s++){if((a=l.readChunk()).id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+a.id+"'";c=Kb(a.data),n.push(c)}return{header:r,tracks:n}},ft.prototype.writeInt8=ft.prototype.writeUInt8=function(t){this.buffer.push(255&t)},ft.prototype.writeInt16=ft.prototype.writeUInt16=function(t){var r=255&t;this.writeUInt8(t>>8&255),this.writeUInt8(r)},ft.prototype.writeInt24=ft.prototype.writeUInt24=function(t){var r=t>>8&255,n=255&t;this.writeUInt8(t>>16&255),this.writeUInt8(r),this.writeUInt8(n)},ft.prototype.writeInt32=ft.prototype.writeUInt32=function(t){var r=t>>16&255,n=t>>8&255,s=255&t;this.writeUInt8(t>>24&255),this.writeUInt8(r),this.writeUInt8(n),this.writeUInt8(s)},ft.prototype.writeBytes=function(t){this.buffer=this.buffer.concat([].slice.call(t,0))},ft.prototype.writeString=function(t){var r,n=t.length,s=[];for(r=0;n>r;r++)s.push(t.codePointAt(r));this.writeBytes(s)},ft.prototype.writeVarInt=function(t){var r,n;if(0>t)throw"Cannot write negative variable-length integer";if(t>127){for((n=[]).push(127&(r=t)),r>>=7;r;)n.push(127&r|128),r>>=7;this.writeBytes(n.reverse())}else this.writeUInt8(t)},ft.prototype.writeChunk=function(t,r){this.writeString(t),this.writeUInt32(r.length),this.writeBytes(r)},Ju=function(t,r){var n,s,a,c,l;if(typeof t!="object")throw"Invalid MIDI data";for(r=r||{},n=t.header||{},c=(s=t.tracks||[]).length,function(u,d,h){var m,p=d.format==null?1:d.format,b=128;d.timeDivision?b=d.timeDivision:d.ticksPerFrame&&d.framesPerSecond?b=-(255&d.framesPerSecond)<<8|255&d.ticksPerFrame:d.ticksPerBeat&&(b=32767&d.ticksPerBeat),(m=new ft).writeUInt16(p),m.writeUInt16(h),m.writeUInt16(b),u.writeChunk("MThd",m.buffer)}(l=new ft,n,c),a=0;c>a;a++)Vb(l,s[a],r);return l.buffer},ai.parseMidi=Xu,ai.writeMidi=Ju,ci={},Object.defineProperty(Kn={},"i",{value:1}),Kn.insert=Kn.search=void 0,Kn.search=Vu,Kn.insert=function(t,r,n){if(n===void 0&&(n="ticks"),t.length){var s=Vu(t,r[n],n);t.splice(s+1,0,r)}else t.push(r)},function(t){var r,n,s;Object.defineProperty(t,"i",{value:1}),t.Header=t.keySignatureKeys=void 0,r=Kn,n=new WeakMap,t.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"],s=function(){function a(c){var l,u=this;this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",n.set(this,480),c&&(n.set(this,c.header.ticksPerBeat),c.tracks.forEach(function(d){d.forEach(function(h){h.meta&&(h.type==="timeSignature"?u.timeSignatures.push({ticks:h.absoluteTime,timeSignature:[h.numerator,h.denominator]}):h.type==="setTempo"?u.tempos.push({bpm:6e7/h.microsecondsPerBeat,ticks:h.absoluteTime}):h.type==="keySignature"&&u.keySignatures.push({key:t.keySignatureKeys[h.key+7],scale:h.scale===0?"major":"minor",ticks:h.absoluteTime}))})}),l=0,c.tracks[0].forEach(function(d){l+=d.deltaTime,d.meta&&(d.type==="trackName"?u.name=d.text:d.type!=="text"&&d.type!=="cuePoint"&&d.type!=="marker"&&d.type!=="lyrics"||u.meta.push({text:d.text,ticks:l,type:d.type}))}),this.update())}return a.prototype.update=function(){var c=this,l=0,u=0;this.tempos.sort(function(d,h){return d.ticks-h.ticks}),this.tempos.forEach(function(d,h){var m=d.ticks/c.ppq-u;d.time=60/(h>0?c.tempos[h-1].bpm:c.tempos[0].bpm)*m+l,l=d.time,u+=m}),this.timeSignatures.sort(function(d,h){return d.ticks-h.ticks}),this.timeSignatures.forEach(function(d,h){var m=h>0?c.timeSignatures[h-1]:c.timeSignatures[0],p=(d.ticks-m.ticks)/c.ppq/m.timeSignature[0]/(m.timeSignature[1]/4);m.measures=m.measures||0,d.measures=p+m.measures})},a.prototype.ticksToSeconds=function(c){var l,u=(0,r.search)(this.tempos,c);return u!==-1?(l=this.tempos[u]).time+60/l.bpm*((c-l.ticks)/this.ppq):c/this.ppq*.5},a.prototype.ticksToMeasures=function(c){var l,u=(0,r.search)(this.timeSignatures,c);return u!==-1?(l=this.timeSignatures[u]).measures+(c-l.ticks)/this.ppq/(l.timeSignature[0]/l.timeSignature[1])/4:c/this.ppq/4},Object.defineProperty(a.prototype,"ppq",{get:function(){return n.get(this)},enumerable:0,configurable:1}),a.prototype.secondsToTicks=function(c){var l,u=(0,r.search)(this.tempos,c,"time");return Math.round(u!==-1?(l=this.tempos[u]).ticks+(c-l.time)/(60/l.bpm)*this.ppq:c/.5*this.ppq)},a.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(c){return{bpm:c.bpm,ticks:c.ticks}}),timeSignatures:this.timeSignatures}},a.prototype.fromJSON=function(c){this.name=c.name,this.tempos=c.tempos.map(function(l){return Object.assign({},l)}),this.timeSignatures=c.timeSignatures.map(function(l){return Object.assign({},l)}),this.keySignatures=c.keySignatures.map(function(l){return Object.assign({},l)}),this.meta=c.meta.map(function(l){return Object.assign({},l)}),n.set(this,c.ppq),this.update()},a.prototype.setTempo=function(c){this.tempos=[{bpm:c,ticks:0}],this.update()},a}(),t.Header=s}(ci),kr={},function(t){var r,n,s;Object.defineProperty(t,"i",{value:1}),t.ControlChange=t.controlChangeIds=t.controlChangeNames=void 0,t.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},t.controlChangeIds=Object.keys(t.controlChangeNames).reduce(function(a,c){return a[t.controlChangeNames[c]]=c,a},{}),r=new WeakMap,n=new WeakMap,s=function(){function a(c,l){r.set(this,l),n.set(this,c.controllerType),this.ticks=c.absoluteTime,this.value=c.value}return Object.defineProperty(a.prototype,"number",{get:function(){return n.get(this)},enumerable:0,configurable:1}),Object.defineProperty(a.prototype,"name",{get:function(){return t.controlChangeNames[this.number]?t.controlChangeNames[this.number]:null},enumerable:0,configurable:1}),Object.defineProperty(a.prototype,"time",{get:function(){return r.get(this).ticksToSeconds(this.ticks)},set:function(c){var l=r.get(this);this.ticks=l.secondsToTicks(c)},enumerable:0,configurable:1}),a.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},a}(),t.ControlChange=s}(pa={}),Object.defineProperty(as={},"i",{value:1}),as.createControlChanges=void 0,Xr=pa,as.createControlChanges=function(){return new Proxy({},{get:function(t,r){return t[r]?t[r]:Xr.controlChangeIds.hasOwnProperty(r)?t[Xr.controlChangeIds[r]]:void 0},set:function(t,r,n){return Xr.controlChangeIds.hasOwnProperty(r)?t[Xr.controlChangeIds[r]]=n:t[r]=n,1}})},Object.defineProperty(cs={},"i",{value:1}),cs.PitchBend=void 0,ls=new WeakMap,Qu=function(){function t(r,n){ls.set(this,n),this.ticks=r.absoluteTime,this.value=r.value}return Object.defineProperty(t.prototype,"time",{get:function(){return ls.get(this).ticksToSeconds(this.ticks)},set:function(r){var n=ls.get(this);this.ticks=n.secondsToTicks(r)},enumerable:0,configurable:1}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}(),cs.PitchBend=Qu,Jr={},Object.defineProperty(Mn={},"i",{value:1}),Mn.DrumKitByPatchID=Mn.InstrumentFamilyByID=Mn.instrumentByPatchID=void 0,Mn.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],Mn.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],Mn.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"},Object.defineProperty(Jr,"i",{value:1}),Jr.Instrument=void 0,Qr=Mn,ya=new WeakMap,ef=function(){function t(r,n){if(this.number=0,ya.set(this,n),this.number=0,r){var s=r.find(function(a){return a.type==="programChange"});s&&(this.number=s.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?Qr.DrumKitByPatchID[this.number]:Qr.instrumentByPatchID[this.number]},set:function(r){var n=Qr.instrumentByPatchID.indexOf(r);n!==-1&&(this.number=n)},enumerable:0,configurable:1}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":Qr.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:0,configurable:1}),Object.defineProperty(t.prototype,"percussion",{get:function(){return ya.get(this).channel===9},enumerable:0,configurable:1}),t.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},t.prototype.fromJSON=function(r){this.number=r.number},t}(),Jr.Instrument=ef,Object.defineProperty(us={},"i",{value:1}),us.Note=void 0,df=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,hf={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},tf=function(t){var r=df.exec(t),n=r[2];return hf[r[1].toLowerCase()]+12*(parseInt(n,10)+1)},Vn=new WeakMap,nf=function(){function t(r,n,s){Vn.set(this,s),this.midi=r.midi,this.velocity=r.velocity,this.noteOffVelocity=n.velocity,this.ticks=r.ticks,this.durationTicks=n.ticks-r.ticks}return Object.defineProperty(t.prototype,"name",{get:function(){return n=Math.floor((r=this.midi)/12)-1,Zu(r)+""+n;var r,n},set:function(r){this.midi=tf(r)},enumerable:0,configurable:1}),Object.defineProperty(t.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(r){this.midi+=12*(r-this.octave)},enumerable:0,configurable:1}),Object.defineProperty(t.prototype,"pitch",{get:function(){return Zu(this.midi)},set:function(r){this.midi=12*(this.octave+1)+function(n){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(n)}(r)},enumerable:0,configurable:1}),Object.defineProperty(t.prototype,"duration",{get:function(){var r=Vn.get(this);return r.ticksToSeconds(this.ticks+this.durationTicks)-r.ticksToSeconds(this.ticks)},set:function(r){var n=Vn.get(this).secondsToTicks(this.time+r);this.durationTicks=n-this.ticks},enumerable:0,configurable:1}),Object.defineProperty(t.prototype,"time",{get:function(){return Vn.get(this).ticksToSeconds(this.ticks)},set:function(r){var n=Vn.get(this);this.ticks=n.secondsToTicks(r)},enumerable:0,configurable:1}),Object.defineProperty(t.prototype,"bars",{get:function(){return Vn.get(this).ticksToMeasures(this.ticks)},enumerable:0,configurable:1}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}(),us.Note=nf,Object.defineProperty(kr,"i",{value:1}),kr.Track=void 0,fs=Kn,rf=pa,sf=as,of=cs,va=Jr,af=us,ei=new WeakMap,cf=function(){function t(r,n){var s,a,c,l,u,d,h=this;if(this.name="",this.notes=[],this.controlChanges=(0,sf.createControlChanges)(),this.pitchBends=[],ei.set(this,n),r&&(s=r.find(function(m){return m.type==="trackName"}),this.name=s?s.text:""),this.instrument=new va.Instrument(r,this),this.channel=0,r){for(a=r.filter(function(m){return m.type==="noteOn"}),c=r.filter(function(m){return m.type==="noteOff"}),l=function(){var m,p,b=a.shift();u.channel=b.channel,m=c.findIndex(function(w){return w.noteNumber===b.noteNumber&&w.absoluteTime>=b.absoluteTime}),m!==-1&&(p=c.splice(m,1)[0],u.addNote({durationTicks:p.absoluteTime-b.absoluteTime,midi:b.noteNumber,noteOffVelocity:p.velocity/127,ticks:b.absoluteTime,velocity:b.velocity/127}))},u=this;a.length;)l();r.filter(function(m){return m.type==="controller"}).forEach(function(m){h.addCC({number:m.controllerType,ticks:m.absoluteTime,value:m.value/127})}),r.filter(function(m){return m.type==="pitchBend"}).forEach(function(m){h.addPitchBend({ticks:m.absoluteTime,value:m.value/8192})}),d=r.find(function(m){return m.type==="endOfTrack"}),this.endOfTrackTicks=d!==void 0?d.absoluteTime:void 0}}return t.prototype.addNote=function(r){var n=ei.get(this),s=new af.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},n);return Object.assign(s,r),(0,fs.insert)(this.notes,s,"ticks"),this},t.prototype.addCC=function(r){var n=ei.get(this),s=new rf.ControlChange({controllerType:r.number},n);return delete r.number,Object.assign(s,r),Array.isArray(this.controlChanges[s.number])||(this.controlChanges[s.number]=[]),(0,fs.insert)(this.controlChanges[s.number],s,"ticks"),this},t.prototype.addPitchBend=function(r){var n=ei.get(this),s=new of.PitchBend({},n);return Object.assign(s,r),(0,fs.insert)(this.pitchBends,s,"ticks"),this},Object.defineProperty(t.prototype,"duration",{get:function(){var r,n,s;if(!this.notes.length)return 0;for(r=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,n=0;this.notes.length-1>n;n++)(s=this.notes[n].time+this.notes[n].duration)>r&&(r=s);return r},enumerable:0,configurable:1}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){var r,n,s;if(!this.notes.length)return 0;for(r=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,n=0;this.notes.length-1>n;n++)(s=this.notes[n].ticks+this.notes[n].durationTicks)>r&&(r=s);return r},enumerable:0,configurable:1}),t.prototype.fromJSON=function(r){var n,s=this;for(n in this.name=r.name,this.channel=r.channel,this.instrument=new va.Instrument(void 0,this),this.instrument.fromJSON(r.instrument),r.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=r.endOfTrackTicks),r.controlChanges)r.controlChanges[n]&&r.controlChanges[n].forEach(function(a){s.addCC({number:a.number,ticks:a.ticks,value:a.value})});r.notes.forEach(function(a){s.addNote({durationTicks:a.durationTicks,midi:a.midi,ticks:a.ticks,velocity:a.velocity})})},t.prototype.toJSON=function(){var r,n,s={};for(r=0;127>r;r++)this.controlChanges.hasOwnProperty(r)&&(s[r]=this.controlChanges[r].map(function(a){return a.toJSON()}));return n={channel:this.channel,controlChanges:s,pitchBends:this.pitchBends.map(function(a){return a.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(a){return a.toJSON()})},this.endOfTrackTicks!==void 0&&(n.endOfTrackTicks=this.endOfTrackTicks),n},t}(),kr.Track=cf,ni={};const o5=Gb(Object.freeze(Object.defineProperty({__proto__:null,flatten:function(t){var r=[];return Vf(t,r),r}},Symbol.toStringTag,{value:"Module"})));fn=Zn&&Zn.o||function(t,r,n){if(n||arguments.length===2)for(var s,a=0,c=r.length;c>a;a++)!s&&a in r||(s||(s=[].slice.call(r,0,a)),s[a]=r[a]);return t.concat(s||[].slice.call(r))},Object.defineProperty(ni,"i",{value:1}),ni.encode=void 0,lf=ai,uf=ci,ff=o5,ni.encode=function(t){var r={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:fn([fn(fn(fn(fn([{absoluteTime:0,deltaTime:0,meta:1,text:t.header.name,type:"trackName"}],t.header.keySignatures.map(function(n){return function(s){var a=uf.keySignatureKeys.indexOf(s.key);return{absoluteTime:s.ticks,deltaTime:0,key:a+7,meta:1,scale:s.scale==="major"?0:1,type:"keySignature"}}(n)}),1),t.header.meta.map(function(n){return{absoluteTime:(s=n).ticks,deltaTime:0,meta:1,text:s.text,type:s.type};var s}),1),t.header.tempos.map(function(n){return function(s){return{absoluteTime:s.ticks,deltaTime:0,meta:1,microsecondsPerBeat:Math.floor(6e7/s.bpm),type:"setTempo"}}(n)}),1),t.header.timeSignatures.map(function(n){return function(s){return{absoluteTime:s.ticks,deltaTime:0,denominator:s.timeSignature[1],meta:1,metronome:24,numerator:s.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}(n)}),1)],t.tracks.map(function(n){return fn(fn(fn([(s=n.name,{absoluteTime:0,deltaTime:0,meta:1,text:s,type:"trackName"}),Xb(n)],function(a){return(0,ff.flatten)(a.notes.map(function(c){return function(l,u){return[{absoluteTime:l.ticks,channel:u,deltaTime:0,noteNumber:l.midi,type:"noteOn",velocity:Math.floor(127*l.velocity)},{absoluteTime:l.ticks+l.durationTicks,channel:u,deltaTime:0,noteNumber:l.midi,type:"noteOff",velocity:Math.floor(127*l.noteOffVelocity)}]}(c,a.channel)}))}(n),1),function(a){var c,l=[];for(c=0;127>c;c++)a.controlChanges.hasOwnProperty(c)&&a.controlChanges[c].forEach(function(u){l.push(Yb(u,a.channel))});return l}(n),1),function(a){var c=[];return a.pitchBends.forEach(function(l){c.push(function(u,d){return{absoluteTime:u.ticks,channel:d,deltaTime:0,type:"pitchBend",value:u.value}}(l,a.channel))}),c}(n),1);var s}),1)};return r.tracks=r.tracks.map(function(n){n=n.sort(function(a,c){return a.absoluteTime-c.absoluteTime});var s=0;return n.forEach(function(a){a.deltaTime=a.absoluteTime-s,s=a.absoluteTime,delete a.absoluteTime}),n.push({deltaTime:0,meta:1,type:"endOfTrack"}),n}),new Uint8Array((0,lf.writeMidi)(r))},function(t){var r,n,s,a,c,l,u,d=Zn&&Zn.l||function(m,p,b,w){return new(b||(b=Promise))(function(P,S){function L(A){try{C(w.next(A))}catch(k){S(k)}}function T(A){try{C(w.throw(A))}catch(k){S(k)}}function C(A){var k;A.done?P(A.value):(k=A.value,k instanceof b?k:new b(function(N){N(k)})).then(L,T)}C((w=w.apply(m,p||[])).next())})},h=Zn&&Zn.h||function(m,p){function b(C){return function(A){return function(k){if(w)throw new TypeError("Generator is already executing.");for(;T;)try{if(w=1,P&&(S=2&k[0]?P.return:k[0]?P.throw||((S=P.return)&&S.call(P),0):P.next)&&!(S=S.call(P,k[1])).done)return S;switch(P=0,S&&(k=[2&k[0],S.value]),k[0]){case 0:case 1:S=k;break;case 4:return T.label++,{value:k[1],done:0};case 5:T.label++,P=k[1],k=[0];continue;case 7:k=T.ops.pop(),T.trys.pop();continue;default:if(!((S=(S=T.trys).length>0&&S[S.length-1])||k[0]!==6&&k[0]!==2)){T=0;continue}if(k[0]===3&&(!S||k[1]>S[0]&&S[3]>k[1])){T.label=k[1];break}if(k[0]===6&&S[1]>T.label){T.label=S[1],S=k;break}if(S&&S[2]>T.label){T.label=S[2],T.ops.push(k);break}S[2]&&T.ops.pop(),T.trys.pop();continue}k=p.call(m,T)}catch(N){k=[6,N],P=0}finally{w=S=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:1}}([C,A])}}var w,P,S,L,T={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return L={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L};Object.defineProperty(t,"i",{value:1}),t.Header=t.Track=t.Midi=void 0,r=ai,n=ci,s=kr,a=ni,c=function(){function m(p){var b,w=this,P=null;p&&(b=p instanceof ArrayBuffer?new Uint8Array(p):p,(P=(0,r.parseMidi)(b)).tracks.forEach(function(S){var L=0;S.forEach(function(T){T.absoluteTime=L+=T.deltaTime})}),P.tracks=function(S){var L,T,C,A,k,N,U,$,V,Z,K=[];for(L=0;S.length>L;L++)for(T=K.length,C=new Map,A=Array(16).fill(0),k=0,N=S[L];N.length>k;k++)$=T,(V=(U=N[k]).channel)!==void 0&&(U.type==="programChange"&&(A[V]=U.programNumber),Z="".concat(A[V]," ").concat(V),C.has(Z)?$=C.get(Z):C.set(Z,$=T+C.size)),K[$]||K.push([]),K[$].push(U);return K}(P.tracks)),this.header=new n.Header(P),this.tracks=[],p&&(this.tracks=P.tracks.map(function(S){return new s.Track(S,w.header)}),P.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return m.fromUrl=function(p){return d(this,void 0,void 0,function(){var b;return h(this,function(w){switch(w.label){case 0:return[4,fetch(p)];case 1:return(b=w.sent()).ok?[4,b.arrayBuffer()]:[3,3];case 2:return[2,new m(w.sent())];case 3:throw Error("Could not load '".concat(p,"'"))}})})},Object.defineProperty(m.prototype,"name",{get:function(){return this.header.name},set:function(p){this.header.name=p},enumerable:0,configurable:1}),Object.defineProperty(m.prototype,"duration",{get:function(){var p=this.tracks.map(function(b){return b.duration});return Math.max.apply(Math,p)},enumerable:0,configurable:1}),Object.defineProperty(m.prototype,"durationTicks",{get:function(){var p=this.tracks.map(function(b){return b.durationTicks});return Math.max.apply(Math,p)},enumerable:0,configurable:1}),m.prototype.addTrack=function(){var p=new s.Track(void 0,this.header);return this.tracks.push(p),p},m.prototype.toArray=function(){return(0,a.encode)(this)},m.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(p){return p.toJSON()})}},m.prototype.fromJSON=function(p){var b=this;this.header=new n.Header,this.header.fromJSON(p.header),this.tracks=p.tracks.map(function(w){var P=new s.Track(void 0,b.header);return P.fromJSON(w),P})},m.prototype.clone=function(){var p=new m;return p.fromJSON(this.toJSON()),p},m}(),t.Midi=c,l=kr,Object.defineProperty(t,"Track",{enumerable:1,get:function(){return l.Track}}),u=ci,Object.defineProperty(t,"Header",{enumerable:1,get:function(){return u.Header}})}(hd);class vt{static getScaleFromBraceStyles(r,n){const s=n.scaleX||r.settings.style.scale;return{isValid:!0,name:gf[s.scale],key:s.key,bin:s.bin}}static getScaleFromTabObj(r,n,s,a){const c=(s==null?void 0:s.styles.scaleX)||(a==null?void 0:a.scaleX)||r.settings.style.scale;n.scale={isValid:!0,name:gf[c.scale],key:c.key,bin:c.bin}}static getStyleFromStyleObjectBank(r,n){if(n.type===Ft.style||n.type===Ft.blockStyle){const s=mf.innerTrimerForStyleKey(n.sym);let a="";/^step/.test(n.sym)&&(a=":"+n.line+":"+n.linePos);const l=`${r.mixesList[n.dualId].regionList[n.regionId].tuning.toString()}_${s}`+a,u=structuredClone(r.styleObjectBank[l]);return u||console.error("==>> [A]styleObjectBankstyle:"+l,n.sym),u}return{}}static searchLocationInfo(r,n){const s=r.locationInfoList.length;for(let a=s-1;a>=0;a--){const c=r.locationInfoList[a];if(!(n.line<c.line||c.endLine<n.line)){if(c.line===c.endLine){if(c.linePos<=n.column&&n.column<=c.endPos)return a}else if(c.line===n.line&&c.linePos<=n.column||c.endLine===n.line&&n.column<=c.endPos||c.line<n.line&&n.line<c.endLine)return a}}return null}static getBraceStyles(r,n,s){const a=l=>{let u={};const d=[l.id,...l.upperBlock];for(let h=d.length-1;h>=0;h--)if(r.braceLocationInfoList[d[h]].styles.length){const m=r.braceLocationInfoList[d[h]];for(let p=m.styles.length-1;p>=0;p--){const b=this.getStyleObjectForBraceFromLoInfo(r,p,r.braceLocationInfoList[d[h]]);b.mapped?u.mapped?u.mapped.unshift(b.mapped[0]):u={...u,...b}:u={...u,...b}}}return u},c=r.braceLocationInfoList.length;for(let l=c-1;l>=0;l--){const u=r.braceLocationInfoList[l];if(!(s.line<u.line||u.endLine<s.line)){if(u.line===u.endLine){if(u.linePos<s.column&&s.column<u.endPos){const d=a(u);return n.braceStyles={styles:d},d}}else if(u.line===s.line&&u.linePos<s.column||u.endLine===s.line&&s.column<u.endPos||u.line<s.line&&s.line<u.endLine){const d=a(u);return n.braceStyles={styles:d},d}}}return null}static getStyleObjectForBraceFromLoInfo(r,n,s){const a=mf.innerTrimerForStyleKey(s.styles[n])+(/^step/.test(s.styles[n])?`:${s.linesOfStyle[n]}:${s.linePosOfStyle[n]}`:""),l=`${r.mixesList[s.dualId].regionList[s.regionId].tuning.toString()}_${a}`,u=structuredClone(r.styleObjectBank[l]);return u||console.error("==>> [B]styleObjectBank style: ["+l+"]"),u}static mergeStyles(r,n){const s=r;return Object.keys(n).forEach(a=>{const c={key:n[a]};return/^map/.test(a)&&s.mapped?(s.mapped.unshift(c.mapped[0]),{...s}):{...s,...c}}),s}}function gd(t,r){const n=R.useRef(t(le.getState())),s=R.useRef(r),a=c=>{n.current=c};return R.useEffect(()=>{s.current=r},[r]),R.useEffect(()=>{const c=()=>{const u=t(le.getState());n.current!==u&&(s.current(u),n.current=u)},l=le.subscribe(c);return()=>{l()}},[]),{setCurrentValue:a}}var Ns={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ns.exports;(function(t,r){(function(){var n,s="4.17.21",a=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",h=500,m="__lodash_placeholder__",p=1,b=2,w=4,P=1,S=2,L=1,T=2,C=4,A=8,k=16,N=32,U=64,$=128,V=256,Z=512,K=30,Ae="...",Le=800,qe=16,ge=1,z=2,q=3,Be=1/0,Xe=9007199254740991,Bn=17976931348623157e292,ir=NaN,oe=4294967295,Ee=oe-1,ot=oe>>>1,Fn=[["ary",$],["bind",L],["bindKey",T],["curry",A],["curryRight",k],["flip",Z],["partial",N],["partialRight",U],["rearg",V]],bt="[object Arguments]",di="[object Array]",wd="[object AsyncFunction]",Mr="[object Boolean]",Sr="[object Date]",_d="[object DOMException]",hi="[object Error]",mi="[object Function]",Qa="[object GeneratorFunction]",Dt="[object Map]",Tr="[object Number]",Pd="[object Null]",en="[object Object]",ec="[object Promise]",kd="[object Proxy]",Cr="[object RegExp]",Wt="[object Set]",Ir="[object String]",gi="[object Symbol]",Md="[object Undefined]",Ar="[object WeakMap]",Sd="[object WeakSet]",Lr="[object ArrayBuffer]",sr="[object DataView]",Rs="[object Float32Array]",Ds="[object Float64Array]",Ws="[object Int8Array]",Us="[object Int16Array]",zs="[object Int32Array]",$s="[object Uint8Array]",qs="[object Uint8ClampedArray]",Hs="[object Uint16Array]",Gs="[object Uint32Array]",Td=/\b__p \+= '';/g,Cd=/\b(__p \+=) '' \+/g,Id=/(__e\(.*?\)|\b__t\)) \+\n'';/g,tc=/&(?:amp|lt|gt|quot|#39);/g,nc=/[&<>"']/g,Ad=RegExp(tc.source),Ld=RegExp(nc.source),Ed=/<%-([\s\S]+?)%>/g,Nd=/<%([\s\S]+?)%>/g,rc=/<%=([\s\S]+?)%>/g,Od=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jd=/^\w*$/,Bd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ks=/[\\^$.*+?()[\]{}|]/g,Fd=RegExp(Ks.source),Vs=/^\s+/,Rd=/\s/,Dd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Wd=/\{\n\/\* \[wrapped with (.+)\] \*/,Ud=/,? & /,zd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$d=/[()=,{}\[\]\/\s]/,qd=/\\(\\)?/g,Hd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ic=/\w*$/,Gd=/^[-+]0x[0-9a-f]+$/i,Kd=/^0b[01]+$/i,Vd=/^\[object .+?Constructor\]$/,Zd=/^0o[0-7]+$/i,Yd=/^(?:0|[1-9]\d*)$/,Xd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pi=/($^)/,Jd=/['\n\r\u2028\u2029\\]/g,yi="\\ud800-\\udfff",Qd="\\u0300-\\u036f",e1="\\ufe20-\\ufe2f",t1="\\u20d0-\\u20ff",sc=Qd+e1+t1,oc="\\u2700-\\u27bf",ac="a-z\\xdf-\\xf6\\xf8-\\xff",n1="\\xac\\xb1\\xd7\\xf7",r1="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",i1="\\u2000-\\u206f",s1=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",cc="A-Z\\xc0-\\xd6\\xd8-\\xde",lc="\\ufe0e\\ufe0f",uc=n1+r1+i1+s1,Zs="[']",o1="["+yi+"]",fc="["+uc+"]",vi="["+sc+"]",dc="\\d+",a1="["+oc+"]",hc="["+ac+"]",mc="[^"+yi+uc+dc+oc+ac+cc+"]",Ys="\\ud83c[\\udffb-\\udfff]",c1="(?:"+vi+"|"+Ys+")",gc="[^"+yi+"]",Xs="(?:\\ud83c[\\udde6-\\uddff]){2}",Js="[\\ud800-\\udbff][\\udc00-\\udfff]",or="["+cc+"]",pc="\\u200d",yc="(?:"+hc+"|"+mc+")",l1="(?:"+or+"|"+mc+")",vc="(?:"+Zs+"(?:d|ll|m|re|s|t|ve))?",bc="(?:"+Zs+"(?:D|LL|M|RE|S|T|VE))?",xc=c1+"?",wc="["+lc+"]?",u1="(?:"+pc+"(?:"+[gc,Xs,Js].join("|")+")"+wc+xc+")*",f1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",d1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",_c=wc+xc+u1,h1="(?:"+[a1,Xs,Js].join("|")+")"+_c,m1="(?:"+[gc+vi+"?",vi,Xs,Js,o1].join("|")+")",g1=RegExp(Zs,"g"),p1=RegExp(vi,"g"),Qs=RegExp(Ys+"(?="+Ys+")|"+m1+_c,"g"),y1=RegExp([or+"?"+hc+"+"+vc+"(?="+[fc,or,"$"].join("|")+")",l1+"+"+bc+"(?="+[fc,or+yc,"$"].join("|")+")",or+"?"+yc+"+"+vc,or+"+"+bc,d1,f1,dc,h1].join("|"),"g"),v1=RegExp("["+pc+yi+sc+lc+"]"),b1=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,x1=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],w1=-1,Ne={};Ne[Rs]=Ne[Ds]=Ne[Ws]=Ne[Us]=Ne[zs]=Ne[$s]=Ne[qs]=Ne[Hs]=Ne[Gs]=!0,Ne[bt]=Ne[di]=Ne[Lr]=Ne[Mr]=Ne[sr]=Ne[Sr]=Ne[hi]=Ne[mi]=Ne[Dt]=Ne[Tr]=Ne[en]=Ne[Cr]=Ne[Wt]=Ne[Ir]=Ne[Ar]=!1;var Ce={};Ce[bt]=Ce[di]=Ce[Lr]=Ce[sr]=Ce[Mr]=Ce[Sr]=Ce[Rs]=Ce[Ds]=Ce[Ws]=Ce[Us]=Ce[zs]=Ce[Dt]=Ce[Tr]=Ce[en]=Ce[Cr]=Ce[Wt]=Ce[Ir]=Ce[gi]=Ce[$s]=Ce[qs]=Ce[Hs]=Ce[Gs]=!0,Ce[hi]=Ce[mi]=Ce[Ar]=!1;var _1={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},P1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},k1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},M1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},S1=parseFloat,T1=parseInt,Pc=typeof Kr=="object"&&Kr&&Kr.Object===Object&&Kr,C1=typeof self=="object"&&self&&self.Object===Object&&self,Qe=Pc||C1||Function("return this")(),eo=r&&!r.nodeType&&r,Rn=eo&&!0&&t&&!t.nodeType&&t,kc=Rn&&Rn.exports===eo,to=kc&&Pc.process,Ct=function(){try{var I=Rn&&Rn.require&&Rn.require("util").types;return I||to&&to.binding&&to.binding("util")}catch{}}(),Mc=Ct&&Ct.isArrayBuffer,Sc=Ct&&Ct.isDate,Tc=Ct&&Ct.isMap,Cc=Ct&&Ct.isRegExp,Ic=Ct&&Ct.isSet,Ac=Ct&&Ct.isTypedArray;function xt(I,j,O){switch(O.length){case 0:return I.call(j);case 1:return I.call(j,O[0]);case 2:return I.call(j,O[0],O[1]);case 3:return I.call(j,O[0],O[1],O[2])}return I.apply(j,O)}function I1(I,j,O,G){for(var ie=-1,be=I==null?0:I.length;++ie<be;){var Ze=I[ie];j(G,Ze,O(Ze),I)}return G}function It(I,j){for(var O=-1,G=I==null?0:I.length;++O<G&&j(I[O],O,I)!==!1;);return I}function A1(I,j){for(var O=I==null?0:I.length;O--&&j(I[O],O,I)!==!1;);return I}function Lc(I,j){for(var O=-1,G=I==null?0:I.length;++O<G;)if(!j(I[O],O,I))return!1;return!0}function pn(I,j){for(var O=-1,G=I==null?0:I.length,ie=0,be=[];++O<G;){var Ze=I[O];j(Ze,O,I)&&(be[ie++]=Ze)}return be}function bi(I,j){var O=I==null?0:I.length;return!!O&&ar(I,j,0)>-1}function no(I,j,O){for(var G=-1,ie=I==null?0:I.length;++G<ie;)if(O(j,I[G]))return!0;return!1}function je(I,j){for(var O=-1,G=I==null?0:I.length,ie=Array(G);++O<G;)ie[O]=j(I[O],O,I);return ie}function yn(I,j){for(var O=-1,G=j.length,ie=I.length;++O<G;)I[ie+O]=j[O];return I}function ro(I,j,O,G){var ie=-1,be=I==null?0:I.length;for(G&&be&&(O=I[++ie]);++ie<be;)O=j(O,I[ie],ie,I);return O}function L1(I,j,O,G){var ie=I==null?0:I.length;for(G&&ie&&(O=I[--ie]);ie--;)O=j(O,I[ie],ie,I);return O}function io(I,j){for(var O=-1,G=I==null?0:I.length;++O<G;)if(j(I[O],O,I))return!0;return!1}var E1=so("length");function N1(I){return I.split("")}function O1(I){return I.match(zd)||[]}function Ec(I,j,O){var G;return O(I,function(ie,be,Ze){if(j(ie,be,Ze))return G=be,!1}),G}function xi(I,j,O,G){for(var ie=I.length,be=O+(G?1:-1);G?be--:++be<ie;)if(j(I[be],be,I))return be;return-1}function ar(I,j,O){return j===j?G1(I,j,O):xi(I,Nc,O)}function j1(I,j,O,G){for(var ie=O-1,be=I.length;++ie<be;)if(G(I[ie],j))return ie;return-1}function Nc(I){return I!==I}function Oc(I,j){var O=I==null?0:I.length;return O?ao(I,j)/O:ir}function so(I){return function(j){return j==null?n:j[I]}}function oo(I){return function(j){return I==null?n:I[j]}}function jc(I,j,O,G,ie){return ie(I,function(be,Ze,Me){O=G?(G=!1,be):j(O,be,Ze,Me)}),O}function B1(I,j){var O=I.length;for(I.sort(j);O--;)I[O]=I[O].value;return I}function ao(I,j){for(var O,G=-1,ie=I.length;++G<ie;){var be=j(I[G]);be!==n&&(O=O===n?be:O+be)}return O}function co(I,j){for(var O=-1,G=Array(I);++O<I;)G[O]=j(O);return G}function F1(I,j){return je(j,function(O){return[O,I[O]]})}function Bc(I){return I&&I.slice(0,Wc(I)+1).replace(Vs,"")}function wt(I){return function(j){return I(j)}}function lo(I,j){return je(j,function(O){return I[O]})}function Er(I,j){return I.has(j)}function Fc(I,j){for(var O=-1,G=I.length;++O<G&&ar(j,I[O],0)>-1;);return O}function Rc(I,j){for(var O=I.length;O--&&ar(j,I[O],0)>-1;);return O}function R1(I,j){for(var O=I.length,G=0;O--;)I[O]===j&&++G;return G}var D1=oo(_1),W1=oo(P1);function U1(I){return"\\"+M1[I]}function z1(I,j){return I==null?n:I[j]}function cr(I){return v1.test(I)}function $1(I){return b1.test(I)}function q1(I){for(var j,O=[];!(j=I.next()).done;)O.push(j.value);return O}function uo(I){var j=-1,O=Array(I.size);return I.forEach(function(G,ie){O[++j]=[ie,G]}),O}function Dc(I,j){return function(O){return I(j(O))}}function vn(I,j){for(var O=-1,G=I.length,ie=0,be=[];++O<G;){var Ze=I[O];(Ze===j||Ze===m)&&(I[O]=m,be[ie++]=O)}return be}function wi(I){var j=-1,O=Array(I.size);return I.forEach(function(G){O[++j]=G}),O}function H1(I){var j=-1,O=Array(I.size);return I.forEach(function(G){O[++j]=[G,G]}),O}function G1(I,j,O){for(var G=O-1,ie=I.length;++G<ie;)if(I[G]===j)return G;return-1}function K1(I,j,O){for(var G=O+1;G--;)if(I[G]===j)return G;return G}function lr(I){return cr(I)?Z1(I):E1(I)}function Ut(I){return cr(I)?Y1(I):N1(I)}function Wc(I){for(var j=I.length;j--&&Rd.test(I.charAt(j)););return j}var V1=oo(k1);function Z1(I){for(var j=Qs.lastIndex=0;Qs.test(I);)++j;return j}function Y1(I){return I.match(Qs)||[]}function X1(I){return I.match(y1)||[]}var J1=function I(j){j=j==null?Qe:ur.defaults(Qe.Object(),j,ur.pick(Qe,x1));var O=j.Array,G=j.Date,ie=j.Error,be=j.Function,Ze=j.Math,Me=j.Object,fo=j.RegExp,Q1=j.String,At=j.TypeError,_i=O.prototype,e0=be.prototype,fr=Me.prototype,Pi=j["__core-js_shared__"],ki=e0.toString,_e=fr.hasOwnProperty,t0=0,Uc=function(){var e=/[^.]+$/.exec(Pi&&Pi.keys&&Pi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Mi=fr.toString,n0=ki.call(Me),r0=Qe._,i0=fo("^"+ki.call(_e).replace(Ks,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Si=kc?j.Buffer:n,bn=j.Symbol,Ti=j.Uint8Array,zc=Si?Si.allocUnsafe:n,Ci=Dc(Me.getPrototypeOf,Me),$c=Me.create,qc=fr.propertyIsEnumerable,Ii=_i.splice,Hc=bn?bn.isConcatSpreadable:n,Nr=bn?bn.iterator:n,Dn=bn?bn.toStringTag:n,Ai=function(){try{var e=qn(Me,"defineProperty");return e({},"",{}),e}catch{}}(),s0=j.clearTimeout!==Qe.clearTimeout&&j.clearTimeout,o0=G&&G.now!==Qe.Date.now&&G.now,a0=j.setTimeout!==Qe.setTimeout&&j.setTimeout,Li=Ze.ceil,Ei=Ze.floor,ho=Me.getOwnPropertySymbols,c0=Si?Si.isBuffer:n,Gc=j.isFinite,l0=_i.join,u0=Dc(Me.keys,Me),Ye=Ze.max,it=Ze.min,f0=G.now,d0=j.parseInt,Kc=Ze.random,h0=_i.reverse,mo=qn(j,"DataView"),Or=qn(j,"Map"),go=qn(j,"Promise"),dr=qn(j,"Set"),jr=qn(j,"WeakMap"),Br=qn(Me,"create"),Ni=jr&&new jr,hr={},m0=Hn(mo),g0=Hn(Or),p0=Hn(go),y0=Hn(dr),v0=Hn(jr),Oi=bn?bn.prototype:n,Fr=Oi?Oi.valueOf:n,Vc=Oi?Oi.toString:n;function v(e){if(We(e)&&!se(e)&&!(e instanceof pe)){if(e instanceof Lt)return e;if(_e.call(e,"__wrapped__"))return Zl(e)}return new Lt(e)}var mr=function(){function e(){}return function(i){if(!Fe(i))return{};if($c)return $c(i);e.prototype=i;var o=new e;return e.prototype=n,o}}();function ji(){}function Lt(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}v.templateSettings={escape:Ed,evaluate:Nd,interpolate:rc,variable:"",imports:{_:v}},v.prototype=ji.prototype,v.prototype.constructor=v,Lt.prototype=mr(ji.prototype),Lt.prototype.constructor=Lt;function pe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=oe,this.__views__=[]}function b0(){var e=new pe(this.__wrapped__);return e.__actions__=ht(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ht(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ht(this.__views__),e}function x0(){if(this.__filtered__){var e=new pe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function w0(){var e=this.__wrapped__.value(),i=this.__dir__,o=se(e),f=i<0,g=o?e.length:0,x=Nh(0,g,this.__views__),_=x.start,M=x.end,E=M-_,B=f?M:_-1,F=this.__iteratees__,W=F.length,H=0,Y=it(E,this.__takeCount__);if(!o||!f&&g==E&&Y==E)return vl(e,this.__actions__);var ee=[];e:for(;E--&&H<Y;){B+=i;for(var ce=-1,te=e[B];++ce<W;){var he=F[ce],ye=he.iteratee,kt=he.type,lt=ye(te);if(kt==z)te=lt;else if(!lt){if(kt==ge)continue e;break e}}ee[H++]=te}return ee}pe.prototype=mr(ji.prototype),pe.prototype.constructor=pe;function Wn(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var f=e[i];this.set(f[0],f[1])}}function _0(){this.__data__=Br?Br(null):{},this.size=0}function P0(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function k0(e){var i=this.__data__;if(Br){var o=i[e];return o===d?n:o}return _e.call(i,e)?i[e]:n}function M0(e){var i=this.__data__;return Br?i[e]!==n:_e.call(i,e)}function S0(e,i){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=Br&&i===n?d:i,this}Wn.prototype.clear=_0,Wn.prototype.delete=P0,Wn.prototype.get=k0,Wn.prototype.has=M0,Wn.prototype.set=S0;function tn(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var f=e[i];this.set(f[0],f[1])}}function T0(){this.__data__=[],this.size=0}function C0(e){var i=this.__data__,o=Bi(i,e);if(o<0)return!1;var f=i.length-1;return o==f?i.pop():Ii.call(i,o,1),--this.size,!0}function I0(e){var i=this.__data__,o=Bi(i,e);return o<0?n:i[o][1]}function A0(e){return Bi(this.__data__,e)>-1}function L0(e,i){var o=this.__data__,f=Bi(o,e);return f<0?(++this.size,o.push([e,i])):o[f][1]=i,this}tn.prototype.clear=T0,tn.prototype.delete=C0,tn.prototype.get=I0,tn.prototype.has=A0,tn.prototype.set=L0;function nn(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var f=e[i];this.set(f[0],f[1])}}function E0(){this.size=0,this.__data__={hash:new Wn,map:new(Or||tn),string:new Wn}}function N0(e){var i=Vi(this,e).delete(e);return this.size-=i?1:0,i}function O0(e){return Vi(this,e).get(e)}function j0(e){return Vi(this,e).has(e)}function B0(e,i){var o=Vi(this,e),f=o.size;return o.set(e,i),this.size+=o.size==f?0:1,this}nn.prototype.clear=E0,nn.prototype.delete=N0,nn.prototype.get=O0,nn.prototype.has=j0,nn.prototype.set=B0;function Un(e){var i=-1,o=e==null?0:e.length;for(this.__data__=new nn;++i<o;)this.add(e[i])}function F0(e){return this.__data__.set(e,d),this}function R0(e){return this.__data__.has(e)}Un.prototype.add=Un.prototype.push=F0,Un.prototype.has=R0;function zt(e){var i=this.__data__=new tn(e);this.size=i.size}function D0(){this.__data__=new tn,this.size=0}function W0(e){var i=this.__data__,o=i.delete(e);return this.size=i.size,o}function U0(e){return this.__data__.get(e)}function z0(e){return this.__data__.has(e)}function $0(e,i){var o=this.__data__;if(o instanceof tn){var f=o.__data__;if(!Or||f.length<a-1)return f.push([e,i]),this.size=++o.size,this;o=this.__data__=new nn(f)}return o.set(e,i),this.size=o.size,this}zt.prototype.clear=D0,zt.prototype.delete=W0,zt.prototype.get=U0,zt.prototype.has=z0,zt.prototype.set=$0;function Zc(e,i){var o=se(e),f=!o&&Gn(e),g=!o&&!f&&kn(e),x=!o&&!f&&!g&&vr(e),_=o||f||g||x,M=_?co(e.length,Q1):[],E=M.length;for(var B in e)(i||_e.call(e,B))&&!(_&&(B=="length"||g&&(B=="offset"||B=="parent")||x&&(B=="buffer"||B=="byteLength"||B=="byteOffset")||an(B,E)))&&M.push(B);return M}function Yc(e){var i=e.length;return i?e[So(0,i-1)]:n}function q0(e,i){return Zi(ht(e),zn(i,0,e.length))}function H0(e){return Zi(ht(e))}function po(e,i,o){(o!==n&&!$t(e[i],o)||o===n&&!(i in e))&&rn(e,i,o)}function Rr(e,i,o){var f=e[i];(!(_e.call(e,i)&&$t(f,o))||o===n&&!(i in e))&&rn(e,i,o)}function Bi(e,i){for(var o=e.length;o--;)if($t(e[o][0],i))return o;return-1}function G0(e,i,o,f){return xn(e,function(g,x,_){i(f,g,o(g),_)}),f}function Xc(e,i){return e&&Zt(i,Je(i),e)}function K0(e,i){return e&&Zt(i,gt(i),e)}function rn(e,i,o){i=="__proto__"&&Ai?Ai(e,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[i]=o}function yo(e,i){for(var o=-1,f=i.length,g=O(f),x=e==null;++o<f;)g[o]=x?n:Xo(e,i[o]);return g}function zn(e,i,o){return e===e&&(o!==n&&(e=e<=o?e:o),i!==n&&(e=e>=i?e:i)),e}function Et(e,i,o,f,g,x){var _,M=i&p,E=i&b,B=i&w;if(o&&(_=g?o(e,f,g,x):o(e)),_!==n)return _;if(!Fe(e))return e;var F=se(e);if(F){if(_=jh(e),!M)return ht(e,_)}else{var W=st(e),H=W==mi||W==Qa;if(kn(e))return wl(e,M);if(W==en||W==bt||H&&!g){if(_=E||H?{}:Wl(e),!M)return E?kh(e,K0(_,e)):Ph(e,Xc(_,e))}else{if(!Ce[W])return g?e:{};_=Bh(e,W,M)}}x||(x=new zt);var Y=x.get(e);if(Y)return Y;x.set(e,_),gu(e)?e.forEach(function(te){_.add(Et(te,i,o,te,e,x))}):hu(e)&&e.forEach(function(te,he){_.set(he,Et(te,i,o,he,e,x))});var ee=B?E?Fo:Bo:E?gt:Je,ce=F?n:ee(e);return It(ce||e,function(te,he){ce&&(he=te,te=e[he]),Rr(_,he,Et(te,i,o,he,e,x))}),_}function V0(e){var i=Je(e);return function(o){return Jc(o,e,i)}}function Jc(e,i,o){var f=o.length;if(e==null)return!f;for(e=Me(e);f--;){var g=o[f],x=i[g],_=e[g];if(_===n&&!(g in e)||!x(_))return!1}return!0}function Qc(e,i,o){if(typeof e!="function")throw new At(l);return Hr(function(){e.apply(n,o)},i)}function Dr(e,i,o,f){var g=-1,x=bi,_=!0,M=e.length,E=[],B=i.length;if(!M)return E;o&&(i=je(i,wt(o))),f?(x=no,_=!1):i.length>=a&&(x=Er,_=!1,i=new Un(i));e:for(;++g<M;){var F=e[g],W=o==null?F:o(F);if(F=f||F!==0?F:0,_&&W===W){for(var H=B;H--;)if(i[H]===W)continue e;E.push(F)}else x(i,W,f)||E.push(F)}return E}var xn=Sl(Vt),el=Sl(bo,!0);function Z0(e,i){var o=!0;return xn(e,function(f,g,x){return o=!!i(f,g,x),o}),o}function Fi(e,i,o){for(var f=-1,g=e.length;++f<g;){var x=e[f],_=i(x);if(_!=null&&(M===n?_===_&&!Pt(_):o(_,M)))var M=_,E=x}return E}function Y0(e,i,o,f){var g=e.length;for(o=ae(o),o<0&&(o=-o>g?0:g+o),f=f===n||f>g?g:ae(f),f<0&&(f+=g),f=o>f?0:yu(f);o<f;)e[o++]=i;return e}function tl(e,i){var o=[];return xn(e,function(f,g,x){i(f,g,x)&&o.push(f)}),o}function et(e,i,o,f,g){var x=-1,_=e.length;for(o||(o=Rh),g||(g=[]);++x<_;){var M=e[x];i>0&&o(M)?i>1?et(M,i-1,o,f,g):yn(g,M):f||(g[g.length]=M)}return g}var vo=Tl(),nl=Tl(!0);function Vt(e,i){return e&&vo(e,i,Je)}function bo(e,i){return e&&nl(e,i,Je)}function Ri(e,i){return pn(i,function(o){return cn(e[o])})}function $n(e,i){i=_n(i,e);for(var o=0,f=i.length;e!=null&&o<f;)e=e[Yt(i[o++])];return o&&o==f?e:n}function rl(e,i,o){var f=i(e);return se(e)?f:yn(f,o(e))}function at(e){return e==null?e===n?Md:Pd:Dn&&Dn in Me(e)?Eh(e):Hh(e)}function xo(e,i){return e>i}function X0(e,i){return e!=null&&_e.call(e,i)}function J0(e,i){return e!=null&&i in Me(e)}function Q0(e,i,o){return e>=it(i,o)&&e<Ye(i,o)}function wo(e,i,o){for(var f=o?no:bi,g=e[0].length,x=e.length,_=x,M=O(x),E=1/0,B=[];_--;){var F=e[_];_&&i&&(F=je(F,wt(i))),E=it(F.length,E),M[_]=!o&&(i||g>=120&&F.length>=120)?new Un(_&&F):n}F=e[0];var W=-1,H=M[0];e:for(;++W<g&&B.length<E;){var Y=F[W],ee=i?i(Y):Y;if(Y=o||Y!==0?Y:0,!(H?Er(H,ee):f(B,ee,o))){for(_=x;--_;){var ce=M[_];if(!(ce?Er(ce,ee):f(e[_],ee,o)))continue e}H&&H.push(ee),B.push(Y)}}return B}function eh(e,i,o,f){return Vt(e,function(g,x,_){i(f,o(g),x,_)}),f}function Wr(e,i,o){i=_n(i,e),e=ql(e,i);var f=e==null?e:e[Yt(Ot(i))];return f==null?n:xt(f,e,o)}function il(e){return We(e)&&at(e)==bt}function th(e){return We(e)&&at(e)==Lr}function nh(e){return We(e)&&at(e)==Sr}function Ur(e,i,o,f,g){return e===i?!0:e==null||i==null||!We(e)&&!We(i)?e!==e&&i!==i:rh(e,i,o,f,Ur,g)}function rh(e,i,o,f,g,x){var _=se(e),M=se(i),E=_?di:st(e),B=M?di:st(i);E=E==bt?en:E,B=B==bt?en:B;var F=E==en,W=B==en,H=E==B;if(H&&kn(e)){if(!kn(i))return!1;_=!0,F=!1}if(H&&!F)return x||(x=new zt),_||vr(e)?Fl(e,i,o,f,g,x):Ah(e,i,E,o,f,g,x);if(!(o&P)){var Y=F&&_e.call(e,"__wrapped__"),ee=W&&_e.call(i,"__wrapped__");if(Y||ee){var ce=Y?e.value():e,te=ee?i.value():i;return x||(x=new zt),g(ce,te,o,f,x)}}return H?(x||(x=new zt),Lh(e,i,o,f,g,x)):!1}function ih(e){return We(e)&&st(e)==Dt}function _o(e,i,o,f){var g=o.length,x=g,_=!f;if(e==null)return!x;for(e=Me(e);g--;){var M=o[g];if(_&&M[2]?M[1]!==e[M[0]]:!(M[0]in e))return!1}for(;++g<x;){M=o[g];var E=M[0],B=e[E],F=M[1];if(_&&M[2]){if(B===n&&!(E in e))return!1}else{var W=new zt;if(f)var H=f(B,F,E,e,i,W);if(!(H===n?Ur(F,B,P|S,f,W):H))return!1}}return!0}function sl(e){if(!Fe(e)||Wh(e))return!1;var i=cn(e)?i0:Vd;return i.test(Hn(e))}function sh(e){return We(e)&&at(e)==Cr}function oh(e){return We(e)&&st(e)==Wt}function ah(e){return We(e)&&ts(e.length)&&!!Ne[at(e)]}function ol(e){return typeof e=="function"?e:e==null?pt:typeof e=="object"?se(e)?ll(e[0],e[1]):cl(e):Cu(e)}function Po(e){if(!qr(e))return u0(e);var i=[];for(var o in Me(e))_e.call(e,o)&&o!="constructor"&&i.push(o);return i}function ch(e){if(!Fe(e))return qh(e);var i=qr(e),o=[];for(var f in e)f=="constructor"&&(i||!_e.call(e,f))||o.push(f);return o}function ko(e,i){return e<i}function al(e,i){var o=-1,f=mt(e)?O(e.length):[];return xn(e,function(g,x,_){f[++o]=i(g,x,_)}),f}function cl(e){var i=Do(e);return i.length==1&&i[0][2]?zl(i[0][0],i[0][1]):function(o){return o===e||_o(o,e,i)}}function ll(e,i){return Uo(e)&&Ul(i)?zl(Yt(e),i):function(o){var f=Xo(o,e);return f===n&&f===i?Jo(o,e):Ur(i,f,P|S)}}function Di(e,i,o,f,g){e!==i&&vo(i,function(x,_){if(g||(g=new zt),Fe(x))lh(e,i,_,o,Di,f,g);else{var M=f?f($o(e,_),x,_+"",e,i,g):n;M===n&&(M=x),po(e,_,M)}},gt)}function lh(e,i,o,f,g,x,_){var M=$o(e,o),E=$o(i,o),B=_.get(E);if(B){po(e,o,B);return}var F=x?x(M,E,o+"",e,i,_):n,W=F===n;if(W){var H=se(E),Y=!H&&kn(E),ee=!H&&!Y&&vr(E);F=E,H||Y||ee?se(M)?F=M:Ue(M)?F=ht(M):Y?(W=!1,F=wl(E,!0)):ee?(W=!1,F=_l(E,!0)):F=[]:Gr(E)||Gn(E)?(F=M,Gn(M)?F=vu(M):(!Fe(M)||cn(M))&&(F=Wl(E))):W=!1}W&&(_.set(E,F),g(F,E,f,x,_),_.delete(E)),po(e,o,F)}function ul(e,i){var o=e.length;if(o)return i+=i<0?o:0,an(i,o)?e[i]:n}function fl(e,i,o){i.length?i=je(i,function(x){return se(x)?function(_){return $n(_,x.length===1?x[0]:x)}:x}):i=[pt];var f=-1;i=je(i,wt(Q()));var g=al(e,function(x,_,M){var E=je(i,function(B){return B(x)});return{criteria:E,index:++f,value:x}});return B1(g,function(x,_){return _h(x,_,o)})}function uh(e,i){return dl(e,i,function(o,f){return Jo(e,f)})}function dl(e,i,o){for(var f=-1,g=i.length,x={};++f<g;){var _=i[f],M=$n(e,_);o(M,_)&&zr(x,_n(_,e),M)}return x}function fh(e){return function(i){return $n(i,e)}}function Mo(e,i,o,f){var g=f?j1:ar,x=-1,_=i.length,M=e;for(e===i&&(i=ht(i)),o&&(M=je(e,wt(o)));++x<_;)for(var E=0,B=i[x],F=o?o(B):B;(E=g(M,F,E,f))>-1;)M!==e&&Ii.call(M,E,1),Ii.call(e,E,1);return e}function hl(e,i){for(var o=e?i.length:0,f=o-1;o--;){var g=i[o];if(o==f||g!==x){var x=g;an(g)?Ii.call(e,g,1):Io(e,g)}}return e}function So(e,i){return e+Ei(Kc()*(i-e+1))}function dh(e,i,o,f){for(var g=-1,x=Ye(Li((i-e)/(o||1)),0),_=O(x);x--;)_[f?x:++g]=e,e+=o;return _}function To(e,i){var o="";if(!e||i<1||i>Xe)return o;do i%2&&(o+=e),i=Ei(i/2),i&&(e+=e);while(i);return o}function fe(e,i){return qo($l(e,i,pt),e+"")}function hh(e){return Yc(br(e))}function mh(e,i){var o=br(e);return Zi(o,zn(i,0,o.length))}function zr(e,i,o,f){if(!Fe(e))return e;i=_n(i,e);for(var g=-1,x=i.length,_=x-1,M=e;M!=null&&++g<x;){var E=Yt(i[g]),B=o;if(E==="__proto__"||E==="constructor"||E==="prototype")return e;if(g!=_){var F=M[E];B=f?f(F,E,M):n,B===n&&(B=Fe(F)?F:an(i[g+1])?[]:{})}Rr(M,E,B),M=M[E]}return e}var ml=Ni?function(e,i){return Ni.set(e,i),e}:pt,gh=Ai?function(e,i){return Ai(e,"toString",{configurable:!0,enumerable:!1,value:ea(i),writable:!0})}:pt;function ph(e){return Zi(br(e))}function Nt(e,i,o){var f=-1,g=e.length;i<0&&(i=-i>g?0:g+i),o=o>g?g:o,o<0&&(o+=g),g=i>o?0:o-i>>>0,i>>>=0;for(var x=O(g);++f<g;)x[f]=e[f+i];return x}function yh(e,i){var o;return xn(e,function(f,g,x){return o=i(f,g,x),!o}),!!o}function Wi(e,i,o){var f=0,g=e==null?f:e.length;if(typeof i=="number"&&i===i&&g<=ot){for(;f<g;){var x=f+g>>>1,_=e[x];_!==null&&!Pt(_)&&(o?_<=i:_<i)?f=x+1:g=x}return g}return Co(e,i,pt,o)}function Co(e,i,o,f){var g=0,x=e==null?0:e.length;if(x===0)return 0;i=o(i);for(var _=i!==i,M=i===null,E=Pt(i),B=i===n;g<x;){var F=Ei((g+x)/2),W=o(e[F]),H=W!==n,Y=W===null,ee=W===W,ce=Pt(W);if(_)var te=f||ee;else B?te=ee&&(f||H):M?te=ee&&H&&(f||!Y):E?te=ee&&H&&!Y&&(f||!ce):Y||ce?te=!1:te=f?W<=i:W<i;te?g=F+1:x=F}return it(x,Ee)}function gl(e,i){for(var o=-1,f=e.length,g=0,x=[];++o<f;){var _=e[o],M=i?i(_):_;if(!o||!$t(M,E)){var E=M;x[g++]=_===0?0:_}}return x}function pl(e){return typeof e=="number"?e:Pt(e)?ir:+e}function _t(e){if(typeof e=="string")return e;if(se(e))return je(e,_t)+"";if(Pt(e))return Vc?Vc.call(e):"";var i=e+"";return i=="0"&&1/e==-Be?"-0":i}function wn(e,i,o){var f=-1,g=bi,x=e.length,_=!0,M=[],E=M;if(o)_=!1,g=no;else if(x>=a){var B=i?null:Ch(e);if(B)return wi(B);_=!1,g=Er,E=new Un}else E=i?[]:M;e:for(;++f<x;){var F=e[f],W=i?i(F):F;if(F=o||F!==0?F:0,_&&W===W){for(var H=E.length;H--;)if(E[H]===W)continue e;i&&E.push(W),M.push(F)}else g(E,W,o)||(E!==M&&E.push(W),M.push(F))}return M}function Io(e,i){return i=_n(i,e),e=ql(e,i),e==null||delete e[Yt(Ot(i))]}function yl(e,i,o,f){return zr(e,i,o($n(e,i)),f)}function Ui(e,i,o,f){for(var g=e.length,x=f?g:-1;(f?x--:++x<g)&&i(e[x],x,e););return o?Nt(e,f?0:x,f?x+1:g):Nt(e,f?x+1:0,f?g:x)}function vl(e,i){var o=e;return o instanceof pe&&(o=o.value()),ro(i,function(f,g){return g.func.apply(g.thisArg,yn([f],g.args))},o)}function Ao(e,i,o){var f=e.length;if(f<2)return f?wn(e[0]):[];for(var g=-1,x=O(f);++g<f;)for(var _=e[g],M=-1;++M<f;)M!=g&&(x[g]=Dr(x[g]||_,e[M],i,o));return wn(et(x,1),i,o)}function bl(e,i,o){for(var f=-1,g=e.length,x=i.length,_={};++f<g;){var M=f<x?i[f]:n;o(_,e[f],M)}return _}function Lo(e){return Ue(e)?e:[]}function Eo(e){return typeof e=="function"?e:pt}function _n(e,i){return se(e)?e:Uo(e,i)?[e]:Vl(we(e))}var vh=fe;function Pn(e,i,o){var f=e.length;return o=o===n?f:o,!i&&o>=f?e:Nt(e,i,o)}var xl=s0||function(e){return Qe.clearTimeout(e)};function wl(e,i){if(i)return e.slice();var o=e.length,f=zc?zc(o):new e.constructor(o);return e.copy(f),f}function No(e){var i=new e.constructor(e.byteLength);return new Ti(i).set(new Ti(e)),i}function bh(e,i){var o=i?No(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}function xh(e){var i=new e.constructor(e.source,ic.exec(e));return i.lastIndex=e.lastIndex,i}function wh(e){return Fr?Me(Fr.call(e)):{}}function _l(e,i){var o=i?No(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}function Pl(e,i){if(e!==i){var o=e!==n,f=e===null,g=e===e,x=Pt(e),_=i!==n,M=i===null,E=i===i,B=Pt(i);if(!M&&!B&&!x&&e>i||x&&_&&E&&!M&&!B||f&&_&&E||!o&&E||!g)return 1;if(!f&&!x&&!B&&e<i||B&&o&&g&&!f&&!x||M&&o&&g||!_&&g||!E)return-1}return 0}function _h(e,i,o){for(var f=-1,g=e.criteria,x=i.criteria,_=g.length,M=o.length;++f<_;){var E=Pl(g[f],x[f]);if(E){if(f>=M)return E;var B=o[f];return E*(B=="desc"?-1:1)}}return e.index-i.index}function kl(e,i,o,f){for(var g=-1,x=e.length,_=o.length,M=-1,E=i.length,B=Ye(x-_,0),F=O(E+B),W=!f;++M<E;)F[M]=i[M];for(;++g<_;)(W||g<x)&&(F[o[g]]=e[g]);for(;B--;)F[M++]=e[g++];return F}function Ml(e,i,o,f){for(var g=-1,x=e.length,_=-1,M=o.length,E=-1,B=i.length,F=Ye(x-M,0),W=O(F+B),H=!f;++g<F;)W[g]=e[g];for(var Y=g;++E<B;)W[Y+E]=i[E];for(;++_<M;)(H||g<x)&&(W[Y+o[_]]=e[g++]);return W}function ht(e,i){var o=-1,f=e.length;for(i||(i=O(f));++o<f;)i[o]=e[o];return i}function Zt(e,i,o,f){var g=!o;o||(o={});for(var x=-1,_=i.length;++x<_;){var M=i[x],E=f?f(o[M],e[M],M,o,e):n;E===n&&(E=e[M]),g?rn(o,M,E):Rr(o,M,E)}return o}function Ph(e,i){return Zt(e,Wo(e),i)}function kh(e,i){return Zt(e,Rl(e),i)}function zi(e,i){return function(o,f){var g=se(o)?I1:G0,x=i?i():{};return g(o,e,Q(f,2),x)}}function gr(e){return fe(function(i,o){var f=-1,g=o.length,x=g>1?o[g-1]:n,_=g>2?o[2]:n;for(x=e.length>3&&typeof x=="function"?(g--,x):n,_&&ct(o[0],o[1],_)&&(x=g<3?n:x,g=1),i=Me(i);++f<g;){var M=o[f];M&&e(i,M,f,x)}return i})}function Sl(e,i){return function(o,f){if(o==null)return o;if(!mt(o))return e(o,f);for(var g=o.length,x=i?g:-1,_=Me(o);(i?x--:++x<g)&&f(_[x],x,_)!==!1;);return o}}function Tl(e){return function(i,o,f){for(var g=-1,x=Me(i),_=f(i),M=_.length;M--;){var E=_[e?M:++g];if(o(x[E],E,x)===!1)break}return i}}function Mh(e,i,o){var f=i&L,g=$r(e);function x(){var _=this&&this!==Qe&&this instanceof x?g:e;return _.apply(f?o:this,arguments)}return x}function Cl(e){return function(i){i=we(i);var o=cr(i)?Ut(i):n,f=o?o[0]:i.charAt(0),g=o?Pn(o,1).join(""):i.slice(1);return f[e]()+g}}function pr(e){return function(i){return ro(Su(Mu(i).replace(g1,"")),e,"")}}function $r(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var o=mr(e.prototype),f=e.apply(o,i);return Fe(f)?f:o}}function Sh(e,i,o){var f=$r(e);function g(){for(var x=arguments.length,_=O(x),M=x,E=yr(g);M--;)_[M]=arguments[M];var B=x<3&&_[0]!==E&&_[x-1]!==E?[]:vn(_,E);if(x-=B.length,x<o)return Nl(e,i,$i,g.placeholder,n,_,B,n,n,o-x);var F=this&&this!==Qe&&this instanceof g?f:e;return xt(F,this,_)}return g}function Il(e){return function(i,o,f){var g=Me(i);if(!mt(i)){var x=Q(o,3);i=Je(i),o=function(M){return x(g[M],M,g)}}var _=e(i,o,f);return _>-1?g[x?i[_]:_]:n}}function Al(e){return on(function(i){var o=i.length,f=o,g=Lt.prototype.thru;for(e&&i.reverse();f--;){var x=i[f];if(typeof x!="function")throw new At(l);if(g&&!_&&Ki(x)=="wrapper")var _=new Lt([],!0)}for(f=_?f:o;++f<o;){x=i[f];var M=Ki(x),E=M=="wrapper"?Ro(x):n;E&&zo(E[0])&&E[1]==($|A|N|V)&&!E[4].length&&E[9]==1?_=_[Ki(E[0])].apply(_,E[3]):_=x.length==1&&zo(x)?_[M]():_.thru(x)}return function(){var B=arguments,F=B[0];if(_&&B.length==1&&se(F))return _.plant(F).value();for(var W=0,H=o?i[W].apply(this,B):F;++W<o;)H=i[W].call(this,H);return H}})}function $i(e,i,o,f,g,x,_,M,E,B){var F=i&$,W=i&L,H=i&T,Y=i&(A|k),ee=i&Z,ce=H?n:$r(e);function te(){for(var he=arguments.length,ye=O(he),kt=he;kt--;)ye[kt]=arguments[kt];if(Y)var lt=yr(te),Mt=R1(ye,lt);if(f&&(ye=kl(ye,f,g,Y)),x&&(ye=Ml(ye,x,_,Y)),he-=Mt,Y&&he<B){var ze=vn(ye,lt);return Nl(e,i,$i,te.placeholder,o,ye,ze,M,E,B-he)}var qt=W?o:this,un=H?qt[e]:e;return he=ye.length,M?ye=Gh(ye,M):ee&&he>1&&ye.reverse(),F&&E<he&&(ye.length=E),this&&this!==Qe&&this instanceof te&&(un=ce||$r(un)),un.apply(qt,ye)}return te}function Ll(e,i){return function(o,f){return eh(o,e,i(f),{})}}function qi(e,i){return function(o,f){var g;if(o===n&&f===n)return i;if(o!==n&&(g=o),f!==n){if(g===n)return f;typeof o=="string"||typeof f=="string"?(o=_t(o),f=_t(f)):(o=pl(o),f=pl(f)),g=e(o,f)}return g}}function Oo(e){return on(function(i){return i=je(i,wt(Q())),fe(function(o){var f=this;return e(i,function(g){return xt(g,f,o)})})})}function Hi(e,i){i=i===n?" ":_t(i);var o=i.length;if(o<2)return o?To(i,e):i;var f=To(i,Li(e/lr(i)));return cr(i)?Pn(Ut(f),0,e).join(""):f.slice(0,e)}function Th(e,i,o,f){var g=i&L,x=$r(e);function _(){for(var M=-1,E=arguments.length,B=-1,F=f.length,W=O(F+E),H=this&&this!==Qe&&this instanceof _?x:e;++B<F;)W[B]=f[B];for(;E--;)W[B++]=arguments[++M];return xt(H,g?o:this,W)}return _}function El(e){return function(i,o,f){return f&&typeof f!="number"&&ct(i,o,f)&&(o=f=n),i=ln(i),o===n?(o=i,i=0):o=ln(o),f=f===n?i<o?1:-1:ln(f),dh(i,o,f,e)}}function Gi(e){return function(i,o){return typeof i=="string"&&typeof o=="string"||(i=jt(i),o=jt(o)),e(i,o)}}function Nl(e,i,o,f,g,x,_,M,E,B){var F=i&A,W=F?_:n,H=F?n:_,Y=F?x:n,ee=F?n:x;i|=F?N:U,i&=~(F?U:N),i&C||(i&=~(L|T));var ce=[e,i,g,Y,W,ee,H,M,E,B],te=o.apply(n,ce);return zo(e)&&Hl(te,ce),te.placeholder=f,Gl(te,e,i)}function jo(e){var i=Ze[e];return function(o,f){if(o=jt(o),f=f==null?0:it(ae(f),292),f&&Gc(o)){var g=(we(o)+"e").split("e"),x=i(g[0]+"e"+(+g[1]+f));return g=(we(x)+"e").split("e"),+(g[0]+"e"+(+g[1]-f))}return i(o)}}var Ch=dr&&1/wi(new dr([,-0]))[1]==Be?function(e){return new dr(e)}:ra;function Ol(e){return function(i){var o=st(i);return o==Dt?uo(i):o==Wt?H1(i):F1(i,e(i))}}function sn(e,i,o,f,g,x,_,M){var E=i&T;if(!E&&typeof e!="function")throw new At(l);var B=f?f.length:0;if(B||(i&=~(N|U),f=g=n),_=_===n?_:Ye(ae(_),0),M=M===n?M:ae(M),B-=g?g.length:0,i&U){var F=f,W=g;f=g=n}var H=E?n:Ro(e),Y=[e,i,o,f,g,F,W,x,_,M];if(H&&$h(Y,H),e=Y[0],i=Y[1],o=Y[2],f=Y[3],g=Y[4],M=Y[9]=Y[9]===n?E?0:e.length:Ye(Y[9]-B,0),!M&&i&(A|k)&&(i&=~(A|k)),!i||i==L)var ee=Mh(e,i,o);else i==A||i==k?ee=Sh(e,i,M):(i==N||i==(L|N))&&!g.length?ee=Th(e,i,o,f):ee=$i.apply(n,Y);var ce=H?ml:Hl;return Gl(ce(ee,Y),e,i)}function jl(e,i,o,f){return e===n||$t(e,fr[o])&&!_e.call(f,o)?i:e}function Bl(e,i,o,f,g,x){return Fe(e)&&Fe(i)&&(x.set(i,e),Di(e,i,n,Bl,x),x.delete(i)),e}function Ih(e){return Gr(e)?n:e}function Fl(e,i,o,f,g,x){var _=o&P,M=e.length,E=i.length;if(M!=E&&!(_&&E>M))return!1;var B=x.get(e),F=x.get(i);if(B&&F)return B==i&&F==e;var W=-1,H=!0,Y=o&S?new Un:n;for(x.set(e,i),x.set(i,e);++W<M;){var ee=e[W],ce=i[W];if(f)var te=_?f(ce,ee,W,i,e,x):f(ee,ce,W,e,i,x);if(te!==n){if(te)continue;H=!1;break}if(Y){if(!io(i,function(he,ye){if(!Er(Y,ye)&&(ee===he||g(ee,he,o,f,x)))return Y.push(ye)})){H=!1;break}}else if(!(ee===ce||g(ee,ce,o,f,x))){H=!1;break}}return x.delete(e),x.delete(i),H}function Ah(e,i,o,f,g,x,_){switch(o){case sr:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case Lr:return!(e.byteLength!=i.byteLength||!x(new Ti(e),new Ti(i)));case Mr:case Sr:case Tr:return $t(+e,+i);case hi:return e.name==i.name&&e.message==i.message;case Cr:case Ir:return e==i+"";case Dt:var M=uo;case Wt:var E=f&P;if(M||(M=wi),e.size!=i.size&&!E)return!1;var B=_.get(e);if(B)return B==i;f|=S,_.set(e,i);var F=Fl(M(e),M(i),f,g,x,_);return _.delete(e),F;case gi:if(Fr)return Fr.call(e)==Fr.call(i)}return!1}function Lh(e,i,o,f,g,x){var _=o&P,M=Bo(e),E=M.length,B=Bo(i),F=B.length;if(E!=F&&!_)return!1;for(var W=E;W--;){var H=M[W];if(!(_?H in i:_e.call(i,H)))return!1}var Y=x.get(e),ee=x.get(i);if(Y&&ee)return Y==i&&ee==e;var ce=!0;x.set(e,i),x.set(i,e);for(var te=_;++W<E;){H=M[W];var he=e[H],ye=i[H];if(f)var kt=_?f(ye,he,H,i,e,x):f(he,ye,H,e,i,x);if(!(kt===n?he===ye||g(he,ye,o,f,x):kt)){ce=!1;break}te||(te=H=="constructor")}if(ce&&!te){var lt=e.constructor,Mt=i.constructor;lt!=Mt&&"constructor"in e&&"constructor"in i&&!(typeof lt=="function"&&lt instanceof lt&&typeof Mt=="function"&&Mt instanceof Mt)&&(ce=!1)}return x.delete(e),x.delete(i),ce}function on(e){return qo($l(e,n,Jl),e+"")}function Bo(e){return rl(e,Je,Wo)}function Fo(e){return rl(e,gt,Rl)}var Ro=Ni?function(e){return Ni.get(e)}:ra;function Ki(e){for(var i=e.name+"",o=hr[i],f=_e.call(hr,i)?o.length:0;f--;){var g=o[f],x=g.func;if(x==null||x==e)return g.name}return i}function yr(e){var i=_e.call(v,"placeholder")?v:e;return i.placeholder}function Q(){var e=v.iteratee||ta;return e=e===ta?ol:e,arguments.length?e(arguments[0],arguments[1]):e}function Vi(e,i){var o=e.__data__;return Dh(i)?o[typeof i=="string"?"string":"hash"]:o.map}function Do(e){for(var i=Je(e),o=i.length;o--;){var f=i[o],g=e[f];i[o]=[f,g,Ul(g)]}return i}function qn(e,i){var o=z1(e,i);return sl(o)?o:n}function Eh(e){var i=_e.call(e,Dn),o=e[Dn];try{e[Dn]=n;var f=!0}catch{}var g=Mi.call(e);return f&&(i?e[Dn]=o:delete e[Dn]),g}var Wo=ho?function(e){return e==null?[]:(e=Me(e),pn(ho(e),function(i){return qc.call(e,i)}))}:ia,Rl=ho?function(e){for(var i=[];e;)yn(i,Wo(e)),e=Ci(e);return i}:ia,st=at;(mo&&st(new mo(new ArrayBuffer(1)))!=sr||Or&&st(new Or)!=Dt||go&&st(go.resolve())!=ec||dr&&st(new dr)!=Wt||jr&&st(new jr)!=Ar)&&(st=function(e){var i=at(e),o=i==en?e.constructor:n,f=o?Hn(o):"";if(f)switch(f){case m0:return sr;case g0:return Dt;case p0:return ec;case y0:return Wt;case v0:return Ar}return i});function Nh(e,i,o){for(var f=-1,g=o.length;++f<g;){var x=o[f],_=x.size;switch(x.type){case"drop":e+=_;break;case"dropRight":i-=_;break;case"take":i=it(i,e+_);break;case"takeRight":e=Ye(e,i-_);break}}return{start:e,end:i}}function Oh(e){var i=e.match(Wd);return i?i[1].split(Ud):[]}function Dl(e,i,o){i=_n(i,e);for(var f=-1,g=i.length,x=!1;++f<g;){var _=Yt(i[f]);if(!(x=e!=null&&o(e,_)))break;e=e[_]}return x||++f!=g?x:(g=e==null?0:e.length,!!g&&ts(g)&&an(_,g)&&(se(e)||Gn(e)))}function jh(e){var i=e.length,o=new e.constructor(i);return i&&typeof e[0]=="string"&&_e.call(e,"index")&&(o.index=e.index,o.input=e.input),o}function Wl(e){return typeof e.constructor=="function"&&!qr(e)?mr(Ci(e)):{}}function Bh(e,i,o){var f=e.constructor;switch(i){case Lr:return No(e);case Mr:case Sr:return new f(+e);case sr:return bh(e,o);case Rs:case Ds:case Ws:case Us:case zs:case $s:case qs:case Hs:case Gs:return _l(e,o);case Dt:return new f;case Tr:case Ir:return new f(e);case Cr:return xh(e);case Wt:return new f;case gi:return wh(e)}}function Fh(e,i){var o=i.length;if(!o)return e;var f=o-1;return i[f]=(o>1?"& ":"")+i[f],i=i.join(o>2?", ":" "),e.replace(Dd,`{
/* [wrapped with `+i+`] */
`)}function Rh(e){return se(e)||Gn(e)||!!(Hc&&e&&e[Hc])}function an(e,i){var o=typeof e;return i=i??Xe,!!i&&(o=="number"||o!="symbol"&&Yd.test(e))&&e>-1&&e%1==0&&e<i}function ct(e,i,o){if(!Fe(o))return!1;var f=typeof i;return(f=="number"?mt(o)&&an(i,o.length):f=="string"&&i in o)?$t(o[i],e):!1}function Uo(e,i){if(se(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||Pt(e)?!0:jd.test(e)||!Od.test(e)||i!=null&&e in Me(i)}function Dh(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function zo(e){var i=Ki(e),o=v[i];if(typeof o!="function"||!(i in pe.prototype))return!1;if(e===o)return!0;var f=Ro(o);return!!f&&e===f[0]}function Wh(e){return!!Uc&&Uc in e}var Uh=Pi?cn:sa;function qr(e){var i=e&&e.constructor,o=typeof i=="function"&&i.prototype||fr;return e===o}function Ul(e){return e===e&&!Fe(e)}function zl(e,i){return function(o){return o==null?!1:o[e]===i&&(i!==n||e in Me(o))}}function zh(e){var i=Qi(e,function(f){return o.size===h&&o.clear(),f}),o=i.cache;return i}function $h(e,i){var o=e[1],f=i[1],g=o|f,x=g<(L|T|$),_=f==$&&o==A||f==$&&o==V&&e[7].length<=i[8]||f==($|V)&&i[7].length<=i[8]&&o==A;if(!(x||_))return e;f&L&&(e[2]=i[2],g|=o&L?0:C);var M=i[3];if(M){var E=e[3];e[3]=E?kl(E,M,i[4]):M,e[4]=E?vn(e[3],m):i[4]}return M=i[5],M&&(E=e[5],e[5]=E?Ml(E,M,i[6]):M,e[6]=E?vn(e[5],m):i[6]),M=i[7],M&&(e[7]=M),f&$&&(e[8]=e[8]==null?i[8]:it(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=g,e}function qh(e){var i=[];if(e!=null)for(var o in Me(e))i.push(o);return i}function Hh(e){return Mi.call(e)}function $l(e,i,o){return i=Ye(i===n?e.length-1:i,0),function(){for(var f=arguments,g=-1,x=Ye(f.length-i,0),_=O(x);++g<x;)_[g]=f[i+g];g=-1;for(var M=O(i+1);++g<i;)M[g]=f[g];return M[i]=o(_),xt(e,this,M)}}function ql(e,i){return i.length<2?e:$n(e,Nt(i,0,-1))}function Gh(e,i){for(var o=e.length,f=it(i.length,o),g=ht(e);f--;){var x=i[f];e[f]=an(x,o)?g[x]:n}return e}function $o(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var Hl=Kl(ml),Hr=a0||function(e,i){return Qe.setTimeout(e,i)},qo=Kl(gh);function Gl(e,i,o){var f=i+"";return qo(e,Fh(f,Kh(Oh(f),o)))}function Kl(e){var i=0,o=0;return function(){var f=f0(),g=qe-(f-o);if(o=f,g>0){if(++i>=Le)return arguments[0]}else i=0;return e.apply(n,arguments)}}function Zi(e,i){var o=-1,f=e.length,g=f-1;for(i=i===n?f:i;++o<i;){var x=So(o,g),_=e[x];e[x]=e[o],e[o]=_}return e.length=i,e}var Vl=zh(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(Bd,function(o,f,g,x){i.push(g?x.replace(qd,"$1"):f||o)}),i});function Yt(e){if(typeof e=="string"||Pt(e))return e;var i=e+"";return i=="0"&&1/e==-Be?"-0":i}function Hn(e){if(e!=null){try{return ki.call(e)}catch{}try{return e+""}catch{}}return""}function Kh(e,i){return It(Fn,function(o){var f="_."+o[0];i&o[1]&&!bi(e,f)&&e.push(f)}),e.sort()}function Zl(e){if(e instanceof pe)return e.clone();var i=new Lt(e.__wrapped__,e.__chain__);return i.__actions__=ht(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function Vh(e,i,o){(o?ct(e,i,o):i===n)?i=1:i=Ye(ae(i),0);var f=e==null?0:e.length;if(!f||i<1)return[];for(var g=0,x=0,_=O(Li(f/i));g<f;)_[x++]=Nt(e,g,g+=i);return _}function Zh(e){for(var i=-1,o=e==null?0:e.length,f=0,g=[];++i<o;){var x=e[i];x&&(g[f++]=x)}return g}function Yh(){var e=arguments.length;if(!e)return[];for(var i=O(e-1),o=arguments[0],f=e;f--;)i[f-1]=arguments[f];return yn(se(o)?ht(o):[o],et(i,1))}var Xh=fe(function(e,i){return Ue(e)?Dr(e,et(i,1,Ue,!0)):[]}),Jh=fe(function(e,i){var o=Ot(i);return Ue(o)&&(o=n),Ue(e)?Dr(e,et(i,1,Ue,!0),Q(o,2)):[]}),Qh=fe(function(e,i){var o=Ot(i);return Ue(o)&&(o=n),Ue(e)?Dr(e,et(i,1,Ue,!0),n,o):[]});function em(e,i,o){var f=e==null?0:e.length;return f?(i=o||i===n?1:ae(i),Nt(e,i<0?0:i,f)):[]}function tm(e,i,o){var f=e==null?0:e.length;return f?(i=o||i===n?1:ae(i),i=f-i,Nt(e,0,i<0?0:i)):[]}function nm(e,i){return e&&e.length?Ui(e,Q(i,3),!0,!0):[]}function rm(e,i){return e&&e.length?Ui(e,Q(i,3),!0):[]}function im(e,i,o,f){var g=e==null?0:e.length;return g?(o&&typeof o!="number"&&ct(e,i,o)&&(o=0,f=g),Y0(e,i,o,f)):[]}function Yl(e,i,o){var f=e==null?0:e.length;if(!f)return-1;var g=o==null?0:ae(o);return g<0&&(g=Ye(f+g,0)),xi(e,Q(i,3),g)}function Xl(e,i,o){var f=e==null?0:e.length;if(!f)return-1;var g=f-1;return o!==n&&(g=ae(o),g=o<0?Ye(f+g,0):it(g,f-1)),xi(e,Q(i,3),g,!0)}function Jl(e){var i=e==null?0:e.length;return i?et(e,1):[]}function sm(e){var i=e==null?0:e.length;return i?et(e,Be):[]}function om(e,i){var o=e==null?0:e.length;return o?(i=i===n?1:ae(i),et(e,i)):[]}function am(e){for(var i=-1,o=e==null?0:e.length,f={};++i<o;){var g=e[i];f[g[0]]=g[1]}return f}function Ql(e){return e&&e.length?e[0]:n}function cm(e,i,o){var f=e==null?0:e.length;if(!f)return-1;var g=o==null?0:ae(o);return g<0&&(g=Ye(f+g,0)),ar(e,i,g)}function lm(e){var i=e==null?0:e.length;return i?Nt(e,0,-1):[]}var um=fe(function(e){var i=je(e,Lo);return i.length&&i[0]===e[0]?wo(i):[]}),fm=fe(function(e){var i=Ot(e),o=je(e,Lo);return i===Ot(o)?i=n:o.pop(),o.length&&o[0]===e[0]?wo(o,Q(i,2)):[]}),dm=fe(function(e){var i=Ot(e),o=je(e,Lo);return i=typeof i=="function"?i:n,i&&o.pop(),o.length&&o[0]===e[0]?wo(o,n,i):[]});function hm(e,i){return e==null?"":l0.call(e,i)}function Ot(e){var i=e==null?0:e.length;return i?e[i-1]:n}function mm(e,i,o){var f=e==null?0:e.length;if(!f)return-1;var g=f;return o!==n&&(g=ae(o),g=g<0?Ye(f+g,0):it(g,f-1)),i===i?K1(e,i,g):xi(e,Nc,g,!0)}function gm(e,i){return e&&e.length?ul(e,ae(i)):n}var pm=fe(eu);function eu(e,i){return e&&e.length&&i&&i.length?Mo(e,i):e}function ym(e,i,o){return e&&e.length&&i&&i.length?Mo(e,i,Q(o,2)):e}function vm(e,i,o){return e&&e.length&&i&&i.length?Mo(e,i,n,o):e}var bm=on(function(e,i){var o=e==null?0:e.length,f=yo(e,i);return hl(e,je(i,function(g){return an(g,o)?+g:g}).sort(Pl)),f});function xm(e,i){var o=[];if(!(e&&e.length))return o;var f=-1,g=[],x=e.length;for(i=Q(i,3);++f<x;){var _=e[f];i(_,f,e)&&(o.push(_),g.push(f))}return hl(e,g),o}function Ho(e){return e==null?e:h0.call(e)}function wm(e,i,o){var f=e==null?0:e.length;return f?(o&&typeof o!="number"&&ct(e,i,o)?(i=0,o=f):(i=i==null?0:ae(i),o=o===n?f:ae(o)),Nt(e,i,o)):[]}function _m(e,i){return Wi(e,i)}function Pm(e,i,o){return Co(e,i,Q(o,2))}function km(e,i){var o=e==null?0:e.length;if(o){var f=Wi(e,i);if(f<o&&$t(e[f],i))return f}return-1}function Mm(e,i){return Wi(e,i,!0)}function Sm(e,i,o){return Co(e,i,Q(o,2),!0)}function Tm(e,i){var o=e==null?0:e.length;if(o){var f=Wi(e,i,!0)-1;if($t(e[f],i))return f}return-1}function Cm(e){return e&&e.length?gl(e):[]}function Im(e,i){return e&&e.length?gl(e,Q(i,2)):[]}function Am(e){var i=e==null?0:e.length;return i?Nt(e,1,i):[]}function Lm(e,i,o){return e&&e.length?(i=o||i===n?1:ae(i),Nt(e,0,i<0?0:i)):[]}function Em(e,i,o){var f=e==null?0:e.length;return f?(i=o||i===n?1:ae(i),i=f-i,Nt(e,i<0?0:i,f)):[]}function Nm(e,i){return e&&e.length?Ui(e,Q(i,3),!1,!0):[]}function Om(e,i){return e&&e.length?Ui(e,Q(i,3)):[]}var jm=fe(function(e){return wn(et(e,1,Ue,!0))}),Bm=fe(function(e){var i=Ot(e);return Ue(i)&&(i=n),wn(et(e,1,Ue,!0),Q(i,2))}),Fm=fe(function(e){var i=Ot(e);return i=typeof i=="function"?i:n,wn(et(e,1,Ue,!0),n,i)});function Rm(e){return e&&e.length?wn(e):[]}function Dm(e,i){return e&&e.length?wn(e,Q(i,2)):[]}function Wm(e,i){return i=typeof i=="function"?i:n,e&&e.length?wn(e,n,i):[]}function Go(e){if(!(e&&e.length))return[];var i=0;return e=pn(e,function(o){if(Ue(o))return i=Ye(o.length,i),!0}),co(i,function(o){return je(e,so(o))})}function tu(e,i){if(!(e&&e.length))return[];var o=Go(e);return i==null?o:je(o,function(f){return xt(i,n,f)})}var Um=fe(function(e,i){return Ue(e)?Dr(e,i):[]}),zm=fe(function(e){return Ao(pn(e,Ue))}),$m=fe(function(e){var i=Ot(e);return Ue(i)&&(i=n),Ao(pn(e,Ue),Q(i,2))}),qm=fe(function(e){var i=Ot(e);return i=typeof i=="function"?i:n,Ao(pn(e,Ue),n,i)}),Hm=fe(Go);function Gm(e,i){return bl(e||[],i||[],Rr)}function Km(e,i){return bl(e||[],i||[],zr)}var Vm=fe(function(e){var i=e.length,o=i>1?e[i-1]:n;return o=typeof o=="function"?(e.pop(),o):n,tu(e,o)});function nu(e){var i=v(e);return i.__chain__=!0,i}function Zm(e,i){return i(e),e}function Yi(e,i){return i(e)}var Ym=on(function(e){var i=e.length,o=i?e[0]:0,f=this.__wrapped__,g=function(x){return yo(x,e)};return i>1||this.__actions__.length||!(f instanceof pe)||!an(o)?this.thru(g):(f=f.slice(o,+o+(i?1:0)),f.__actions__.push({func:Yi,args:[g],thisArg:n}),new Lt(f,this.__chain__).thru(function(x){return i&&!x.length&&x.push(n),x}))});function Xm(){return nu(this)}function Jm(){return new Lt(this.value(),this.__chain__)}function Qm(){this.__values__===n&&(this.__values__=pu(this.value()));var e=this.__index__>=this.__values__.length,i=e?n:this.__values__[this.__index__++];return{done:e,value:i}}function eg(){return this}function tg(e){for(var i,o=this;o instanceof ji;){var f=Zl(o);f.__index__=0,f.__values__=n,i?g.__wrapped__=f:i=f;var g=f;o=o.__wrapped__}return g.__wrapped__=e,i}function ng(){var e=this.__wrapped__;if(e instanceof pe){var i=e;return this.__actions__.length&&(i=new pe(this)),i=i.reverse(),i.__actions__.push({func:Yi,args:[Ho],thisArg:n}),new Lt(i,this.__chain__)}return this.thru(Ho)}function rg(){return vl(this.__wrapped__,this.__actions__)}var ig=zi(function(e,i,o){_e.call(e,o)?++e[o]:rn(e,o,1)});function sg(e,i,o){var f=se(e)?Lc:Z0;return o&&ct(e,i,o)&&(i=n),f(e,Q(i,3))}function og(e,i){var o=se(e)?pn:tl;return o(e,Q(i,3))}var ag=Il(Yl),cg=Il(Xl);function lg(e,i){return et(Xi(e,i),1)}function ug(e,i){return et(Xi(e,i),Be)}function fg(e,i,o){return o=o===n?1:ae(o),et(Xi(e,i),o)}function ru(e,i){var o=se(e)?It:xn;return o(e,Q(i,3))}function iu(e,i){var o=se(e)?A1:el;return o(e,Q(i,3))}var dg=zi(function(e,i,o){_e.call(e,o)?e[o].push(i):rn(e,o,[i])});function hg(e,i,o,f){e=mt(e)?e:br(e),o=o&&!f?ae(o):0;var g=e.length;return o<0&&(o=Ye(g+o,0)),ns(e)?o<=g&&e.indexOf(i,o)>-1:!!g&&ar(e,i,o)>-1}var mg=fe(function(e,i,o){var f=-1,g=typeof i=="function",x=mt(e)?O(e.length):[];return xn(e,function(_){x[++f]=g?xt(i,_,o):Wr(_,i,o)}),x}),gg=zi(function(e,i,o){rn(e,o,i)});function Xi(e,i){var o=se(e)?je:al;return o(e,Q(i,3))}function pg(e,i,o,f){return e==null?[]:(se(i)||(i=i==null?[]:[i]),o=f?n:o,se(o)||(o=o==null?[]:[o]),fl(e,i,o))}var yg=zi(function(e,i,o){e[o?0:1].push(i)},function(){return[[],[]]});function vg(e,i,o){var f=se(e)?ro:jc,g=arguments.length<3;return f(e,Q(i,4),o,g,xn)}function bg(e,i,o){var f=se(e)?L1:jc,g=arguments.length<3;return f(e,Q(i,4),o,g,el)}function xg(e,i){var o=se(e)?pn:tl;return o(e,es(Q(i,3)))}function wg(e){var i=se(e)?Yc:hh;return i(e)}function _g(e,i,o){(o?ct(e,i,o):i===n)?i=1:i=ae(i);var f=se(e)?q0:mh;return f(e,i)}function Pg(e){var i=se(e)?H0:ph;return i(e)}function kg(e){if(e==null)return 0;if(mt(e))return ns(e)?lr(e):e.length;var i=st(e);return i==Dt||i==Wt?e.size:Po(e).length}function Mg(e,i,o){var f=se(e)?io:yh;return o&&ct(e,i,o)&&(i=n),f(e,Q(i,3))}var Sg=fe(function(e,i){if(e==null)return[];var o=i.length;return o>1&&ct(e,i[0],i[1])?i=[]:o>2&&ct(i[0],i[1],i[2])&&(i=[i[0]]),fl(e,et(i,1),[])}),Ji=o0||function(){return Qe.Date.now()};function Tg(e,i){if(typeof i!="function")throw new At(l);return e=ae(e),function(){if(--e<1)return i.apply(this,arguments)}}function su(e,i,o){return i=o?n:i,i=e&&i==null?e.length:i,sn(e,$,n,n,n,n,i)}function ou(e,i){var o;if(typeof i!="function")throw new At(l);return e=ae(e),function(){return--e>0&&(o=i.apply(this,arguments)),e<=1&&(i=n),o}}var Ko=fe(function(e,i,o){var f=L;if(o.length){var g=vn(o,yr(Ko));f|=N}return sn(e,f,i,o,g)}),au=fe(function(e,i,o){var f=L|T;if(o.length){var g=vn(o,yr(au));f|=N}return sn(i,f,e,o,g)});function cu(e,i,o){i=o?n:i;var f=sn(e,A,n,n,n,n,n,i);return f.placeholder=cu.placeholder,f}function lu(e,i,o){i=o?n:i;var f=sn(e,k,n,n,n,n,n,i);return f.placeholder=lu.placeholder,f}function uu(e,i,o){var f,g,x,_,M,E,B=0,F=!1,W=!1,H=!0;if(typeof e!="function")throw new At(l);i=jt(i)||0,Fe(o)&&(F=!!o.leading,W="maxWait"in o,x=W?Ye(jt(o.maxWait)||0,i):x,H="trailing"in o?!!o.trailing:H);function Y(ze){var qt=f,un=g;return f=g=n,B=ze,_=e.apply(un,qt),_}function ee(ze){return B=ze,M=Hr(he,i),F?Y(ze):_}function ce(ze){var qt=ze-E,un=ze-B,Iu=i-qt;return W?it(Iu,x-un):Iu}function te(ze){var qt=ze-E,un=ze-B;return E===n||qt>=i||qt<0||W&&un>=x}function he(){var ze=Ji();if(te(ze))return ye(ze);M=Hr(he,ce(ze))}function ye(ze){return M=n,H&&f?Y(ze):(f=g=n,_)}function kt(){M!==n&&xl(M),B=0,f=E=g=M=n}function lt(){return M===n?_:ye(Ji())}function Mt(){var ze=Ji(),qt=te(ze);if(f=arguments,g=this,E=ze,qt){if(M===n)return ee(E);if(W)return xl(M),M=Hr(he,i),Y(E)}return M===n&&(M=Hr(he,i)),_}return Mt.cancel=kt,Mt.flush=lt,Mt}var Cg=fe(function(e,i){return Qc(e,1,i)}),Ig=fe(function(e,i,o){return Qc(e,jt(i)||0,o)});function Ag(e){return sn(e,Z)}function Qi(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new At(l);var o=function(){var f=arguments,g=i?i.apply(this,f):f[0],x=o.cache;if(x.has(g))return x.get(g);var _=e.apply(this,f);return o.cache=x.set(g,_)||x,_};return o.cache=new(Qi.Cache||nn),o}Qi.Cache=nn;function es(e){if(typeof e!="function")throw new At(l);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function Lg(e){return ou(2,e)}var Eg=vh(function(e,i){i=i.length==1&&se(i[0])?je(i[0],wt(Q())):je(et(i,1),wt(Q()));var o=i.length;return fe(function(f){for(var g=-1,x=it(f.length,o);++g<x;)f[g]=i[g].call(this,f[g]);return xt(e,this,f)})}),Vo=fe(function(e,i){var o=vn(i,yr(Vo));return sn(e,N,n,i,o)}),fu=fe(function(e,i){var o=vn(i,yr(fu));return sn(e,U,n,i,o)}),Ng=on(function(e,i){return sn(e,V,n,n,n,i)});function Og(e,i){if(typeof e!="function")throw new At(l);return i=i===n?i:ae(i),fe(e,i)}function jg(e,i){if(typeof e!="function")throw new At(l);return i=i==null?0:Ye(ae(i),0),fe(function(o){var f=o[i],g=Pn(o,0,i);return f&&yn(g,f),xt(e,this,g)})}function Bg(e,i,o){var f=!0,g=!0;if(typeof e!="function")throw new At(l);return Fe(o)&&(f="leading"in o?!!o.leading:f,g="trailing"in o?!!o.trailing:g),uu(e,i,{leading:f,maxWait:i,trailing:g})}function Fg(e){return su(e,1)}function Rg(e,i){return Vo(Eo(i),e)}function Dg(){if(!arguments.length)return[];var e=arguments[0];return se(e)?e:[e]}function Wg(e){return Et(e,w)}function Ug(e,i){return i=typeof i=="function"?i:n,Et(e,w,i)}function zg(e){return Et(e,p|w)}function $g(e,i){return i=typeof i=="function"?i:n,Et(e,p|w,i)}function qg(e,i){return i==null||Jc(e,i,Je(i))}function $t(e,i){return e===i||e!==e&&i!==i}var Hg=Gi(xo),Gg=Gi(function(e,i){return e>=i}),Gn=il(function(){return arguments}())?il:function(e){return We(e)&&_e.call(e,"callee")&&!qc.call(e,"callee")},se=O.isArray,Kg=Mc?wt(Mc):th;function mt(e){return e!=null&&ts(e.length)&&!cn(e)}function Ue(e){return We(e)&&mt(e)}function Vg(e){return e===!0||e===!1||We(e)&&at(e)==Mr}var kn=c0||sa,Zg=Sc?wt(Sc):nh;function Yg(e){return We(e)&&e.nodeType===1&&!Gr(e)}function Xg(e){if(e==null)return!0;if(mt(e)&&(se(e)||typeof e=="string"||typeof e.splice=="function"||kn(e)||vr(e)||Gn(e)))return!e.length;var i=st(e);if(i==Dt||i==Wt)return!e.size;if(qr(e))return!Po(e).length;for(var o in e)if(_e.call(e,o))return!1;return!0}function Jg(e,i){return Ur(e,i)}function Qg(e,i,o){o=typeof o=="function"?o:n;var f=o?o(e,i):n;return f===n?Ur(e,i,n,o):!!f}function Zo(e){if(!We(e))return!1;var i=at(e);return i==hi||i==_d||typeof e.message=="string"&&typeof e.name=="string"&&!Gr(e)}function ep(e){return typeof e=="number"&&Gc(e)}function cn(e){if(!Fe(e))return!1;var i=at(e);return i==mi||i==Qa||i==wd||i==kd}function du(e){return typeof e=="number"&&e==ae(e)}function ts(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Xe}function Fe(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function We(e){return e!=null&&typeof e=="object"}var hu=Tc?wt(Tc):ih;function tp(e,i){return e===i||_o(e,i,Do(i))}function np(e,i,o){return o=typeof o=="function"?o:n,_o(e,i,Do(i),o)}function rp(e){return mu(e)&&e!=+e}function ip(e){if(Uh(e))throw new ie(c);return sl(e)}function sp(e){return e===null}function op(e){return e==null}function mu(e){return typeof e=="number"||We(e)&&at(e)==Tr}function Gr(e){if(!We(e)||at(e)!=en)return!1;var i=Ci(e);if(i===null)return!0;var o=_e.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&ki.call(o)==n0}var Yo=Cc?wt(Cc):sh;function ap(e){return du(e)&&e>=-Xe&&e<=Xe}var gu=Ic?wt(Ic):oh;function ns(e){return typeof e=="string"||!se(e)&&We(e)&&at(e)==Ir}function Pt(e){return typeof e=="symbol"||We(e)&&at(e)==gi}var vr=Ac?wt(Ac):ah;function cp(e){return e===n}function lp(e){return We(e)&&st(e)==Ar}function up(e){return We(e)&&at(e)==Sd}var fp=Gi(ko),dp=Gi(function(e,i){return e<=i});function pu(e){if(!e)return[];if(mt(e))return ns(e)?Ut(e):ht(e);if(Nr&&e[Nr])return q1(e[Nr]());var i=st(e),o=i==Dt?uo:i==Wt?wi:br;return o(e)}function ln(e){if(!e)return e===0?e:0;if(e=jt(e),e===Be||e===-Be){var i=e<0?-1:1;return i*Bn}return e===e?e:0}function ae(e){var i=ln(e),o=i%1;return i===i?o?i-o:i:0}function yu(e){return e?zn(ae(e),0,oe):0}function jt(e){if(typeof e=="number")return e;if(Pt(e))return ir;if(Fe(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Fe(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Bc(e);var o=Kd.test(e);return o||Zd.test(e)?T1(e.slice(2),o?2:8):Gd.test(e)?ir:+e}function vu(e){return Zt(e,gt(e))}function hp(e){return e?zn(ae(e),-Xe,Xe):e===0?e:0}function we(e){return e==null?"":_t(e)}var mp=gr(function(e,i){if(qr(i)||mt(i)){Zt(i,Je(i),e);return}for(var o in i)_e.call(i,o)&&Rr(e,o,i[o])}),bu=gr(function(e,i){Zt(i,gt(i),e)}),rs=gr(function(e,i,o,f){Zt(i,gt(i),e,f)}),gp=gr(function(e,i,o,f){Zt(i,Je(i),e,f)}),pp=on(yo);function yp(e,i){var o=mr(e);return i==null?o:Xc(o,i)}var vp=fe(function(e,i){e=Me(e);var o=-1,f=i.length,g=f>2?i[2]:n;for(g&&ct(i[0],i[1],g)&&(f=1);++o<f;)for(var x=i[o],_=gt(x),M=-1,E=_.length;++M<E;){var B=_[M],F=e[B];(F===n||$t(F,fr[B])&&!_e.call(e,B))&&(e[B]=x[B])}return e}),bp=fe(function(e){return e.push(n,Bl),xt(xu,n,e)});function xp(e,i){return Ec(e,Q(i,3),Vt)}function wp(e,i){return Ec(e,Q(i,3),bo)}function _p(e,i){return e==null?e:vo(e,Q(i,3),gt)}function Pp(e,i){return e==null?e:nl(e,Q(i,3),gt)}function kp(e,i){return e&&Vt(e,Q(i,3))}function Mp(e,i){return e&&bo(e,Q(i,3))}function Sp(e){return e==null?[]:Ri(e,Je(e))}function Tp(e){return e==null?[]:Ri(e,gt(e))}function Xo(e,i,o){var f=e==null?n:$n(e,i);return f===n?o:f}function Cp(e,i){return e!=null&&Dl(e,i,X0)}function Jo(e,i){return e!=null&&Dl(e,i,J0)}var Ip=Ll(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=Mi.call(i)),e[i]=o},ea(pt)),Ap=Ll(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=Mi.call(i)),_e.call(e,i)?e[i].push(o):e[i]=[o]},Q),Lp=fe(Wr);function Je(e){return mt(e)?Zc(e):Po(e)}function gt(e){return mt(e)?Zc(e,!0):ch(e)}function Ep(e,i){var o={};return i=Q(i,3),Vt(e,function(f,g,x){rn(o,i(f,g,x),f)}),o}function Np(e,i){var o={};return i=Q(i,3),Vt(e,function(f,g,x){rn(o,g,i(f,g,x))}),o}var Op=gr(function(e,i,o){Di(e,i,o)}),xu=gr(function(e,i,o,f){Di(e,i,o,f)}),jp=on(function(e,i){var o={};if(e==null)return o;var f=!1;i=je(i,function(x){return x=_n(x,e),f||(f=x.length>1),x}),Zt(e,Fo(e),o),f&&(o=Et(o,p|b|w,Ih));for(var g=i.length;g--;)Io(o,i[g]);return o});function Bp(e,i){return wu(e,es(Q(i)))}var Fp=on(function(e,i){return e==null?{}:uh(e,i)});function wu(e,i){if(e==null)return{};var o=je(Fo(e),function(f){return[f]});return i=Q(i),dl(e,o,function(f,g){return i(f,g[0])})}function Rp(e,i,o){i=_n(i,e);var f=-1,g=i.length;for(g||(g=1,e=n);++f<g;){var x=e==null?n:e[Yt(i[f])];x===n&&(f=g,x=o),e=cn(x)?x.call(e):x}return e}function Dp(e,i,o){return e==null?e:zr(e,i,o)}function Wp(e,i,o,f){return f=typeof f=="function"?f:n,e==null?e:zr(e,i,o,f)}var _u=Ol(Je),Pu=Ol(gt);function Up(e,i,o){var f=se(e),g=f||kn(e)||vr(e);if(i=Q(i,4),o==null){var x=e&&e.constructor;g?o=f?new x:[]:Fe(e)?o=cn(x)?mr(Ci(e)):{}:o={}}return(g?It:Vt)(e,function(_,M,E){return i(o,_,M,E)}),o}function zp(e,i){return e==null?!0:Io(e,i)}function $p(e,i,o){return e==null?e:yl(e,i,Eo(o))}function qp(e,i,o,f){return f=typeof f=="function"?f:n,e==null?e:yl(e,i,Eo(o),f)}function br(e){return e==null?[]:lo(e,Je(e))}function Hp(e){return e==null?[]:lo(e,gt(e))}function Gp(e,i,o){return o===n&&(o=i,i=n),o!==n&&(o=jt(o),o=o===o?o:0),i!==n&&(i=jt(i),i=i===i?i:0),zn(jt(e),i,o)}function Kp(e,i,o){return i=ln(i),o===n?(o=i,i=0):o=ln(o),e=jt(e),Q0(e,i,o)}function Vp(e,i,o){if(o&&typeof o!="boolean"&&ct(e,i,o)&&(i=o=n),o===n&&(typeof i=="boolean"?(o=i,i=n):typeof e=="boolean"&&(o=e,e=n)),e===n&&i===n?(e=0,i=1):(e=ln(e),i===n?(i=e,e=0):i=ln(i)),e>i){var f=e;e=i,i=f}if(o||e%1||i%1){var g=Kc();return it(e+g*(i-e+S1("1e-"+((g+"").length-1))),i)}return So(e,i)}var Zp=pr(function(e,i,o){return i=i.toLowerCase(),e+(o?ku(i):i)});function ku(e){return Qo(we(e).toLowerCase())}function Mu(e){return e=we(e),e&&e.replace(Xd,D1).replace(p1,"")}function Yp(e,i,o){e=we(e),i=_t(i);var f=e.length;o=o===n?f:zn(ae(o),0,f);var g=o;return o-=i.length,o>=0&&e.slice(o,g)==i}function Xp(e){return e=we(e),e&&Ld.test(e)?e.replace(nc,W1):e}function Jp(e){return e=we(e),e&&Fd.test(e)?e.replace(Ks,"\\$&"):e}var Qp=pr(function(e,i,o){return e+(o?"-":"")+i.toLowerCase()}),e2=pr(function(e,i,o){return e+(o?" ":"")+i.toLowerCase()}),t2=Cl("toLowerCase");function n2(e,i,o){e=we(e),i=ae(i);var f=i?lr(e):0;if(!i||f>=i)return e;var g=(i-f)/2;return Hi(Ei(g),o)+e+Hi(Li(g),o)}function r2(e,i,o){e=we(e),i=ae(i);var f=i?lr(e):0;return i&&f<i?e+Hi(i-f,o):e}function i2(e,i,o){e=we(e),i=ae(i);var f=i?lr(e):0;return i&&f<i?Hi(i-f,o)+e:e}function s2(e,i,o){return o||i==null?i=0:i&&(i=+i),d0(we(e).replace(Vs,""),i||0)}function o2(e,i,o){return(o?ct(e,i,o):i===n)?i=1:i=ae(i),To(we(e),i)}function a2(){var e=arguments,i=we(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var c2=pr(function(e,i,o){return e+(o?"_":"")+i.toLowerCase()});function l2(e,i,o){return o&&typeof o!="number"&&ct(e,i,o)&&(i=o=n),o=o===n?oe:o>>>0,o?(e=we(e),e&&(typeof i=="string"||i!=null&&!Yo(i))&&(i=_t(i),!i&&cr(e))?Pn(Ut(e),0,o):e.split(i,o)):[]}var u2=pr(function(e,i,o){return e+(o?" ":"")+Qo(i)});function f2(e,i,o){return e=we(e),o=o==null?0:zn(ae(o),0,e.length),i=_t(i),e.slice(o,o+i.length)==i}function d2(e,i,o){var f=v.templateSettings;o&&ct(e,i,o)&&(i=n),e=we(e),i=rs({},i,f,jl);var g=rs({},i.imports,f.imports,jl),x=Je(g),_=lo(g,x),M,E,B=0,F=i.interpolate||pi,W="__p += '",H=fo((i.escape||pi).source+"|"+F.source+"|"+(F===rc?Hd:pi).source+"|"+(i.evaluate||pi).source+"|$","g"),Y="//# sourceURL="+(_e.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++w1+"]")+`
`;e.replace(H,function(te,he,ye,kt,lt,Mt){return ye||(ye=kt),W+=e.slice(B,Mt).replace(Jd,U1),he&&(M=!0,W+=`' +
__e(`+he+`) +
'`),lt&&(E=!0,W+=`';
`+lt+`;
__p += '`),ye&&(W+=`' +
((__t = (`+ye+`)) == null ? '' : __t) +
'`),B=Mt+te.length,te}),W+=`';
`;var ee=_e.call(i,"variable")&&i.variable;if(!ee)W=`with (obj) {
`+W+`
}
`;else if($d.test(ee))throw new ie(u);W=(E?W.replace(Td,""):W).replace(Cd,"$1").replace(Id,"$1;"),W="function("+(ee||"obj")+`) {
`+(ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(M?", __e = _.escape":"")+(E?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+W+`return __p
}`;var ce=Tu(function(){return be(x,Y+"return "+W).apply(n,_)});if(ce.source=W,Zo(ce))throw ce;return ce}function h2(e){return we(e).toLowerCase()}function m2(e){return we(e).toUpperCase()}function g2(e,i,o){if(e=we(e),e&&(o||i===n))return Bc(e);if(!e||!(i=_t(i)))return e;var f=Ut(e),g=Ut(i),x=Fc(f,g),_=Rc(f,g)+1;return Pn(f,x,_).join("")}function p2(e,i,o){if(e=we(e),e&&(o||i===n))return e.slice(0,Wc(e)+1);if(!e||!(i=_t(i)))return e;var f=Ut(e),g=Rc(f,Ut(i))+1;return Pn(f,0,g).join("")}function y2(e,i,o){if(e=we(e),e&&(o||i===n))return e.replace(Vs,"");if(!e||!(i=_t(i)))return e;var f=Ut(e),g=Fc(f,Ut(i));return Pn(f,g).join("")}function v2(e,i){var o=K,f=Ae;if(Fe(i)){var g="separator"in i?i.separator:g;o="length"in i?ae(i.length):o,f="omission"in i?_t(i.omission):f}e=we(e);var x=e.length;if(cr(e)){var _=Ut(e);x=_.length}if(o>=x)return e;var M=o-lr(f);if(M<1)return f;var E=_?Pn(_,0,M).join(""):e.slice(0,M);if(g===n)return E+f;if(_&&(M+=E.length-M),Yo(g)){if(e.slice(M).search(g)){var B,F=E;for(g.global||(g=fo(g.source,we(ic.exec(g))+"g")),g.lastIndex=0;B=g.exec(F);)var W=B.index;E=E.slice(0,W===n?M:W)}}else if(e.indexOf(_t(g),M)!=M){var H=E.lastIndexOf(g);H>-1&&(E=E.slice(0,H))}return E+f}function b2(e){return e=we(e),e&&Ad.test(e)?e.replace(tc,V1):e}var x2=pr(function(e,i,o){return e+(o?" ":"")+i.toUpperCase()}),Qo=Cl("toUpperCase");function Su(e,i,o){return e=we(e),i=o?n:i,i===n?$1(e)?X1(e):O1(e):e.match(i)||[]}var Tu=fe(function(e,i){try{return xt(e,n,i)}catch(o){return Zo(o)?o:new ie(o)}}),w2=on(function(e,i){return It(i,function(o){o=Yt(o),rn(e,o,Ko(e[o],e))}),e});function _2(e){var i=e==null?0:e.length,o=Q();return e=i?je(e,function(f){if(typeof f[1]!="function")throw new At(l);return[o(f[0]),f[1]]}):[],fe(function(f){for(var g=-1;++g<i;){var x=e[g];if(xt(x[0],this,f))return xt(x[1],this,f)}})}function P2(e){return V0(Et(e,p))}function ea(e){return function(){return e}}function k2(e,i){return e==null||e!==e?i:e}var M2=Al(),S2=Al(!0);function pt(e){return e}function ta(e){return ol(typeof e=="function"?e:Et(e,p))}function T2(e){return cl(Et(e,p))}function C2(e,i){return ll(e,Et(i,p))}var I2=fe(function(e,i){return function(o){return Wr(o,e,i)}}),A2=fe(function(e,i){return function(o){return Wr(e,o,i)}});function na(e,i,o){var f=Je(i),g=Ri(i,f);o==null&&!(Fe(i)&&(g.length||!f.length))&&(o=i,i=e,e=this,g=Ri(i,Je(i)));var x=!(Fe(o)&&"chain"in o)||!!o.chain,_=cn(e);return It(g,function(M){var E=i[M];e[M]=E,_&&(e.prototype[M]=function(){var B=this.__chain__;if(x||B){var F=e(this.__wrapped__),W=F.__actions__=ht(this.__actions__);return W.push({func:E,args:arguments,thisArg:e}),F.__chain__=B,F}return E.apply(e,yn([this.value()],arguments))})}),e}function L2(){return Qe._===this&&(Qe._=r0),this}function ra(){}function E2(e){return e=ae(e),fe(function(i){return ul(i,e)})}var N2=Oo(je),O2=Oo(Lc),j2=Oo(io);function Cu(e){return Uo(e)?so(Yt(e)):fh(e)}function B2(e){return function(i){return e==null?n:$n(e,i)}}var F2=El(),R2=El(!0);function ia(){return[]}function sa(){return!1}function D2(){return{}}function W2(){return""}function U2(){return!0}function z2(e,i){if(e=ae(e),e<1||e>Xe)return[];var o=oe,f=it(e,oe);i=Q(i),e-=oe;for(var g=co(f,i);++o<e;)i(o);return g}function $2(e){return se(e)?je(e,Yt):Pt(e)?[e]:ht(Vl(we(e)))}function q2(e){var i=++t0;return we(e)+i}var H2=qi(function(e,i){return e+i},0),G2=jo("ceil"),K2=qi(function(e,i){return e/i},1),V2=jo("floor");function Z2(e){return e&&e.length?Fi(e,pt,xo):n}function Y2(e,i){return e&&e.length?Fi(e,Q(i,2),xo):n}function X2(e){return Oc(e,pt)}function J2(e,i){return Oc(e,Q(i,2))}function Q2(e){return e&&e.length?Fi(e,pt,ko):n}function ey(e,i){return e&&e.length?Fi(e,Q(i,2),ko):n}var ty=qi(function(e,i){return e*i},1),ny=jo("round"),ry=qi(function(e,i){return e-i},0);function iy(e){return e&&e.length?ao(e,pt):0}function sy(e,i){return e&&e.length?ao(e,Q(i,2)):0}return v.after=Tg,v.ary=su,v.assign=mp,v.assignIn=bu,v.assignInWith=rs,v.assignWith=gp,v.at=pp,v.before=ou,v.bind=Ko,v.bindAll=w2,v.bindKey=au,v.castArray=Dg,v.chain=nu,v.chunk=Vh,v.compact=Zh,v.concat=Yh,v.cond=_2,v.conforms=P2,v.constant=ea,v.countBy=ig,v.create=yp,v.curry=cu,v.curryRight=lu,v.debounce=uu,v.defaults=vp,v.defaultsDeep=bp,v.defer=Cg,v.delay=Ig,v.difference=Xh,v.differenceBy=Jh,v.differenceWith=Qh,v.drop=em,v.dropRight=tm,v.dropRightWhile=nm,v.dropWhile=rm,v.fill=im,v.filter=og,v.flatMap=lg,v.flatMapDeep=ug,v.flatMapDepth=fg,v.flatten=Jl,v.flattenDeep=sm,v.flattenDepth=om,v.flip=Ag,v.flow=M2,v.flowRight=S2,v.fromPairs=am,v.functions=Sp,v.functionsIn=Tp,v.groupBy=dg,v.initial=lm,v.intersection=um,v.intersectionBy=fm,v.intersectionWith=dm,v.invert=Ip,v.invertBy=Ap,v.invokeMap=mg,v.iteratee=ta,v.keyBy=gg,v.keys=Je,v.keysIn=gt,v.map=Xi,v.mapKeys=Ep,v.mapValues=Np,v.matches=T2,v.matchesProperty=C2,v.memoize=Qi,v.merge=Op,v.mergeWith=xu,v.method=I2,v.methodOf=A2,v.mixin=na,v.negate=es,v.nthArg=E2,v.omit=jp,v.omitBy=Bp,v.once=Lg,v.orderBy=pg,v.over=N2,v.overArgs=Eg,v.overEvery=O2,v.overSome=j2,v.partial=Vo,v.partialRight=fu,v.partition=yg,v.pick=Fp,v.pickBy=wu,v.property=Cu,v.propertyOf=B2,v.pull=pm,v.pullAll=eu,v.pullAllBy=ym,v.pullAllWith=vm,v.pullAt=bm,v.range=F2,v.rangeRight=R2,v.rearg=Ng,v.reject=xg,v.remove=xm,v.rest=Og,v.reverse=Ho,v.sampleSize=_g,v.set=Dp,v.setWith=Wp,v.shuffle=Pg,v.slice=wm,v.sortBy=Sg,v.sortedUniq=Cm,v.sortedUniqBy=Im,v.split=l2,v.spread=jg,v.tail=Am,v.take=Lm,v.takeRight=Em,v.takeRightWhile=Nm,v.takeWhile=Om,v.tap=Zm,v.throttle=Bg,v.thru=Yi,v.toArray=pu,v.toPairs=_u,v.toPairsIn=Pu,v.toPath=$2,v.toPlainObject=vu,v.transform=Up,v.unary=Fg,v.union=jm,v.unionBy=Bm,v.unionWith=Fm,v.uniq=Rm,v.uniqBy=Dm,v.uniqWith=Wm,v.unset=zp,v.unzip=Go,v.unzipWith=tu,v.update=$p,v.updateWith=qp,v.values=br,v.valuesIn=Hp,v.without=Um,v.words=Su,v.wrap=Rg,v.xor=zm,v.xorBy=$m,v.xorWith=qm,v.zip=Hm,v.zipObject=Gm,v.zipObjectDeep=Km,v.zipWith=Vm,v.entries=_u,v.entriesIn=Pu,v.extend=bu,v.extendWith=rs,na(v,v),v.add=H2,v.attempt=Tu,v.camelCase=Zp,v.capitalize=ku,v.ceil=G2,v.clamp=Gp,v.clone=Wg,v.cloneDeep=zg,v.cloneDeepWith=$g,v.cloneWith=Ug,v.conformsTo=qg,v.deburr=Mu,v.defaultTo=k2,v.divide=K2,v.endsWith=Yp,v.eq=$t,v.escape=Xp,v.escapeRegExp=Jp,v.every=sg,v.find=ag,v.findIndex=Yl,v.findKey=xp,v.findLast=cg,v.findLastIndex=Xl,v.findLastKey=wp,v.floor=V2,v.forEach=ru,v.forEachRight=iu,v.forIn=_p,v.forInRight=Pp,v.forOwn=kp,v.forOwnRight=Mp,v.get=Xo,v.gt=Hg,v.gte=Gg,v.has=Cp,v.hasIn=Jo,v.head=Ql,v.identity=pt,v.includes=hg,v.indexOf=cm,v.inRange=Kp,v.invoke=Lp,v.isArguments=Gn,v.isArray=se,v.isArrayBuffer=Kg,v.isArrayLike=mt,v.isArrayLikeObject=Ue,v.isBoolean=Vg,v.isBuffer=kn,v.isDate=Zg,v.isElement=Yg,v.isEmpty=Xg,v.isEqual=Jg,v.isEqualWith=Qg,v.isError=Zo,v.isFinite=ep,v.isFunction=cn,v.isInteger=du,v.isLength=ts,v.isMap=hu,v.isMatch=tp,v.isMatchWith=np,v.isNaN=rp,v.isNative=ip,v.isNil=op,v.isNull=sp,v.isNumber=mu,v.isObject=Fe,v.isObjectLike=We,v.isPlainObject=Gr,v.isRegExp=Yo,v.isSafeInteger=ap,v.isSet=gu,v.isString=ns,v.isSymbol=Pt,v.isTypedArray=vr,v.isUndefined=cp,v.isWeakMap=lp,v.isWeakSet=up,v.join=hm,v.kebabCase=Qp,v.last=Ot,v.lastIndexOf=mm,v.lowerCase=e2,v.lowerFirst=t2,v.lt=fp,v.lte=dp,v.max=Z2,v.maxBy=Y2,v.mean=X2,v.meanBy=J2,v.min=Q2,v.minBy=ey,v.stubArray=ia,v.stubFalse=sa,v.stubObject=D2,v.stubString=W2,v.stubTrue=U2,v.multiply=ty,v.nth=gm,v.noConflict=L2,v.noop=ra,v.now=Ji,v.pad=n2,v.padEnd=r2,v.padStart=i2,v.parseInt=s2,v.random=Vp,v.reduce=vg,v.reduceRight=bg,v.repeat=o2,v.replace=a2,v.result=Rp,v.round=ny,v.runInContext=I,v.sample=wg,v.size=kg,v.snakeCase=c2,v.some=Mg,v.sortedIndex=_m,v.sortedIndexBy=Pm,v.sortedIndexOf=km,v.sortedLastIndex=Mm,v.sortedLastIndexBy=Sm,v.sortedLastIndexOf=Tm,v.startCase=u2,v.startsWith=f2,v.subtract=ry,v.sum=iy,v.sumBy=sy,v.template=d2,v.times=z2,v.toFinite=ln,v.toInteger=ae,v.toLength=yu,v.toLower=h2,v.toNumber=jt,v.toSafeInteger=hp,v.toString=we,v.toUpper=m2,v.trim=g2,v.trimEnd=p2,v.trimStart=y2,v.truncate=v2,v.unescape=b2,v.uniqueId=q2,v.upperCase=x2,v.upperFirst=Qo,v.each=ru,v.eachRight=iu,v.first=Ql,na(v,function(){var e={};return Vt(v,function(i,o){_e.call(v.prototype,o)||(e[o]=i)}),e}(),{chain:!1}),v.VERSION=s,It(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){v[e].placeholder=v}),It(["drop","take"],function(e,i){pe.prototype[e]=function(o){o=o===n?1:Ye(ae(o),0);var f=this.__filtered__&&!i?new pe(this):this.clone();return f.__filtered__?f.__takeCount__=it(o,f.__takeCount__):f.__views__.push({size:it(o,oe),type:e+(f.__dir__<0?"Right":"")}),f},pe.prototype[e+"Right"]=function(o){return this.reverse()[e](o).reverse()}}),It(["filter","map","takeWhile"],function(e,i){var o=i+1,f=o==ge||o==q;pe.prototype[e]=function(g){var x=this.clone();return x.__iteratees__.push({iteratee:Q(g,3),type:o}),x.__filtered__=x.__filtered__||f,x}}),It(["head","last"],function(e,i){var o="take"+(i?"Right":"");pe.prototype[e]=function(){return this[o](1).value()[0]}}),It(["initial","tail"],function(e,i){var o="drop"+(i?"":"Right");pe.prototype[e]=function(){return this.__filtered__?new pe(this):this[o](1)}}),pe.prototype.compact=function(){return this.filter(pt)},pe.prototype.find=function(e){return this.filter(e).head()},pe.prototype.findLast=function(e){return this.reverse().find(e)},pe.prototype.invokeMap=fe(function(e,i){return typeof e=="function"?new pe(this):this.map(function(o){return Wr(o,e,i)})}),pe.prototype.reject=function(e){return this.filter(es(Q(e)))},pe.prototype.slice=function(e,i){e=ae(e);var o=this;return o.__filtered__&&(e>0||i<0)?new pe(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),i!==n&&(i=ae(i),o=i<0?o.dropRight(-i):o.take(i-e)),o)},pe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},pe.prototype.toArray=function(){return this.take(oe)},Vt(pe.prototype,function(e,i){var o=/^(?:filter|find|map|reject)|While$/.test(i),f=/^(?:head|last)$/.test(i),g=v[f?"take"+(i=="last"?"Right":""):i],x=f||/^find/.test(i);g&&(v.prototype[i]=function(){var _=this.__wrapped__,M=f?[1]:arguments,E=_ instanceof pe,B=M[0],F=E||se(_),W=function(he){var ye=g.apply(v,yn([he],M));return f&&H?ye[0]:ye};F&&o&&typeof B=="function"&&B.length!=1&&(E=F=!1);var H=this.__chain__,Y=!!this.__actions__.length,ee=x&&!H,ce=E&&!Y;if(!x&&F){_=ce?_:new pe(this);var te=e.apply(_,M);return te.__actions__.push({func:Yi,args:[W],thisArg:n}),new Lt(te,H)}return ee&&ce?e.apply(this,M):(te=this.thru(W),ee?f?te.value()[0]:te.value():te)})}),It(["pop","push","shift","sort","splice","unshift"],function(e){var i=_i[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",f=/^(?:pop|shift)$/.test(e);v.prototype[e]=function(){var g=arguments;if(f&&!this.__chain__){var x=this.value();return i.apply(se(x)?x:[],g)}return this[o](function(_){return i.apply(se(_)?_:[],g)})}}),Vt(pe.prototype,function(e,i){var o=v[i];if(o){var f=o.name+"";_e.call(hr,f)||(hr[f]=[]),hr[f].push({name:i,func:o})}}),hr[$i(n,T).name]=[{name:"wrapper",func:n}],pe.prototype.clone=b0,pe.prototype.reverse=x0,pe.prototype.value=w0,v.prototype.at=Ym,v.prototype.chain=Xm,v.prototype.commit=Jm,v.prototype.next=Qm,v.prototype.plant=tg,v.prototype.reverse=ng,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=rg,v.prototype.first=v.prototype.head,Nr&&(v.prototype[Nr]=eg),v},ur=J1();Rn?((Rn.exports=ur)._=ur,eo._=ur):Qe._=ur}).call(Kr)})(Ns,Ns.exports);var Ve=Ns.exports,gn=(t=>(t[t.one=0]="one",t[t.some=1]="some",t))(gn||{});class rr{static scaleList(){}static findNumber(r){return r.find(n=>n!==void 0&&n>=0)}static countLeadingSpaces(r){const n=r.match(/^\s*/);return n?n[0].length:0}static removeUnnecessaryInitials(r){return r.replace(/ +$/gm,"").replace(/\/\/.*$/gm,"").replace(/ +$/gm,"")}static samplesToTimeWithArray(r){r||(r=0);const n=Math.ceil(r%1e3),s=Math.ceil(r/1e3),a=s%60,c=Math.floor(s/60),l=a===0?"00":a<10?"0"+a:a,u=n===0?"000":n<10?"00"+n:n<100?"0"+n:n;return{min:""+c,sec:""+l,msec:""+u}}static findStartTabObjByLineNumber(r,n){for(let s=0;s<r.length;s++){const a=r[s];if(a.syntaxLocation.line>=n)return{to:a,index:s}}return{to:null,index:-1}}}function ba(t,r){for(let n=0;n<t.length;n++){const s=t[n];if(s.syntaxLocation.line===r.line&&s.syntaxLocation.linePos<r.column&&r.column<=s.syntaxLocation.endPos)return n}return-1}const a5=()=>{const t=Qt(),r=R.useRef(null),n=R.useRef(null);return gd(a=>a.cursorLocation,a=>{r.current=a}),{refreshLocationCB:R.useCallback(a=>{var u;if(a&&(n.current=a),!n.current||!r.current||le.getState().syntaxError.info!==null)return;const l=c5(n.current,r.current);Ve.isEqual(l.scale,le.getState().currentScale)||t(l.scale?ay(l.scale):cy()),Ve.isEqual(l.braceStyles,le.getState().currentBraceStyles)||t(l.braceStyles?ly(l.braceStyles):uy()),Ve.isEqual(l.blockStyle,le.getState().currentBlockStyle)||t(l.blockStyle?fy(l.blockStyle):dy()),l.notes?Ve.isEqual(l.notes,le.getState().currentNotes)||t(hy(l.notes)):t(my()),(u=l.region)!=null&&u.region&&!Ve.isEqual(l.region.region,le.getState().clRegion.region)&&t(l.region.region?gy(l.region.region):py()),Ve.isEqual(l.noteStyle,le.getState().currentNoteStyle)||t(l.noteStyle?yy(l.noteStyle):vy()),t(l.bendData?by(l.bendData.bend):xy()),t(l.slideData?wy(l.slideData.slide):_y())},[])}};function c5(t,r){const n={},s=vt.searchLocationInfo(t,r);if(s!==null){const a=t.locationInfoList[s];u5(t,n,r,a,s)}else{const a=vt.getBraceStyles(t,n,r);a&&l5(t,n,a),f5(t,n,r)}return n}function l5(t,r,n){r.scale=vt.getScaleFromBraceStyles(t,n)}function u5(t,r,n,s,a){switch(s.type){case Ft.note:{Sn(t,r,s);const c=vt.getBraceStyles(t,r,n),l=t.mixesList[s.dualId].flatTOList.filter(m=>{var p;return(p=m.locationIndexes)==null?void 0:p.includes(a)});if(!l.length)return;vt.getScaleFromTabObj(t,r,l[0],c);const u=vt.getStyleFromStyleObjectBank(t,s);r.noteStyle={styles:u};const d=ba(l,n),h=l[d<0?0:d];if(ds(r,h),d===-1&&l[0].isArpeggio&&(r.notes.tab=r.notes.activeBows=xa(l)),l[0].styles.bd){const m=Vr(l[0].bar,l[0].styles.bd);m.length&&(r.bendData={bend:m})}hs(t,s.dualId,l,d,h,r);break}case Ft.bullet:{Sn(t,r,s);const c=vt.getBraceStyles(t,r,n),l=t.mixesList[s.dualId].flatTOList.filter(m=>{var p;return(p=m.locationIndexes)==null?void 0:p.includes(a)});if(!l.length)return;vt.getScaleFromTabObj(t,r,l[0],c);const d=((m,p)=>{for(let b=0;b<m.length;b++){const w=m[b];if(w.syntaxLocation.line===p.line&&w.syntaxLocation.linePos<=p.column&&p.column<=w.syntaxLocation.endPos)return b}return-1})(l,n),h=l[d<0?0:d];if(ds(r,h),d===-1){const m=(r.notes.noteSym||"-").replace(/^.+?>>|:.+?$/sg,"");r.notes.chord=m.length>22?m.substring(0,20)+"..":m}if(h!=null&&h.styles.bd){const m=Vr(h.bar,h.styles.bd);m.length&&(r.bendData={bend:m})}hs(t,s.dualId,l,d,h,r);break}case Ft.degreeName:{Sn(t,r,s);const c=vt.getBraceStyles(t,r,n),l=t.mixesList[s.dualId].flatTOList.filter(h=>{var m;return(m=h.locationIndexes)==null?void 0:m.includes(a)});if(!l.length)return;vt.getScaleFromTabObj(t,r,l[0],c);const u=ba(l,n),d=l[u<0?0:u];if(ds(r,d),l[0].shifted&&u===-1&&(r.notes.tab=r.notes.activeBows=xa(l)),l[0].styles.bd){const h=Vr(l[0].bar,l[0].styles.bd);h.length&&(r.bendData={bend:h})}hs(t,s.dualId,l,u,d,r);break}case Ft.style:{Sn(t,r,s);const c=vt.getBraceStyles(t,r,n),l=t.mixesList[s.dualId].flatTOList.filter(m=>{var p;return(p=m.locationIndexes)==null?void 0:p.includes(a)});if(!l.length)return;vt.getScaleFromTabObj(t,r,l[0],c);const u=vt.getStyleFromStyleObjectBank(t,s);r.noteStyle={styles:u};const d=ba(l,n),h=l[d<0?0:d];if(ds(r,h),d===-1&&l[0].isArpeggio&&(r.notes.tab=r.notes.activeBows=xa(l)),h.isBullet){const m=(r.notes.noteSym||"-").replace(/:.+?$/sg,"");r.notes.chord=m.length>22?m.substring(0,20)+"..":m}if(h.styles.bd){const m=Vr(h.bar,h.styles.bd);m.length&&(r.bendData={bend:m})}hs(t,s.dualId,l,d,h,r);break}case Ft.blockStyle:{Sn(t,r,s);const c=vt.getStyleFromStyleObjectBank(t,s);if(r.blockStyle={styles:c},c.scaleX&&(r.scale={isValid:!0,name:c.scaleX.key+" "+c.scaleX.scale,key:c.scaleX.key,bin:c.scaleX.bin}),c.bd){const l=Vr({startTick:480,stopTick:2400,fretStartTicks:[480],fretStopTicks:[2400],tick:1920},c.bd);r.bendData={bend:l}}break}case Ft.regionStart:{Sn(t,r,s);break}case Ft.regionProp:{Sn(t,r,s);break}case Ft.flash:{Sn(t,r,s);break}default:throw"noteblock"}}function xa(t){const r=[...t[0].tab],n=t[0].shifted?t[0].shifted[0].shift:void 0;for(let s=0;s<t.length;s++){const a=t[s];if((a.shifted?a.shifted[0].shift:void 0)!==n)break;a.tab.forEach((l,u)=>{l!==void 0&&l>=0&&(r[u]=l)})}return r}function f5(t,r,n){for(let s=0;s<t.mixesList.length;s++){const a=t.mixesList[s].regionList;for(let c=0;c<a.length;c++){const l=a[c];if(!l.start||!l.end)continue;const u={line:l.start.line,linePos:l.start.linePos,endLine:l.end.line,endPos:l.end.linePos};if(!(n.line<u.line||u.endLine<n.line)){if(u.line===u.endLine){if(u.linePos<=n.column&&n.column<u.endPos){r.region={region:l};return}}else if(u.line===n.line&&u.linePos<=n.column||u.endLine===n.line&&n.column<u.endPos||u.line<n.line&&n.line<u.endLine){r.region={region:l};return}}}}}function Sn(t,r,n){const s=t.mixesList[n.dualId].regionList[n.regionId];r.region={region:s}}function ds(t,r){if(!r)return;const n={tabObjId:r.tabObjId,isValid:!0,noteSym:r.noteStr,chord:r.note,tab:r.tab,trueTab:r.trueTab||r.tab,activeBows:r.activeBows,until:r.untilNext,tick:r.bar,style:r.styles};t.notes=n}function hs(t,r,n,s,a,c){const l=s===-1?n.find(h=>h.styles.slide!==void 0):a,u=s===-1?n.find(h=>h.styles.approach!==void 0):a;if(!l&&!u)return;const d=l&&l.styles.slide?Wb(t,t.mixesList[r].marks,l,l.styles.slide):null;if(d&&l&&u&&u.styles.approach&&l.tabObjId===u.tabObjId){const h=Ku(t,t.mixesList[r].marks,d[0],u.styles.approach,d);h&&(c.slideData={slide:ms(h,gn.one)})}else{const h=u&&u.styles.approach?Ku(t,t.mixesList[r].marks,u,u.styles.approach):null;if(d&&d.length&&(!h||!h.length))c.slideData={slide:ms(d,gn.one)};else if(h&&h.length&&(!d||!d.length))c.slideData={slide:ms(h,gn.one)};else{if(!d||!h)return;c.slideData={slide:ms([...h,...d],gn.some)}}}}function ms(t,r){const n=rr.findNumber,s={approachList:[],slideList:[],viewType:r};let a,c,l;return t.forEach(u=>{if(u.slideTrueType===4){const d=n(u.bar.fretStartTicks),h=n(u.bar.fretStopTicks),m=u.velocity.find(b=>b!==void 0)||0,p=n(u.tab);d!==void 0&&h!==void 0&&m!==void 0&&(s.approachList.push({startTick:d,endTick:h,velocity:m,fret:p}),s.totalStartTick||(s.totalStartTick=d),s.middleStartTick=h,a=n(u.tab))}else if(s.viewType===gn.one&&(u.slideTrueType===1||u.slideTrueType===2)){s.totalStartTick||(s.totalStartTick=n(u.bar.fretStartTicks)||u.bar.startTick),s.middleStartTick||(s.middleStartTick=u.bar.startTick),s.totalEndTick=u.bar.stopTick,s.middleEndTick=n(u.bar.fretStopTicks)||u.bar.stopTick;const d=n(u.tab);d!==void 0&&a!==void 0&&(s.approachUp=d>a),c=d}else if(s.viewType===gn.some&&u.slideTrueType===2){s.middleEndTick=u.bar.stopTick;const d=n(u.tab);d!==void 0&&a!==void 0&&(s.approachUp=d>a)}else if(s.viewType===gn.some&&u.slideTrueType===1)s.middleStartTick=u.bar.startTick,c=n(u.tab)||n(u.activeBows);else if(u.slideTrueType===3){const d=u.bar.fretStartTicks.find(b=>b!==void 0),h=u.bar.fretStopTicks.find(b=>b!==void 0),m=u.velocity.find(b=>b!==void 0)||1,p=u.tab.find(b=>b!==void 0);d!==void 0&&h!==void 0&&m!==void 0&&(s.slideList.push({startTick:d,endTick:h,velocity:m,fret:p}),s.totalEndTick=h),l=p}}),c!==void 0&&l!==void 0&&(s.slideUp=c<l),s.slideList.length&&s.middleEndTick>s.slideList[0].startTick&&(s.middleEndTick=s.slideList[0].startTick),s}class de{constructor(){this._editorId="customSyntax",this.editorInstance={}}static editorId(){return de.instance||(de.instance=new de),this.instance._editorId}static setEditorInstance(r){de.instance||(de.instance=new de),this.instance.editorInstance=r}static getEditor(){return de.instance||(de.instance=new de),de.instance.editorInstance}static getInstance(){return de.instance||(de.instance=new de),de.instance}}const d5={"decoration-error":"_decoration-error_12g5p_1","decoration-lineNumber":"_decoration-lineNumber_12g5p_6"};var Yn=(t=>(t.Error="error",t.LineNumber="lineNumber",t.PlaySymDual_0="playSymDual_0",t.PlaySymDual_1="playSymDual_1",t.PlaySymDual_2="playSymDual_2",t))(Yn||{});const Xa=class Xa{static set(r,n,s){const{monaco:a,editor:c}=de.getEditor(),l=[{range:new a.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn),options:{inlineClassName:s!==void 0?s:d5["decoration-"+r]}}],u=c.deltaDecorations([],l);this.queueStore[r]=[...this.queueStore[r],u[0]]}static clear(r){if(this.queueStore[r].length===0)return;const{editor:n}=de.getEditor();n.deltaDecorations(this.queueStore[r],[]),this.queueStore[r]=[]}};Xa.queueStore={error:[],lineNumber:[],playSymDual_0:[],playSymDual_1:[],playSymDual_2:[]};let Ln=Xa;class Te{constructor(){this.playingObj=null,this.playingVersion=-1,this.playingSyntax=null,this.editingVersion=0}static setPlayingMidi(r){this.instance||(this.instance=new Te),this.instance.playingMidi=r}static getPlayingMidi(){return this.instance||(this.instance=new Te),this.instance.playingMidi}static setPlayObj(r){this.instance||(this.instance=new Te),this.instance.playingObj=r}static getPlayObj(){return this.instance||(this.instance=new Te),this.instance.playingObj}static setPlayingSyntax(r){this.instance||(this.instance=new Te),r&&(this.instance.playingSyntax=rr.removeUnnecessaryInitials(r))}static comparisonPlayingSyntax(r){return this.instance||(this.instance=new Te),this.instance.playingSyntax===r}static incrementEditVersion(){this.instance||(this.instance=new Te),this.instance.editingVersion++,this.dispatchVersionMatched()}static setVersionOfEditToPlay(){this.instance||(this.instance=new Te),this.instance.playingVersion=this.instance.editingVersion,this.dispatchVersionMatched()}static dispatchVersionMatched(){this.instance||(this.instance=new Te);const r=this.instance.editingVersion===this.instance.playingVersion,n=le.getState().syntaxMatchVersion.matched;r!==n&&le.dispatch(Py({matched:r}))}}class Ie{static jumpToLine(r){const n=de.getEditor().editor;n&&n.revealLineInCenter(r,1)}static lineNumberClickHandler(){const{editor:r,monaco:n}=de.getEditor();r.onMouseDown(s=>{var a,c,l,u,d,h,m,p;if(s.target.type===n.editor.MouseTargetType.GUTTER_LINE_NUMBERS){const b=(a=s.target.position)==null?void 0:a.lineNumber;if(!le.getState().syntaxMatchVersion.matched)return;const P=Te.getPlayObj();if(!P)return;let S=0;for(let L=0;L<Qn.dualLength;L++){const T=P.mixesList[L].flatTOList;if(T.length){const C=rr.findStartTabObjByLineNumber(T,b);C.to&&(S===0&&((c=C.to)!=null&&c.bar.startTick)?(S=(l=C.to)==null?void 0:l.bar.startTick,(u=C.to)==null||u.bar.fretStartTicks.forEach(A=>{A!==void 0&&A<S&&(S=A)})):S!==0&&((d=C.to)!=null&&d.bar.startTick)&&((h=C.to)==null?void 0:h.bar.startTick)<S&&(S=(m=C.to)==null?void 0:m.bar.startTick,(p=C.to)==null||p.bar.fretStartTicks.forEach(A=>{A!==void 0&&A<S&&(S=A)})))}}ve.getInstance().setSeek(S)}})}static setErrorDecoration(r){var n;r&&r.line>0&&(r.linePos>0&&r.token!==null?Ln.set(Yn.Error,{startLineNumber:r.line,startColumn:r.linePos,endLineNumber:r.line,endColumn:r.linePos+r.token.length}):Ln.set(Yn.Error,{startLineNumber:r.line,startColumn:1,endLineNumber:r.line,endColumn:r.linePos+(((n=r.token)==null?void 0:n.length)||1)}))}static clearErrorDecoration(){Ln.clear(Yn.Error)}static setPlaySymDecoration(r,n,s){const a=Yn["PlaySymDual_"+r];Ln.set(a,n,s||"decoration-playSym")}static clearPlaySymDecoration(r){const n=Yn["PlaySymDual_"+r];Ln.clear(n)}static clearAllPlaySymDecoration(){for(let r=0;r<Jt.dualLength;r++){const n=Yn["PlaySymDual_"+r];Ln.clear(n)}}static setEditorFontsize(r){de.getEditor().editor.updateOptions({fontSize:r}),On.setItem(jn.FontSize,r.toString())}static getEditorFontsize(){const r=parseInt(On.getItem(jn.FontSize)||"0");return r||(this.setEditorFontsize(Qn.defaultEditorFontSize),Qn.defaultEditorFontSize)}}function h5(t){return new Worker("/axentax-playground/assets/worker-for-compile-DX8ddWYK.js",{name:t==null?void 0:t.name})}var tt=[];for(var wa=0;wa<256;++wa)tt.push((wa+256).toString(16).slice(1));function m5(t,r=0){return(tt[t[r+0]]+tt[t[r+1]]+tt[t[r+2]]+tt[t[r+3]]+"-"+tt[t[r+4]]+tt[t[r+5]]+"-"+tt[t[r+6]]+tt[t[r+7]]+"-"+tt[t[r+8]]+tt[t[r+9]]+"-"+tt[t[r+10]]+tt[t[r+11]]+tt[t[r+12]]+tt[t[r+13]]+tt[t[r+14]]+tt[t[r+15]]).toLowerCase()}var gs,g5=new Uint8Array(16);function p5(){if(!gs&&(gs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gs(g5)}var y5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const yf={randomUUID:y5};function Ya(t,r,n){if(yf.randomUUID&&!r&&!t)return yf.randomUUID();t=t||{};var s=t.random||(t.rng||p5)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,m5(s)}class Gt{constructor(){this.compileWorker=new h5,this.callbackBranch=new Map}static getInstance(){return Gt.instance||(Gt.instance=new Gt,Gt.instance.compileWorker.onmessage=r=>{const n=Gt.instance.callbackBranch.get(r.data.id);if(!n)throw"Unknown worker response callback. id: "+r.data.id;n(r.data)}),Gt.instance}setMessage(r,n){r.id=r.id?r.id:Ya(),this.callbackBranch.set(r.id,n),Gt.instance.compileWorker.postMessage(r)}}const v5=t=>{const r=Qt(),n=R.useRef(""),s=R.useRef(null);return{editedCB:()=>{r(Mf({isSaved:!1})),Ie.clearAllPlaySymDecoration(),le.dispatch(Ts({key:"existAnnotationCompose",value:!1}));const c=de.getEditor().editor.getValue(),l=rr.removeUnnecessaryInitials(c);n.current!==l&&(n.current=l,Te.comparisonPlayingSyntax(l)?Te.setVersionOfEditToPlay():Te.incrementEditVersion(),s.current!==null&&(clearTimeout(s.current),s.current=null),s.current=window.setTimeout(()=>{Gt.getInstance().setMessage({hasStyleCompile:!1,hasMidiCompile:!1,syntax:de.getEditor().editor.getValue()},u=>{var h,m,p,b;const d=le.getState().syntaxError;if(u.error)(u.error.message!==((h=d.info)==null?void 0:h.message)||u.error.line!==((m=d.info)==null?void 0:m.line)||u.error.linePos!==((p=d.info)==null?void 0:p.linePos)||u.error.token!==((b=d.info)==null?void 0:b.token))&&(le.dispatch(Au()),Ie.clearErrorDecoration(),le.dispatch(ky({message:u.error.message,line:u.error.line,linePos:u.error.linePos,token:u.error.token||""})),Ie.setErrorDecoration(u.error));else if(u.response)le.dispatch(Au()),Ie.clearErrorDecoration(),u.response.flash.other.filter(w=>w.name==="@compose").length&&le.dispatch(Ts({key:"existAnnotationCompose",value:!0})),u.error||t(u.response);else throw"system error by editedCB"})},150))}}};function b5(t,r,n){const s=t.getModel();if(!s)return;const a=t.getSelection();if(!a)return;const c=s.getLineContent(a.startLineNumber);n.changes.forEach(u=>{const{text:d,range:h}=u;d==="{"?(t.executeEdits("",[{range:new r.Range(h.startLineNumber,h.startColumn+1,h.startLineNumber,h.startColumn+1),text:"}",forceMoveMarkers:!0}]),t.setPosition({lineNumber:a.startLineNumber,column:a.startColumn})):d==="("?(t.executeEdits("",[{range:new r.Range(h.startLineNumber,h.startColumn+1,h.startLineNumber,h.startColumn+1),text:")",forceMoveMarkers:!0}]),t.setPosition({lineNumber:a.startLineNumber,column:a.startColumn})):d==="@"&&!c.match("{")&&c[a.startColumn-3]+c[a.startColumn-2]==="@@"&&!le.getState().currentScale.isValid&&(t.executeEdits("",[{range:new r.Range(a.startLineNumber,a.startColumn,a.startLineNumber,a.startColumn),text:" {}",forceMoveMarkers:!0}]),t.setPosition({lineNumber:a.startLineNumber,column:a.startColumn+2}))})}function x5(t,r,n,s){if(n.keyCode===r.KeyCode.Enter){const a=t.getModel();if(a){const c=t.getPosition();if(!c)return;const l=a.getLineContent(c.lineNumber),u=l[c.column-2],d=l[c.column-1],h=rr.countLeadingSpaces(l);if(u==="{"&&d==="}"){n.preventDefault();const m=t.getSelection();m&&(t.executeEdits("",[{range:new r.Range(m.startLineNumber,m.startColumn,m.startLineNumber,m.startColumn),text:`
`+" ".repeat(h+s)+`
`+" ".repeat(h),forceMoveMarkers:!0}]),t.setPosition({lineNumber:m.startLineNumber+1,column:m.startColumn+h+s}))}}}}var Rt=(t=>(t.Dark="dark",t.Light="light",t))(Rt||{});function w5(t){const r=de.getEditor().monaco;if(!r)throw"Editor is not ready";const n={annotation:"bc58a8",annotationCompose:"59bd42",annotationComposeValue:"0d9756",style:{name:"40a8fa",value:"bd9745",valueTag:"a66a2a",valueLight:"bd9745",nameDark:"40a8fa"},step:{valueLight:"98833f"},setting:{name:"bc58a8",value:"bd9745"},region:{mark:"ffff00",prop:"a8a825"},dual:{mark:"d0ba0b",prop:"9a893b"}};switch(t){case Rt.Dark:{r.editor.defineTheme("customTheme",{base:"vs-dark",inherit:!0,colors:{"editor.background":"#1e1e1e","editor.foreground":"#d4d4d4","editor.selectionBackground":"#264f78","editor.lineHighlightBackground":"#2d2d2d","editorCursor.foreground":"#ffffff","editor.wordHighlightBackground":"#575757","editor.wordHighlightStrongBackground":"#9a5b4f","editorBracketMatch.background":"#006400","editorBracketMatch.border":"#98c379"},rules:[{token:"keyword",foreground:"569cd6"},{token:"all-comment",foreground:"ff0000"},{token:"approach-separate",foreground:"888888"},{token:"region",foreground:n.region.mark},{token:"region.prop",foreground:n.region.prop},{token:"dual",foreground:n.dual.mark},{token:"dual.prop",foreground:n.dual.prop},{token:"annotation-click",foreground:n.annotation},{token:"annotation-offset",foreground:n.annotation},{token:"annotation.compose",foreground:n.annotationCompose},{token:"annotation.compose.value",foreground:n.annotationComposeValue},{token:"setting-name",foreground:n.setting.name},{token:"setting-value",foreground:n.setting.value},{token:"style.start",foreground:n.style.name},{token:"style.end",foreground:n.style.name},{token:"style.value",foreground:n.style.valueLight},{token:"style.value.light",foreground:n.style.valueLight},{token:"step.start",foreground:n.style.name},{token:"step.end",foreground:n.style.name},{token:"step.number",foreground:n.step.valueLight},{token:"step.value",foreground:n.step.valueLight},{token:"bend.start",foreground:n.style.name},{token:"bend.end",foreground:n.style.name},{token:"bend.sep.number",foreground:n.style.value},{token:"bend.number",foreground:n.style.valueLight},{token:"bend.tag",foreground:n.style.valueTag},{token:"bend.value",foreground:n.style.valueLight},{token:"etc-style",foreground:n.style.name},{token:"etc-style-dark",foreground:n.style.nameDark}]}),r.editor.setTheme("customTheme");break}case Rt.Light:{r.editor.defineTheme("customLightTheme",{base:"vs",inherit:!0,colors:{"editor.background":"#ffffff","editor.foreground":"#333333","editor.selectionBackground":"#add6ff","editor.lineHighlightBackground":"#f7f7f7","editorCursor.foreground":"#000000","editor.wordHighlightBackground":"#b4d5ff","editor.wordHighlightStrongBackground":"#82b0ff","editorBracketMatch.background":"#f0f0f0","editorBracketMatch.border":"#c0c0c0"},rules:[{token:"keyword",foreground:"569cd6"},{token:"all-comment",foreground:"ff0000"},{token:"approach-separate",foreground:"888888"},{token:"region",foreground:n.region.mark},{token:"region.prop",foreground:n.region.prop},{token:"dual",foreground:n.dual.mark},{token:"dual.prop",foreground:n.dual.prop},{token:"annotation-click",foreground:n.annotation},{token:"annotation-offset",foreground:n.annotation},{token:"annotation.compose",foreground:n.annotationCompose},{token:"annotation.compose.value",foreground:n.annotationComposeValue},{token:"setting-name",foreground:n.setting.name},{token:"setting-value",foreground:n.setting.value},{token:"style.start",foreground:n.style.name},{token:"style.end",foreground:n.style.name},{token:"style.value",foreground:n.style.valueLight},{token:"style.value.light",foreground:n.style.valueLight},{token:"step.start",foreground:n.style.name},{token:"step.end",foreground:n.style.name},{token:"step.number",foreground:n.step.valueLight},{token:"step.value",foreground:n.step.valueLight},{token:"bend.start",foreground:n.style.name},{token:"bend.end",foreground:n.style.name},{token:"bend.sep.number",foreground:n.style.value},{token:"bend.number",foreground:n.style.valueLight},{token:"bend.tag",foreground:n.style.valueTag},{token:"bend.value",foreground:n.style.valueLight},{token:"etc-style",foreground:n.style.name},{token:"etc-style-dark",foreground:n.style.nameDark}]}),r.editor.setTheme("customLightTheme");break}}}function _5(t){w5(t)}const Ja=class Ja{static apply(r=null){const n=r||On.getItem(jn.Theme)||this.DefaultTheme;document.body.className=n,_5(n),On.setItem(jn.Theme,n)}};Ja.DefaultTheme=Rt.Dark;let Os=Ja;function P5(t){const r=le.getState().statusOfSettings.indentSpaceLevel;let n=0,s=0,a=!1,c=!1,l="",u="",d=null;const h={"}":"{",")":"(","]":"["},m=[];for(let p=0;p<t.length;p++){const b=t[p],w=t[p+1];if(b===`
`){if(s>0){const P=" ".repeat(n*r);n++,l+=P+_a(u)+`
`}else if(s<0){n>0&&n--;const P=" ".repeat(n*r);l+=P+_a(u)+`
`}else{const P=n+(d?-1:0),S=" ".repeat((P<0?0:P)*r);l+=S+_a(u)+`
`}u="",a=!1,s=0,d=null;continue}if(!c&&b==="/"&&w==="/"&&(a=!0),!a&&b==="/"&&w==="*"&&(c=!0),c&&b==="*"&&w==="/"){c=!1,u+="*/",p++;continue}!a&&!c&&(b==="{"&&d===null&&(d=!1),b==="}"&&d===null&&(d=!0),/\{|\(|\[/.test(b)?(m.push(b),s++):/\}|\)|\]/.test(b)&&m[m.length-1]===h[b]&&(m.pop(),s--)),u+=b}return l}function _a(t){return[{rule:/@@\s+|@@(\S)/g,str:"@@ $1"},{rule:/([^r|\d])>>/g,str:"$1 >>"},{rule:/\s+:/g,str:":"},{rule:/\(\s+/g,str:"("},{rule:/\s+\)/g,str:")"},{rule:/([^{}\s]){/g,str:"$1 {"},{rule:/{([^\s{}])/g,str:"{ $1"},{rule:/([^\s{}}])\}/g,str:"$1 }"},{rule:/}([^\s{}}:])/g,str:"} $1"},{rule:/\s+/g,str:" "},{rule:/(\S)\/\//g,str:"$1 //"},{rule:/(\S)\/\*/g,str:"$1 /*"},{rule:/\*\/(\S)/g,str:"*/ $1"}].forEach(n=>{t=t.replace(n.rule,n.str)}),t.trim()}function k5(t,r,n,s,a){const c=(p,b,w)=>w.substring(p-b-2,p-2),u=((p,b)=>b.substring(p-3,p-2))(r.column,n),d=c(r.column,3,n);return u===" "||u==="{"||/^[\d|r]>>$/.test(d)?[{label:"||||| basic tab",kind:t.languages.CompletionItemKind.Color,insertText:"$1||||",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:s,documentation:"tab",command:{id:a,title:"document"}}]:[]}const M5=["C","C#","Db","D","D#","E","Fb","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"].reverse(),S5=["","m","6","m6","7","m7","9","m9","11","m11","13","m13","maj7","mmaj7","maj7#5","dim","dim7","aug","aug7","add9","add13","sus2","sus4"],T5=M5.flatMap(t=>S5.map(r=>t+r));function C5(t,r,n){const s=r.getWordUntilPosition(n),a={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:s.startColumn,endColumn:s.endColumn},c=r.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column}),u=((d,h)=>h.substring(d-3,d-2))(n.column,c);return u===" "||u==="{"||u==="'"||c===s.word?T5.map(d=>({label:d,kind:t.languages.CompletionItemKind.Function,insertText:d,range:a})):[]}function I5(t,r,n){const s=r.getWordUntilPosition(n),a={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:s.startColumn,endColumn:s.endColumn},c=r.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column}),u=((d,h)=>h.substring(d-3,d-2))(n.column,c);return u===" "||u==="{"||c===s.word?[{label:"@offset",kind:t.languages.CompletionItemKind.Color,insertText:"offset",range:a,documentation:"offset"},{label:"@compose()",kind:t.languages.CompletionItemKind.Event,insertText:"compose($1)",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:a,documentation:"compose"},{label:"@/compose()",kind:t.languages.CompletionItemKind.Event,insertText:"/compose($1)",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:a,documentation:"compose end"},{label:"@click",kind:t.languages.CompletionItemKind.Color,insertText:"click",range:a,documentation:"click"},{label:"@click()",kind:t.languages.CompletionItemKind.Color,insertText:"click($1)",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:a,documentation:"click"},{label:"@/click",kind:t.languages.CompletionItemKind.Color,insertText:"/click",range:a,documentation:"click stop"}]:[]}const A5=["1","2","3","4","5","6","7"].reverse(),L5=[""],E5=A5.flatMap(t=>L5.map(r=>t+r));function N5(t,r,n){const s=r.getWordUntilPosition(n),a={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:s.startColumn,endColumn:s.endColumn},c=r.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column}),u=((d,h)=>h.substring(d-3,d-2))(n.column,c);return u===" "||u==="{"||c===s.word?E5.map(d=>({label:"%"+d,kind:t.languages.CompletionItemKind.Function,insertText:d,range:a})):[]}const O5=[{insert:"bpm(100..200)",doc:""},{insert:"bpm(..200)",doc:""},{insert:"scale(C major)",doc:""},{insert:"scale(C diminish)",doc:""},{insert:"scale(C halfDiminish)",doc:""},{insert:"scale(C pentatonic)",doc:""},{insert:"scale(C melodicMinor)",doc:""},{insert:"scale(C harmonicMinor)",doc:""},{insert:"scale(C 100100100100)",doc:""}],j5=[{insert:"bd(vib$1)",doc:""},{insert:"bd(0..2/8 1, 2.. -2)",doc:""},{insert:"delay($1)",doc:""},{insert:"staccato($1)",doc:""},{insert:"degree(E melodic minor)",doc:""},{insert:"degree(E harmonic minor 7th mode 3th)",doc:""},{insert:"leg",doc:""},{insert:"step(f$1)",doc:"is docs"},{insert:"step(f..62345)",doc:"is docs"},{insert:"step((25.)5m5m5m5m5m5m)",doc:"is docs"},{insert:"step(162534f.)",doc:"is docs"},{insert:"step((16)5^2^f~~~)",doc:"is docs"},{insert:"step(DuduD.du)",doc:"is docs"},{insert:"step(DDD^u^d^u^)",doc:"is docs"},{insert:"step(DDD=u=d=U=d=u=)",doc:"is docs"},{insert:"map(*4)",doc:""},{insert:"map(0, 2, 4, 6)",doc:""},{insert:"map(0..3)",doc:""},{insert:"map(0 step 2 * 4)",doc:""},{insert:"map(0 step 2 * 4 ss)",doc:"mapping with stay string"},{insert:"map(0 step 2 * 4 sos)",doc:"mapping with stay open string"},{insert:"to",doc:""},{insert:"to($12/8)",doc:""},{insert:"to&",doc:""},{insert:"1/4",doc:""},{insert:"4/4",doc:""},{insert:"1/3",doc:""},{insert:"1/6",doc:""},{insert:"1/8",doc:""},{insert:"1/12",doc:""},{insert:"1/16",doc:""},{insert:"v65",doc:""},{insert:"v($1|||||)",doc:""},{insert:"v($165|65|65|65|65|65)",doc:""},{insert:"v($155|60|65|75|65|55)",doc:""},{insert:"stroke(off)",doc:""}];function B5(t,r,n){const s={startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:n.lineNumber,endColumn:n.column},a=r.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column}),l=((m,p)=>p.substring(m-3,m-2))(n.column,a),u=r.getWordUntilPosition(n);return[...j5,...l==="}"||l===" "||a===u.word?O5:[]].map(m=>{const p={label:":"+m.insert.replace(/\$1/,""),kind:t.languages.CompletionItemKind.Color,insertText:m.insert,range:s,documentation:m.doc};return/\$1/.test(m.insert)&&(p.insertTextRules=t.languages.CompletionItemInsertTextRule.InsertAsSnippet),p})}const F5=[{insert:"set.style.degree: C major",doc:""},{insert:"set.style.degree: C harmonic minor 7th mode 3th",doc:""},{insert:"set.style.scale: C major",doc:""},{insert:"set.style.scale: C diminish",doc:""},{insert:"set.style.scale: C halfDiminish",doc:""},{insert:"set.style.scale: C pentatonic",doc:""},{insert:"set.style.scale: C melodicMinor",doc:""},{insert:"set.style.scale: C harmonicMinor",doc:""},{insert:"set.style.scale: C 101010101010",doc:""},{insert:"set.style.scale: C 100100100100",doc:""},{insert:"set.style.tuning: E|A|D|G|B|E",doc:"6 strings normal tuning"},{insert:"set.style.tuning: D|G|C|F|A|D",doc:"6 strings low tuning"},{insert:"set.style.tuning: C#|F#|B|E|A|D|G|B|E",doc:"9 string normal tuning"},{insert:"set.style.tuning: D|G|C|F|A#|D#|G#|C|F",doc:"9 strings must low tuning"},{insert:"set.style.tuning: C#|F#|B|E|A|D|G|B|E",doc:"9 strings must hi tuning"},{insert:"set.style.until: 4/4",doc:""},{insert:"set.style.bpm: 120",doc:""},{insert:"set.dual.pan: true",doc:""},{insert:"set.dual.panning: [0.5, 0, 1]",doc:""},{insert:"set.click.until: 1/4",doc:""},{insert:"set.click.inst: 42 // 36 37 42",doc:""},{insert:"set.click.velocity: 65",doc:""},{insert:"set.click.accent: 0",doc:""},{insert:"set.play.velocities: 80|75|70|60|55|62|62|55|45",doc:""},{insert:"set.play.velocities: $1|||||",doc:""},{insert:"set.play.strum.defaultStrumWidthMSec: 30",doc:""},{insert:"set.play.strum.velocity: 70",doc:""}];function R5(t,r,n){const s=r.getWordUntilPosition(n),a={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:s.startColumn,endColumn:s.endColumn},c=r.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column});return/^\s*s/.test(c)?F5.map(u=>{const d={label:u.insert.replace(/\$1/,""),kind:t.languages.CompletionItemKind.Color,insertText:u.insert,range:a,documentation:u.doc};return/\$1/.test(u.insert)&&(d.insertTextRules=t.languages.CompletionItemInsertTextRule.InsertAsSnippet),d}):[]}class D5{static init(r,n,s){n.languages.registerCompletionItemProvider(s,{provideCompletionItems:(a,c)=>{const l=a.getWordUntilPosition(c);return le.getState().currentScale.isValid?/^[CDEFGABcdefgab]/.test(l.word)?{suggestions:C5(n,a,c)}:{suggestions:[]}:{suggestions:R5(n,a,c)}}}),n.languages.registerCompletionItemProvider(s,{triggerCharacters:["@",":","|","0","%"],provideCompletionItems:function(a,c){const l=r.addCommand(-1,()=>{r.setPosition({lineNumber:c.lineNumber,column:c.column-1})}),u=a.getValueInRange({startLineNumber:c.lineNumber,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column}),d={startLineNumber:c.lineNumber,startColumn:c.column,endLineNumber:c.lineNumber,endColumn:c.column};let h=[];return u.endsWith(":")&&(console.log("is style"),h=B5(n,a,c)),le.getState().currentScale.isValid?(u.endsWith("%")?h=N5(n,a,c):u.endsWith("@")?h=I5(n,a,c):u.endsWith("|")&&(h=k5(n,c,u,d,l)),{suggestions:h}):{suggestions:h}}})}}class W5{static init(r,n){r.languages.setMonarchTokensProvider(n,{tokenizer:{root:[[/(^|\s)(@{2})/,"region","@region"],[/(^|\s)(>>)/,"dual","@dual"],[/(\S)(>>)(\S)/,["",{token:"approach-separate"},""]],[/(?:@\/?(click(?:\([^)]+\))?))/,{token:"annotation-click",next:"@popall"}],[/(?:@(offset))/,{token:"annotation-offset",next:"@popall"}],[/(?:@(compose))\(/,{token:"annotation.compose",next:"@compose"}],[/(set\.[^:]+:)(.+?)(?=\/\/|\/\*|$)/,[{token:"setting-name"},{token:"setting-value"}]],[/\/\/.*$/,"comment"],[/(\/\*)/,{token:"comment",next:"@comment"}],[new RegExp("(?<!\\/\\/\\s*)__end__\\b"),{token:"all-comment",next:"@commentMode"}],[/:step\(/,"step.start","@stepper"],[/:bd\(/,"bend.start","@bend"],[/:[\w]+&?\(|:%\(/,"style.start","@style"],[/:\d+\/\d+/,"etc-style-dark","@popall"],[/:\w+&?/,"etc-style","@popall"]],commentMode:[[/.*$/,"comment"]],region:[[/\/\/.*$/,"comment"],[/(\/\*)/,{token:"comment",next:"@innerComment"}],[/\{/,"","@pop"],[/./,"region.prop"]],dual:[[/\/\/.*$/,"comment"],[/(\/\*)/,{token:"comment",next:"@innerComment"}],[/\{/,"","@pop"],[/./,"dual.prop"]],style:[[/\/\/.*$/,"comment"],[/(\/\*)/,{token:"comment",next:"@innerComment"}],[/\(/,"style.start","@stepper"],[/\)/,"style.end","@pop"],[/./,"style.value"]],compose:[[/\/\/.*$/,"comment"],[/(\/\*)/,{token:"comment",next:"@innerComment"}],[/\(/,"annotation.compose","@compose"],[/\)/,"annotation.compose","@pop"],[/./,"annotation.compose.value"]],stepper:[[/\/\/.*$/,"comment"],[/(\/\*)/,{token:"comment",next:"@innerComment"}],[/\(/,"step.start","@stepper"],[/\)/,"step.end","@pop"],[/./,"style.value.light"]],bend:[[/\/\/.*$/,"comment"],[/(\/\*)/,{token:"comment",next:"@innerComment"}],[/\)/,"bend.end","@pop"],[/\/\d+/,"bend.sep.number"],[/\d+/,"bend.number"],[/cho|vib|ast|reset/,"bend.tag"],[/./,"bend.value"]],comment:[[/[^/*]+/,"comment"],[/\*\//,{token:"comment",next:"@popall"}],[/[/*]/,"comment"]],innerComment:[[/[^/*]+/,"comment"],[/\*\//,{token:"comment",next:"@pop"}],[/[/*]/,"comment"]]}})}}const U5=`set.style.until: 1/3
set.style.scale: C major
set.click.velocity: 18

// sample
@@ {
  r:0/1:bd(reset)
  2|>>22|~~~:to(6/8):bd(../16 vib 0.5)
}

// sample
@@ {
  0|0|0|0|0|0:1/24:step(dud)
  Edim7~~~:to:bd(0..0 0, 4.. 1)
} >> {
  {
    ||12||:1/24:map(0 step 2 * 4):to
  }:map(0..4):scale(B minor):v85
  
  ||||13~:to(low):bd(.. 1)
} >> {
  {
    |9||:1/24:map(0 step 2 * 4):to
  }:map(0..4):scale(B minor):v85
  |||||15~:to(low):bd(.. 2)
}

// sample
@@ 1/8 160 {
  C7 /|||||5>>|||||7~~~:to(low) C7~~
  Fmaj7:stroke(1/8) /|||||5>>|||||7~~~:delay(1/4):to(low) Fmaj7~~:stroke(1/8)
  G7:stroke(1/8) /|||||3>>|||||6~~~:delay(1/4):to(low) G7~~:stroke(1/8)
  C7 /|||||5>>|||||10~~~:to(low)
  C#dim~~
}

// sample
@@ 1/8 160 {
  |0|5|5:step((543n.)5):m |0|7|7:step(fn.555):m
  |0|4|7:step(fn.5):m |0|3|5:step(fn.555):m
  |0|3|4:step((543n.)5):m |0|3|3|3:step(fn.555):m
  |0|5|5:step((543n.)5):m |0|7|7:step(fn.555):m
  |0|5|5:step((543n.)5):M |0|7|7:step(fn.555):M
  |0|4|7:step(fn.5):M |0|3|5:step(fn.555):M
  |0|3|4:step((543n.)5):M |0|3|3|3:step(fn.555):M
  |0|5|5:step((543n.)5):M |0|7|7:step(fn.555..):M
}

// sample
@@ 3/3 200 {
  ''Fm7:staccato(15/16)
  ''G7:staccato(15/16)
  @click(1/6)
  '''''Bm7b5~:to:bd(0..0 0, 4.. vib 0.17)
  @/click
}:v80

@@ 1/3 {
  1|:map(0 step -7 * 3):to:1/6
  @offset
  C:step((16)3^46^5..):v(88|88|88|77|66|55):1/3
  {
    C^:v65 C~~~~~~~~:v55:to(hi!4/8)
  }:v65
}
`,z5=re.memo(t=>{const r=Qt(),n=R.useRef(null),s=R.useRef(null),{refreshLocationCB:a}=a5(),{editedCB:c}=v5(a);R.useEffect(()=>()=>{n.current&&(n.current.dispose(),console.log("Editor instance disposed"))},[]);const l=()=>{c()},u=m=>{m.languages.registerDocumentFormattingEditProvider(de.editorId(),{provideDocumentFormattingEdits(p){const b=p.getValue(),w=P5(b);return[{range:p.getFullModelRange(),text:w}]}})},d=(m,p)=>{s.current=p,n.current=m,$5(m,p),t.mountedCB(),l(),m.onDidChangeCursorPosition(b=>{const{lineNumber:w,column:P}=b.position;r(My({line:w,column:P})),a()})};let h=On.getItem(jn.SyntaxWhenClose);return h||(h=U5),y.jsx(Gv,{defaultLanguage:de.editorId(),height:"100%",theme:"customTheme",options:{fontSize:Qn.defaultEditorFontSize,automaticLayout:!0},defaultValue:h,beforeMount:u,onMount:d,onChange:l})}),$5=(t,r)=>{de.setEditorInstance({editor:t,monaco:r}),Os.apply(),Ie.setEditorFontsize(parseInt(On.getItem(jn.FontSize)||Qn.defaultEditorFontSize.toString())),t.focus(),t.updateOptions({tabSize:2,insertSpaces:!0,detectIndentation:!1}),Ie.lineNumberClickHandler(),r.languages.register({id:de.editorId()}),D5.init(t,r,de.editorId()),W5.init(r,de.editorId()),t.addAction({id:"format-document",label:"Format Document",keybindings:[r.KeyMod.CtrlCmd|r.KeyMod.Shift|r.KeyCode.KeyF],contextMenuGroupId:"navigation",contextMenuOrder:1,run(s){return s.getAction("editor.action.formatDocument").run()}}),r.languages.setLanguageConfiguration(de.editorId(),{comments:{lineComment:"//",blockComment:["/*","*/"]}}),t.addCommand(r.KeyMod.CtrlCmd|r.KeyCode.Slash,function(){const s=t.getAction("editor.action.commentLine");s&&s.run()}),t.onDidChangeModelContent(s=>{b5(t,r,s)});const n=le.getState().statusOfSettings.indentSpaceLevel;t.onKeyDown(s=>{x5(t,r,s,n)})},Pa=t=>nr.Platform===Ka.electron?(ve.initLocal(()=>{}),null):y.jsx(y.Fragment,{children:y.jsx("div",{children:y.jsxs(Sy,{backgroundColor:t.backgroundColor?t.backgroundColor:"rgba(0, 0, 0, 1)",onClick:t.onClick,children:[y.jsx("div",{children:y.jsx("img",{src:"./assets/img/axentax-logo.png",alt:"axentax",width:"180",height:"180"})}),t.children]})})}),q5=()=>{const t=Qt(),r=ue(m=>m.playStatus),n=ue(m=>m.statusOfSettings.followEditorLineWhenPlaying),s=ue(m=>m.syntaxMatchVersion.matched),a=Te.getPlayObj(),c=R.useRef([-1,-1,-1]),l=R.useRef([null,null,null]),u=R.useRef(-1),d=R.useRef(0),h=()=>l.current;return gd(m=>m.playTick.seekTick,m=>{var p,b;if(a)for(let w=0;w<a.mixesList.length;w++){const{to:P,index:S}=H5(a.mixesList[w].flatTOList,m);if(P){if(S!==c.current[w]){c.current[w]=S,l.current[w]=P;const L=(p=P.extendInfo)==null?void 0:p.stepInfoId;let T=null;if(L&&(T={orderIndex:L.orderCount,info:a.extensionInfo.stepInfoList[L.id]}),n&&s){if((d.current<P.syntaxLocation.line||u.current!==P.regionIndex)&&!de.getEditor().editor.hasTextFocus()&&(Ie.jumpToLine(P.syntaxLocation.line),d.current=P.syntaxLocation.line),P.locationIndexes){Ie.clearPlaySymDecoration(w);const C=a.locationInfoList[P.locationIndexes[0]];Ie.setPlaySymDecoration(w,{startLineNumber:C.line,startColumn:C.linePos,endLineNumber:C.endLine,endColumn:C.endPos},"decoration-playSym-back"),P.isArpeggio?Ie.setPlaySymDecoration(w,{startLineNumber:P.syntaxLocation.line,startColumn:P.syntaxLocation.linePos,endLineNumber:P.syntaxLocation.endLine,endColumn:P.syntaxLocation.endPos}):P.isBullet&&Ie.setPlaySymDecoration(w,{startLineNumber:P.syntaxLocation.line,startColumn:P.syntaxLocation.linePos,endLineNumber:P.syntaxLocation.endLine,endColumn:P.syntaxLocation.endPos})}}else Ie.clearPlaySymDecoration(w);u.current!==P.regionIndex&&(u.current=P.regionIndex,t(Sf(a.mixesList[w].regionList[P.regionIndex]))),t(aa({index:w,value:{id:P.tabObjId,tick:P.bar,note:P.note,noteStr:P.noteStr,tab:P.tab||[],trueTab:P.trueTab||[],activeTab:P.activeBows||[],velocity:P.velocity||[],shifted:P.shifted?P.shifted.map(C=>C.shift):[],stepInfo:T,location:{line:P.syntaxLocation.line,linePos:P.syntaxLocation.linePos},region:a.mixesList[w].regionList[P.regionIndex],style:P.styles}})),t(Tf(P.bpm))}}else if(l.current[w]){const L=(b=l.current[w])==null?void 0:b.bar.stopTick;L!==void 0&&L<m&&(l.current[w]=null,t(aa({index:w,value:null})),Ie.clearPlaySymDecoration(w))}}}),R.useEffect(()=>{d.current=0,s&&Ie.clearAllPlaySymDecoration()},[s]),R.useEffect(()=>(c.current=[-1,-1,-1],d.current=0,r.status===1&&(a&&Ie.clearAllPlaySymDecoration(),[0,1,2].forEach(m=>{t(aa({index:m,value:null}))})),()=>{}),[r.status,n]),{CurrentTabObjDual:h}};function H5(t,r){let n=0,s=t.length-1;for(;n<=s;){const a=n+Math.floor((s-n)/2);if(t[a].bar.startTick<=r&&r<t[a].bar.stopTick)return{to:t[a],index:a};t[a].bar.startTick>r?s=a-1:n=a+1}return{to:null,index:-1}}var pd={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var r={}.hasOwnProperty;function n(){for(var c="",l=0;l<arguments.length;l++){var u=arguments[l];u&&(c=a(c,s(u)))}return c}function s(c){if(typeof c=="string"||typeof c=="number")return c;if(typeof c!="object")return"";if(Array.isArray(c))return n.apply(null,c);if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]"))return c.toString();var l="";for(var u in c)r.call(c,u)&&c[u]&&(l=a(l,u));return l}function a(c,l){return l?c?c+" "+l:c+l:c}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(pd);var G5=pd.exports;const dt=Ty(G5),K5="_contents_1qc0k_1",V5="_title_1qc0k_8",Z5="_info_1qc0k_13",Y5="_playActive_1qc0k_20",X5="_blink_1qc0k_1",J5="_playCompile_1qc0k_25",Q5="_playInactive_1qc0k_30",e4="_region_1qc0k_45",t4="_tick_1qc0k_49",Tn={contents:K5,title:V5,info:Z5,playActive:Y5,blink:X5,playCompile:J5,playInactive:Q5,region:e4,tick:t4},n4=re.memo(()=>{const t=ue(n=>n.playRegion.region),r=ue(n=>n.playStatus.status);return y.jsxs("div",{className:Tn.contents,children:[y.jsx("div",{className:dt(Tn.title,{[Tn.playActive]:r===Oe.PLAY,[Tn.playCompile]:r===Oe.COMPILE,[Tn.playInactive]:r===Oe.STOP}),children:"PLAY MONITOR"}),y.jsx("div",{className:Tn.info,children:r===Oe.PLAY&&t?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Tn.region,children:["REGION: ",t.id,","]}),y.jsxs("div",{className:Tn.tick,children:["TICK: ",t.startLayerTick,","]})]}):null})]})});function r4(t,r){const n=a=>t*(1-1/Math.pow(2,a/12)),s=[];for(let a=0;a<=r;a++)s.push(n(a));return s}const i4=t=>{var L;const r=((L=t.tuning)==null?void 0:L.length)||6,n=[...t.tuning||["E","A","D","G","B","E"]].reverse(),s=498.23,a=85,c=2,l=9,u=l*.7,d=a/(r*3),h=24,m=a/r,p=c+l*4,b=r4(s-p,h),w=p+b[b.length-1]+(b[b.length-1]-b[b.length-2]),P=b.map((T,C)=>C===0?-((p-(c+l))/3):T-(T-b[C-1])/2);t.setFretLocation&&t.setFretLocation(P.map(T=>p+T));const S=n.map((T,C)=>m/2+m*C);return y.jsx(y.Fragment,{children:y.jsxs("svg",{ref:t.svgRefRight,width:w,height:a,children:[y.jsx("rect",{x:p,y:"0",width:w-p,height:a,fill:"#333333"}),y.jsx("rect",{x:"0",y:"0",width:p,height:a,fill:"#000"}),b.map((T,C)=>y.jsxs(re.Fragment,{children:[y.jsx("line",{x1:p+T-1,y1:0,x2:p+T-1,y2:a,stroke:"#777"}),y.jsx("line",{x1:p+T,y1:0,x2:p+T,y2:a,stroke:"#888"}),y.jsx("line",{x1:p+T+1,y1:0,x2:p+T+1,y2:a,stroke:"#777"})]},C)),b.map((T,C)=>C===3||C===5||C===7||C===10||C===15||C===17||C===19||C===21||C===23?y.jsx(re.Fragment,{children:y.jsx("circle",{cx:p+P[C],cy:a/2,r:u,fill:"#636363"})},C):C===12?y.jsxs(re.Fragment,{children:[y.jsx("circle",{cx:p+P[C],cy:a/4,r:u,fill:"#636363"}),y.jsx("circle",{cx:p+P[C],cy:a-a/4,r:u,fill:"#636363"})]},C):null).filter(T=>T!==null),n.map((T,C)=>y.jsxs(re.Fragment,{children:[y.jsx("line",{x1:c+l*2,y1:S[C],x2:w-c,y2:S[C],stroke:"#777"}),y.jsx("text",{x:c,y:S[C]+1,fontFamily:"self",fontWeight:"normal",textAnchor:"top",dominantBaseline:"middle",fontSize:l,style:{fill:"#aaa"},children:C+1}),y.jsx("text",{x:c+l,y:S[C]+1,fontFamily:"self",fontWeight:"normal",textAnchor:"top",dominantBaseline:"middle",fontSize:l,style:{fill:"#aaa"},children:T})]},C)),n.map((T,C)=>y.jsxs(re.Fragment,{children:[y.jsx("circle",{className:"shadowR"+C,style:{transition:"cx 0.03s ease",opacity:"0.4"},cx:p+P[1],cy:S[C],r:d,textAnchor:"middle",stroke:"white",strokeWidth:"1",fill:"#59d11d"}),y.jsx("circle",{className:"pointerR"+C,style:{transition:"cx 0.03s ease"},cx:p+P[0],cy:S[C],r:d,textAnchor:"middle",stroke:"white",strokeWidth:"1",fill:"#1d8cd1"})]},C))]})})},s4=()=>{const t=R.useRef(null),r=R.useRef(null),n=R.useRef(Ya()),s=p=>{t.current=p},a=R.useCallback(p=>{var b;return(b=r.current)==null?void 0:b.querySelector(".pointerR"+p)},[]),c=R.useCallback(p=>{var b;return(b=r.current)==null?void 0:b.querySelector(".shadowR"+p)},[]),l=R.useCallback(p=>{const b=a(p);b&&(b.style.display="none")},[]),u=R.useCallback(p=>{const b=c(p);b&&(b.style.display="none")},[]),d=R.useCallback((p,b,w=!0)=>{if(!t.current)return;const P=a(p);P&&t.current[b]!==void 0&&(P.style.display="block",P.setAttribute("cx",t.current[b].toString()),P.setAttribute("stroke-width",w?"2":"0"))},[]),h=R.useCallback((p,b)=>{if(!t.current)return;const w=c(p);w&&t.current[b]!==void 0&&(w.style.display="block",w.setAttribute("cx",t.current[b].toString()))},[]),m=R.useCallback(p=>{p.forEach(b=>{b.fret!==void 0?d(b.stringIndex,b.fret):l(b.stringIndex),b.echo!==void 0&&d(b.stringIndex,b.echo,!1),b.shadow!==void 0?h(b.stringIndex,b.shadow):u(b.stringIndex)})},[]);return{svgRefRight:r,setFingers:m,scrollIdPrefix:n.current,setFretLocation:s}},ka=t=>{const r=ue(h=>{var m;return(m=h.curPlaySym.symArrObj[t.dualId])==null?void 0:m.tab},Ve.isEqual),n=ue(h=>{var m;return(m=h.curPlaySym.symArrObj[t.dualId])==null?void 0:m.trueTab},Ve.isEqual),s=ue(h=>{var m;return(m=h.curPlaySym.symArrObj[t.dualId])==null?void 0:m.activeTab},Ve.isEqual),a=ue(h=>{var m;return(m=h.curPlaySym.symArrObj[t.dualId])==null?void 0:m.region.tuning},Ve.isEqual),{svgRefRight:c,setFingers:l,scrollIdPrefix:u,setFretLocation:d}=s4();return R.useEffect(()=>{const h=[];!r||!r.length?l([0,1,2,3,4,5,6,7,8].map(m=>({stringIndex:m}))):r.forEach((m,p)=>{const b={stringIndex:p,fret:m};s&&m===void 0&&s[p]!==void 0&&(b.echo=s[p]),n&&n[p]!==void 0&&n[p]!==m&&(b.shadow=n[p]),h.push(b)}),l(h)},[r,n,s]),y.jsx("div",{children:y.jsx(i4,{svgRefRight:c,tuning:a,showBoardKey:!1,scrollIdPrefix:u,setFretLocation:d})})},o4="_contents_jfskg_1",a4="_left_jfskg_8",c4="_right_jfskg_13",l4="_row_jfskg_17",u4="_displayNoteWrapper_jfskg_25",f4="_displayStepWrapper_jfskg_33",d4="_displayMapWrapper_jfskg_41",h4="_topKeyBox_jfskg_49",m4="_topValueBox_jfskg_54",g4="_displayIconWrapper_jfskg_65",p4="_iconBox_jfskg_75",y4="_iconColorActive_jfskg_80",v4="_iconColorDeactive_jfskg_84",Se={contents:o4,left:a4,right:c4,row:l4,displayNoteWrapper:u4,displayStepWrapper:f4,displayMapWrapper:d4,topKeyBox:h4,topValueBox:m4,displayIconWrapper:g4,iconBox:p4,iconColorActive:y4,iconColorDeactive:v4},yd=t=>{const r=t.fullX,n=t.fullY,s=t.fullY/2,a=t.bendFlatData;if(!(a!=null&&a.length))return;let c=y.jsx(y.Fragment,{});const l=t.startTick||(a?a[0].tick:0),u=t.stopTick||(a?a[a.length-1].tick:0);if(a&&a.length>1){const d=a.map(m=>{const p=m.tick-l;return{pitch:m.pitch,tick:p}}),h=u-l;c=y.jsx(y.Fragment,{children:d.map((m,p)=>{const b=s+(s-2)*(m.pitch/8191)*-1;return y.jsx(re.Fragment,{children:y.jsx("circle",{cx:(r*(m.tick/h)).toString(),cy:b.toString(),r:"1",fill:"#378c80"})},p)})})}return y.jsx(y.Fragment,{children:y.jsxs("svg",{width:r,height:n,children:[y.jsx("rect",{x:"0",y:"0",width:r,height:n,fill:"#000"}),y.jsx("line",{x1:"0",y1:n/2,x2:r,y2:n/2,stroke:"#333"}),c||null]})})},b4="_contents_1ra01_1",x4={contents:b4},w4=re.memo(t=>{var a;const r=ue(c=>{var l;return(l=c.curPlaySym.symArrObj[t.dualId])==null?void 0:l.style.bd},Ve.isEqual),n=(a=le.getState().curPlaySym.symArrObj[t.dualId])==null?void 0:a.tick,s=(()=>{var c,l;if(r){const u=(c=Te.getPlayObj())==null?void 0:c.mixesList[t.dualId].bendBank.bendChannelList;if(u){const d=(l=le.getState().curPlaySym.symArrObj[t.dualId])==null?void 0:l.id;return u.filter(m=>m.tabObjId===d).flatMap(m=>m.bend)}}return null})();return y.jsx(y.Fragment,{children:y.jsx("div",{className:x4.contents,children:y.jsx(yd,{bendFlatData:s,fullX:160,fullY:60,startTick:(n==null?void 0:n.startTick)||0,stopTick:(n==null?void 0:n.stopTick)||0})})})}),Ma=re.memo(t=>{const r=ue(a=>a.curPlaySym.symArrObj[t.dualId],Ve.isEqual),n=r==null?void 0:r.style;let s=null;return r!=null&&r.stepInfo&&(s=r.stepInfo.info.parsedStepList[r.stepInfo.orderIndex].stepSym.join(",")),y.jsx(y.Fragment,{children:y.jsxs("div",{className:Se.contents,children:[y.jsxs("div",{className:Se.left,children:[y.jsx("div",{className:Se.row,children:y.jsxs("div",{className:Se.displayNoteWrapper,children:[y.jsx("div",{className:Se.topKeyBox,children:"Note"}),y.jsx("div",{className:Se.topValueBox,children:Ve.isEqual(r==null?void 0:r.trueTab,r==null?void 0:r.tab)?(r==null?void 0:r.note)||"-":[...(r==null?void 0:r.tab)||[]].reverse().join("|")})]})}),y.jsx("div",{className:Se.row,children:y.jsxs("div",{className:Se.displayStepWrapper,children:[y.jsx("div",{className:Se.topKeyBox,children:"Step"}),y.jsx("div",{className:Se.topValueBox,children:s?s.slice(-26):"-"})]})}),y.jsxs("div",{className:Se.row,children:[y.jsxs("div",{className:Se.displayMapWrapper,children:[y.jsx("div",{className:Se.topKeyBox,children:"Map"}),y.jsx("div",{className:Se.topValueBox,children:r!=null&&r.shifted.length?r==null?void 0:r.shifted.join("+"):"-"})]}),y.jsx("div",{className:Se.displayIconWrapper,children:y.jsx("div",{className:dt(Se.iconBox,{[Se.iconColorActive]:(n==null?void 0:n.slide)&&!(n!=null&&n.legato),[Se.iconColorDeactive]:!(n!=null&&n.slide)||(n==null?void 0:n.legato)}),children:"Slide"})}),y.jsx("div",{className:Se.displayIconWrapper,children:y.jsx("div",{className:dt(Se.iconBox,{[Se.iconColorActive]:n==null?void 0:n.approach,[Se.iconColorDeactive]:!(n!=null&&n.approach)}),children:"In"})}),y.jsx("div",{className:Se.displayIconWrapper,children:y.jsx("div",{className:dt(Se.iconBox,{[Se.iconColorActive]:n==null?void 0:n.legato,[Se.iconColorDeactive]:!(n!=null&&n.legato)}),children:"Leg"})})]})]}),y.jsx("div",{className:Se.right,children:y.jsx(w4,{dualId:t.dualId,CurrentTabObjDual:t.CurrentTabObjDual})})]})})}),_4="_contents_1j7ae_1",P4="_dualBottom_1j7ae_5",ps={contents:_4,dualBottom:P4},k4=re.memo(()=>{const{CurrentTabObjDual:t}=q5();return y.jsxs("div",{className:ps.contents,children:[y.jsx("div",{children:y.jsx(n4,{})}),y.jsxs("div",{className:ps.dualBottom,children:[y.jsx(ka,{dualId:0,CurrentTabObjDual:t}),y.jsx(Ma,{dualId:0,CurrentTabObjDual:t})]}),y.jsxs("div",{className:ps.dualBottom,children:[y.jsx(ka,{dualId:1,CurrentTabObjDual:t}),y.jsx(Ma,{dualId:1,CurrentTabObjDual:t})]}),y.jsxs("div",{className:ps.dualBottom,children:[y.jsx(ka,{dualId:2,CurrentTabObjDual:t}),y.jsx(Ma,{dualId:2,CurrentTabObjDual:t})]})]})}),M4=()=>{function t(){const n=Te.getPlayObj();if(!n)return;const s=le.getState().playRegion.region;if(!s)return;const a=le.getState().playTick.seekTick,c=n.mixesList[0].regionList[s.id],l=n.mixesList[0].regionList.filter(m=>m.startLayerTick!==m.endLayerTick);let u=0,d=0;for(let m=l.length-1;m>=0;m--){const p=l[m];if(p.start.line<c.start.line&&a>p.startLayerTick){u=p.start.line,d=p.id;break}}if(u===0)return;let h=-1;e:for(let m=0;m<Qn.dualLength;m++){const p=n.mixesList[m].flatTOList;for(let b=0;b<p.length;b++){const w=p[b];if(d===w.regionIndex){h=w.bar.startTick,Ie.jumpToLine(u),ve.getInstance().setSeek(h);break e}}}}function r(){const n=Te.getPlayObj();if(!n)return;let s=le.getState().playTick.seekTick;s<Jt.startTick&&(s=Jt.startTick);const a=n.mixesList[0].regionList;let c=0,l=0;for(let u=a.length-1;u>=0;u--)if(a[u].startLayerTick<=s){u<a.length-1&&(c=a[u+1].startLayerTick,l=a[u+1].start.line);break}c&&(Ie.jumpToLine(l),ve.getInstance().setSeek(c))}return{jumpToPrevRegion:()=>t(),jumpToNextRegion:()=>r()}};var vd={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vf=re.createContext&&re.createContext(vd),S4=["attr","size","title"];function T4(t,r){if(t==null)return{};var n=C4(t,r),s,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(a=0;a<c.length;a++)s=c[a],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function C4(t,r){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;n[s]=t[s]}return n}function js(){return js=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},js.apply(this,arguments)}function bf(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Bs(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?bf(Object(n),!0).forEach(function(s){I4(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bf(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function I4(t,r,n){return r=A4(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function A4(t){var r=L4(t,"string");return typeof r=="symbol"?r:r+""}function L4(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function bd(t){return t&&t.map((r,n)=>re.createElement(r.tag,Bs({key:n},r.attr),bd(r.child)))}function De(t){return r=>re.createElement(E4,js({attr:Bs({},t.attr)},r),bd(t.child))}function E4(t){var r=n=>{var{attr:s,size:a,title:c}=t,l=T4(t,S4),u=a||n.size||"1em",d;return n.className&&(d=n.className),t.className&&(d=(d?d+" ":"")+t.className),re.createElement("svg",js({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,l,{className:d,style:Bs(Bs({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&re.createElement("title",null,c),t.children)};return vf!==void 0?re.createElement(vf.Consumer,null,n=>r(n)):r(vd)}function N4(t){return De({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(t)}function xf(t){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"},child:[]}]})(t)}function O4(t){return De({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(t)}function j4(t){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M488 64h-8v20c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V64H96v20c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12V64h-8C10.7 64 0 74.7 0 88v336c0 13.3 10.7 24 24 24h8v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h320v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h8c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24zM96 372c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm272 208c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm0-168c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm112 152c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40z"},child:[]}]})(t)}function wf(t){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"},child:[]}]})(t)}function _f(t){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(t)}function B4(t){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"},child:[]}]})(t)}function F4(t){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}function Pf(t){return De({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 4h12v2H6zm6 16.414 6.707-6.707-1.414-1.414L13 16.586V8h-2v8.586l-4.293-4.293-1.414 1.414z"},child:[]}]})(t)}function R4(t){return De({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 19V5"},child:[]},{tag:"path",attr:{d:"m13 6-6 6 6 6"},child:[]},{tag:"path",attr:{d:"M7 12h14"},child:[]}]})(t)}function D4(t){return De({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"15",x2:"15",y1:"3",y2:"21"},child:[]},{tag:"path",attr:{d:"m8 9 3 3-3 3"},child:[]}]})(t)}function W4(t){return De({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"15",x2:"15",y1:"3",y2:"21"},child:[]},{tag:"path",attr:{d:"m10 15-3-3 3-3"},child:[]}]})(t)}function U4(t){return De({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M8.78 14.147h8.914v1.657H8.78Zm0-2.94h7.355v1.657H8.78Zm0-2.943h8.914V9.92H8.78Zm13.203 9.195a.656.656 0 0 1 0-.638c.13-.238.252-.476.366-.728a.271.271 0 0 0-.249-.383h-2.166a.656.656 0 0 0-.552.297 7.59 7.59 0 0 1-.977 1.208 7.323 7.323 0 0 1-5.21 2.156 7.321 7.321 0 0 1-5.208-2.157 7.32 7.32 0 0 1-2.157-5.21c0-1.969.766-3.821 2.156-5.211a7.323 7.323 0 0 1 5.21-2.156c1.967 0 3.819.766 5.21 2.157.368.369.696.783.976 1.207.12.186.327.297.551.297H22.1a.273.273 0 0 0 .248-.383 9.894 9.894 0 0 0-.365-.728.665.665 0 0 1 0-.638l.735-1.332a.663.663 0 0 0-.11-.787l-1.836-1.836a.659.66 0 0 0-.787-.11l-1.335.738a.656.656 0 0 1-.638-.004 9.767 9.768 0 0 0-2.005-.824.657.657 0 0 1-.452-.449L15.131.48a.664.664 0 0 0-.635-.48h-2.598a.657.657 0 0 0-.634.48l-.421 1.46a.657.657 0 0 1-.452.448c-.697.203-1.37.48-2.005.828-.2.11-.438.11-.638.003L6.41 2.484a.663.663 0 0 0-.787.11L3.788 4.432a.659.66 0 0 0-.11.787l.737 1.335c.11.2.107.438-.003.638a9.767 9.768 0 0 0-.825 2.005.657.657 0 0 1-.448.452l-1.46.42a.664.664 0 0 0-.479.635v2.599c0 .293.193.556.48.635l1.459.42a.657.657 0 0 1 .448.453c.204.697.48 1.37.828 2.004.11.2.11.438.004.64l-.738 1.334a.663.663 0 0 0 .11.786l1.835 1.837a.659.66 0 0 0 .787.11l1.335-.738c.2-.11.438-.107.638.003a9.767 9.768 0 0 0 2.005.825c.217.062.39.23.452.448l.42 1.46c.083.283.342.48.635.48h2.598a.657.657 0 0 0 .635-.48l.421-1.46a.657.657 0 0 1 .452-.448 9.975 9.976 0 0 0 2.004-.828.67.67 0 0 1 .639-.004l1.335.739c.259.14.58.096.786-.11l1.836-1.837a.659.66 0 0 0 .11-.787z"},child:[]}]})(t)}function z4(t){return De({tag:"svg",attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M16.83 15.028l-0.069-0.189c-0.016 0.009-0.033 0.018-0.050 0.026l0.119 0.162zM17.336 14.624l-0.132-0.151c-0.012 0.015-0.026 0.028-0.038 0.042l0.17 0.109zM17.662 14.063l-0.178-0.093c-0.006 0.018-0.013 0.036-0.019 0.053l0.197 0.040zM17.763 13.423l-0.201-0.023c0.001 0.019 0.003 0.038 0.003 0.057l0.198-0.034zM17.627 12.789l-0.195 0.051c0.008 0.017 0.015 0.035 0.022 0.052l0.173-0.103zM14.977 14.908l0.138-0.145c-0.016-0.011-0.030-0.023-0.045-0.034l-0.092 0.179zM16.211 15.223l0.004-0.201c-0.019 0.003-0.037 0.007-0.056 0.008l0.052 0.193zM15.564 15.181l0.077-0.186c-0.018-0.004-0.037-0.009-0.055-0.014l-0.022 0.2zM15.115 14.763c0.142 0.098 0.301 0.171 0.472 0.218l0.088-0.806-0.559 0.588zM16.743 11.872l-0.11 0.169c0.017 0.008 0.034 0.016 0.051 0.025l0.058-0.193zM14.476 12.585l0.157 0.124c0.009-0.017 0.019-0.032 0.029-0.048l-0.187-0.076zM14.258 13.195l0.191 0.059c0.003-0.019 0.005-0.037 0.009-0.056l-0.2-0.003zM14.276 13.843l0.199-0.014c-0.004-0.018-0.009-0.036-0.013-0.055l-0.187 0.069zM17.271 12.248l-0.163 0.118c0.013 0.013 0.025 0.028 0.038 0.042l0.125-0.16zM14.526 14.441l0.181-0.085c-0.011-0.016-0.020-0.032-0.030-0.048l-0.151 0.133zM15.641 14.995c0.116 0.027 0.235 0.043 0.359 0.043 0.054 0 0.107-0.003 0.16-0.008l-0.21-0.784-0.309 0.749zM16.115 11.712l-0.041 0.198c0.019 0.001 0.038 0.001 0.057 0.003l-0.015-0.2zM15.471 11.789l0.033 0.198c0.018-0.006 0.036-0.012 0.054-0.017l-0.086-0.181zM14.899 12.094l0.102 0.172c0.015-0.012 0.030-0.023 0.045-0.034l-0.147-0.138zM16.761 14.84c0.153-0.085 0.289-0.196 0.405-0.325l-0.681-0.437 0.276 0.762zM16.476 13.543c0 0.263-0.213 0.476-0.476 0.476s-0.476-0.213-0.476-0.476c0-0.263 0.213-0.476 0.476-0.476s0.476 0.213 0.476 0.476zM14.476 13.829c0.040 0.172 0.109 0.334 0.201 0.479l0.608-0.536-0.809 0.057zM14.45 13.254c-0.010 0.071-0.017 0.144-0.017 0.218 0 0.103 0.011 0.204 0.030 0.302l0.762-0.281-0.775-0.239zM15.069 14.729l0.372-0.719-0.734 0.346c0.099 0.144 0.222 0.269 0.362 0.373zM16 15.642c1.197 0 2.17-0.973 2.17-2.169s-0.974-2.171-2.17-2.171-2.17 0.974-2.17 2.171c0 1.196 0.974 2.169 2.17 2.169zM16 11.67c0.994 0 1.802 0.809 1.802 1.802s-0.809 1.802-1.802 1.802-1.802-0.808-1.802-1.802c0-0.994 0.809-1.802 1.802-1.802zM14.633 12.709c-0.084 0.15-0.143 0.315-0.175 0.49l0.811 0.013-0.636-0.503zM21.889 22.537c-4.13-1.028-5.889 1.067-5.889 1.067-0.020 2.095 2.846 5.85 6.363 6.304s5.77-1.225 5.77-1.225-2.114-5.118-6.244-6.146zM10.111 22.537c-4.13 1.027-6.244 6.146-6.244 6.146s2.253 1.68 5.77 1.225c3.517-0.454 6.383-4.209 6.363-6.304 0-0-1.759-2.095-5.889-1.067zM16.216 15.022c0.176-0.024 0.343-0.078 0.495-0.156l-0.478-0.654-0.018 0.81zM4.499 18.209h23.002l0.711-2.134h-3.378l0.662-3.826 0.881-5.095c0 0-2.327-4.568-10.326-4.568-9.723 0-10.428 4.568-10.428 4.568l1.543 8.921h-3.379l0.711 2.134zM16 10.976c1.377 0 2.497 1.12 2.497 2.497 0 1.376-1.12 2.495-2.497 2.495s-2.497-1.12-2.497-2.495c0-1.377 1.12-2.497 2.497-2.497zM17.563 13.4c-0.008-0.178-0.046-0.349-0.109-0.508l-0.695 0.415 0.804 0.092zM17.484 13.97c0.053-0.156 0.082-0.324 0.082-0.498 0-0.005-0.001-0.010-0.001-0.015l-0.799 0.137 0.718 0.376zM17.204 14.473c0.111-0.133 0.198-0.285 0.261-0.449l-0.794-0.161 0.533 0.611zM17.432 12.84c-0.071-0.16-0.168-0.306-0.286-0.433l-0.497 0.637 0.784-0.205zM17.108 12.366c-0.122-0.123-0.266-0.224-0.423-0.3l-0.234 0.775 0.657-0.474zM15.001 12.267c-0.134 0.111-0.248 0.245-0.338 0.394l0.751 0.305-0.412-0.699zM16.073 11.909c-0.025-0.001-0.049-0.004-0.073-0.004-0.154 0-0.302 0.023-0.442 0.065l0.35 0.732 0.166-0.792zM15.504 11.987c-0.167 0.056-0.321 0.139-0.458 0.245l0.59 0.555-0.132-0.8zM16.633 12.040c-0.156-0.069-0.325-0.114-0.503-0.128l0.062 0.807 0.441-0.679z"},child:[]}]})(t)}const $4="_flex_yeb3v_1",q4="_playPadding_yeb3v_7",H4="_commonPadding_yeb3v_11",G4="_spinner_yeb3v_23",K4="_spin_yeb3v_23",V4="_hoverHandle_yeb3v_27",Z4="_error_yeb3v_36",Re={flex:$4,playPadding:q4,commonPadding:H4,spinner:G4,spin:K4,hoverHandle:V4,error:Z4},Y4=()=>{const t=Qt(),r=R.useCallback(()=>{ve.getInstance().stop()},[]);return{playCB:R.useCallback(()=>{if(le.getState().syntaxError.info)return;le.getState().syntaxMatchVersion.matched?ve.getInstance().play(null,()=>{Ie.clearAllPlaySymDecoration()}):(Te.setVersionOfEditToPlay(),t(Jn(Oe.COMPILE)),Gt.getInstance().setMessage({hasStyleCompile:!0,hasMidiCompile:!0,syntax:de.getEditor().editor.getValue()},a=>{var l;if(a.error){t(Jn(Oe.STOP));return}if(!a.response)return;a.response.mixesList.forEach(u=>u.flatTOList=u.flatTOList.filter(d=>d.bpm>0)),Te.setPlayObj(a.response),Te.setPlayingSyntax(de.getEditor().editor.getValue());const c=((l=a.response.mixesList[0].flatTOList[0])==null?void 0:l.bpm)||a.response.settings.style.bpm;c&&t(Tf(c)),ve.getInstance().play(a.midi,()=>{})}))},[]),stopCB:r}},kf=(t,r,n)=>{R.useEffect(()=>{function s(a){const c=a.key==="Spacebar"?" ":a.key;if(!t.includes(c))return;(n&&n.length>0?n:[void 0]).some(d=>d?(d.ctrlKey===void 0||a.ctrlKey===d.ctrlKey)&&(d.metaKey===void 0||a.metaKey===d.metaKey)&&(d.shiftKey===void 0||a.shiftKey===d.shiftKey)&&(d.altKey===void 0||a.altKey===d.altKey):!0)&&(a.preventDefault(),r(a))}return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[t,r,n])},X4=(t,r)=>{const n=Qt(),s=ue(c=>c.syntaxError.info);return{reCompilePlayCB:()=>{if(s)return;r(),n(Jn(Oe.COMPILE));const c=le.getState().cursorLocation.line;Gt.getInstance().setMessage({id:1,hasStyleCompile:!0,hasMidiCompile:!0,syntax:de.getEditor().editor.getValue()},l=>{if(l.error){n(Jn(Oe.STOP));return}if(!l.response)return;l.response.mixesList.forEach(d=>d.flatTOList=d.flatTOList.filter(h=>h.bpm>0)),Te.setVersionOfEditToPlay(),Te.setPlayingSyntax(de.getEditor().editor.getValue()),Te.setPlayObj(l.response),n(Jn(Oe.STOP)),ve.getInstance().setMidiFile(l.midi),Te.setPlayingMidi(l.midi);const u=l.response.mixesList[0].regionList;for(let d=u.length-1;d>=0;d--)if(u[d].start.line<=c){ve.getInstance().setSeek(d===0?0:u[d].startLayerTick),t();return}n(Sf(u[0])),ve.getInstance().setSeek(0),Ie.jumpToLine(0),t()})}}};class J4{static resolve(){console.log("compose.. guidance of to app")}}const Q4=re.memo(()=>{const t=ue(T=>T.playStatus.status),r=ue(T=>T.syntaxError.info),n=ue(T=>T.syntaxMatchVersion.matched),s=ue(T=>T.systemState.existAnnotationCompose,Ve.isEqual),[a,c]=R.useState(!1),[l,u]=R.useState(!1),{playCB:d,stopCB:h}=Y4(),{reCompilePlayCB:m}=X4(d,h),{jumpToPrevRegion:p,jumpToNextRegion:b}=M4();R.useEffect(()=>{let T;return a&&p(),a&&(T=setInterval(()=>p(),90)),()=>{T&&clearInterval(T)}},[a]),R.useEffect(()=>{let T;return l&&b(),l&&(T=setInterval(()=>b(),90)),()=>{T&&clearInterval(T)}},[l]);const w=()=>{switch(t){case Oe.PLAY:return y.jsx("div",{onClick:h,className:`${Re.playPadding} ${Re.hoverHandle} gl-brightColor`,children:y.jsx(wf,{size:"18px"})});case Oe.COMPILE:return y.jsx("div",{className:Re.playPadding,children:y.jsx(F4,{size:"18px",className:`${Re.spinner} gl-brightColor`})});case Oe.STOP:return r?y.jsx("div",{className:Re.playPadding,children:y.jsx(_f,{size:"18px",className:Re.error})}):y.jsx("div",{onClick:d,className:`${Re.playPadding} ${Re.hoverHandle} gl-brightColor`,children:y.jsx(_f,{size:"18px"})});default:throw"ControlButton"}},P=()=>n||r||t===Oe.COMPILE?w():y.jsxs(y.Fragment,{children:[y.jsx("div",{onClick:()=>m(),className:`${Re.playPadding} ${Re.hoverHandle} gl-brightColor`,children:y.jsx(U4,{size:"20px"})}),t!==Oe.PLAY?y.jsx(y.Fragment,{}):y.jsx("div",{onClick:h,className:`${Re.commonPadding} ${Re.hoverHandle} gl-brightColor`,children:y.jsx(wf,{size:"18px"})})]}),S=()=>{t===Oe.STOP?d():t===Oe.PLAY&&h()},L=()=>{!n&&!r&&t!==Oe.COMPILE?m():S()};return kf(["s"],L,[{metaKey:!0}]),kf([" "],L,[{shiftKey:!0}]),y.jsxs("div",{className:Re.flex,children:[P(),t===Oe.COMPILE?y.jsx(y.Fragment,{}):y.jsx(y.Fragment,{children:y.jsx("div",{className:`${Re.commonPadding} ${Re.hoverHandle} gl-brightColor`,onClick:()=>{le.getState().statusOfSettings.followEditorLineWhenPlaying&&Ie.jumpToLine(0),ve.getInstance().setSeek(0)},children:y.jsx(R4,{size:"25px",style:{transform:"scaleX(0.85)"}})})}),!n||t===Oe.COMPILE?y.jsx(y.Fragment,{}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:`${Re.commonPadding} ${Re.hoverHandle} gl-brightColor`,onMouseDown:()=>c(!0),onMouseUp:()=>c(!1),onMouseLeave:()=>c(!1),children:y.jsx(Pf,{size:"25px",style:{transform:"scaleY(-1)"}})}),y.jsx("div",{className:`${Re.commonPadding} ${Re.hoverHandle} gl-brightColor`,onMouseDown:()=>u(!0),onMouseUp:()=>u(!1),onMouseLeave:()=>u(!1),children:y.jsx(Pf,{size:"25px"})})]}),!s||t!==Oe.STOP?y.jsx(y.Fragment,{}):y.jsx(y.Fragment,{children:y.jsx("div",{className:`${Re.commonPadding} ${Re.hoverHandle} gl-brightColor`,onClick:()=>{J4.resolve()},children:y.jsx(z4,{size:"25px"})})}),n?y.jsx(y.Fragment,{children:y.jsx("div",{className:`${Re.commonPadding} ${Re.hoverHandle} gl-brightColor`,onClick:()=>{const T=Te.getPlayingMidi();if(T){const C=new Uint8Array(T),A=new Blob([C],{type:"audio/midi"}),k=URL.createObjectURL(A),N=document.createElement("a");N.href=k,N.download="Axentax_"+new Date().getTime()+".mid",document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(k)}},children:y.jsx(O4,{size:"20px"})})}):y.jsx(y.Fragment,{})]})}),e6="_timeDisplay_1aay7_1",t6="_DigitalBPM_1aay7_11",n6="_DigitalTime_1aay7_20",r6="_DigitalMini_1aay7_29",i6="_text_1aay7_38",s6="_flash_1aay7_42",o6="_seekBarWrapper_1aay7_56",Ht={timeDisplay:e6,DigitalBPM:t6,DigitalTime:n6,DigitalMini:r6,text:i6,flash:s6,"flash-animation":"_flash-animation_1aay7_1",seekBarWrapper:o6},Sa=9999,a6=re.memo(()=>{var k;const t=ue(N=>N.playStatus.status),r=ue(N=>N.syntaxError.info),n=ue(N=>N.syntaxMatchVersion.matched),s=!!(r&&t!==Oe.PLAY||!n&&t!==Oe.PLAY),{seekTick:a}=ue(N=>N.playTick),c=ue(N=>N.playBPM.bpm)||120,[l,u]=R.useState(!1);R.useEffect(()=>{u(!0);const N=setTimeout(()=>u(!1),300);return()=>clearTimeout(N)},[c]);const[d,h]=R.useState(0),m=R.useRef(null);R.useEffect(()=>{const N=m.current;if(!N)return;const U=new ResizeObserver($=>{for(const V of $)V.target===N&&h(V.contentRect.width)});return U.observe(N),()=>{U.disconnect()}},[]);let p=0,b=0,w=0;const P=(k=Te.getPlayObj())==null?void 0:k.bpmPosList;if(P){const N=c6(P,a),U=a-P[N].tick,$=6e4/(c*480);p=U*$+P[N].timeMS,b=P[P.length-1].timeMS,w=P[P.length-1].tick}const S=rr.samplesToTimeWithArray(p),L=rr.samplesToTimeWithArray(b),[T,C]=R.useState(0);R.useEffect(()=>{const N=Math.round(a/w*Sa);isNaN(N)||C(N)},[a,w]);const A=N=>{const U=parseInt(N.target.value,10),$=w/Sa*U;C(U),ve.getInstance().setSeek($)};return y.jsxs("div",{ref:m,children:[d<540?y.jsx(y.Fragment,{children:y.jsx("div",{className:Ht.timeDisplay,children:d<320?y.jsx(y.Fragment,{children:y.jsxs("span",{className:Ht.DigitalMini,children:[S.min,":",S.sec]})}):y.jsxs(y.Fragment,{children:[y.jsxs("span",{className:Ht.DigitalTime,children:[S.min,":",S.sec]}),"/ ",y.jsxs("span",{className:Ht.DigitalMini,children:[L.min,":",L.sec]})]})})}):y.jsx(y.Fragment,{children:y.jsxs("div",{className:Ht.timeDisplay,children:["BPM:",y.jsx("span",{className:`text ${l?Ht.flash:""} `+Ht.DigitalBPM,children:c||"-"}),",  Time: ",y.jsxs("span",{className:Ht.DigitalTime,children:[S.min,":",S.sec]}),".",y.jsx("span",{className:Ht.DigitalMini,children:S.msec}),"/ ",y.jsxs("span",{className:Ht.DigitalMini,children:[L.min,":",L.sec]})]})}),y.jsx("div",{className:Ht.seekBarWrapper,children:y.jsx("input",{disabled:s,type:"range",min:"0",max:Sa,value:T===1/0?0:T,onChange:A,style:{width:"100%",opacity:s?"0.1":"1"}})})]})});function c6(t,r){let n=0,s=t.length-1;for(;n<=s;){const a=Math.floor((n+s)/2);if(t[a].tick===r)return a;t[a].tick<r?n=a+1:s=a-1}return s}const l6="_controller_x8zsr_2",u6="_leftOn_x8zsr_12",f6="_left_x8zsr_12",d6="_right_x8zsr_26",Ta={controller:l6,leftOn:u6,left:f6,right:d6},h6=re.memo(()=>y.jsxs("div",{className:`${Ta.controller} unSelectable`,children:[y.jsxs("div",{className:Ta.leftOn,children:[" ",y.jsx(Q4,{})]}),y.jsx("div",{className:Ta.right,children:y.jsx(a6,{})})]})),m6="_controlBottom_ecvrw_1",g6="_iconBase_ecvrw_8",p6="_iconActive_ecvrw_19",y6="_pop_ecvrw_1",v6="_iconActiveRed_ecvrw_23",b6="_iconInactive_ecvrw_27",x6="_shrink_ecvrw_1",w6="_iconActiveColor_ecvrw_53",_6="_iconActiveRedColor_ecvrw_57",xe={controlBottom:m6,iconBase:g6,iconActive:p6,pop:y6,iconActiveRed:v6,iconInactive:b6,shrink:x6,iconActiveColor:w6,iconActiveRedColor:_6},P6=t=>{const r=Qt(),n=ue(c=>c.statusOfSettings.followEditorLineWhenPlaying),s=ue(c=>c.syntaxMatchVersion.matched),a=()=>{r(Cy())};return y.jsx("div",{className:dt(xe.iconBase,{[xe.iconActive]:n&&s,[xe.iconActiveColor]:n&&s,[xe.iconActiveRed]:n&&!s,[xe.iconActiveRedColor]:n&&!s,[xe.iconInactive]:!n}),onClick:a,children:y.jsx(j4,{size:t.size})})};function k6(t){return De({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Dark"},child:[{tag:"path",attr:{d:"M12.741,20.917a9.389,9.389,0,0,1-1.395-.105,9.141,9.141,0,0,1-1.465-17.7,1.177,1.177,0,0,1,1.21.281,1.273,1.273,0,0,1,.325,1.293,8.112,8.112,0,0,0-.353,2.68,8.266,8.266,0,0,0,4.366,6.857,7.628,7.628,0,0,0,3.711.993,1.242,1.242,0,0,1,.994,1.963h0A9.148,9.148,0,0,1,12.741,20.917ZM10.261,4.05a.211.211,0,0,0-.065.011,8.137,8.137,0,1,0,9.131,12.526h0a.224.224,0,0,0,.013-.235.232.232,0,0,0-.206-.136A8.619,8.619,0,0,1,14.946,15.1a9.274,9.274,0,0,1-4.883-7.7,9.123,9.123,0,0,1,.4-3.008.286.286,0,0,0-.069-.285A.184.184,0,0,0,10.261,4.05Z"},child:[]}]}]})(t)}function M6(t){return De({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Light"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M12,18.09A6.09,6.09,0,1,1,18.09,12,6.1,6.1,0,0,1,12,18.09ZM12,6.91A5.09,5.09,0,1,0,17.09,12,5.1,5.1,0,0,0,12,6.91Z"},child:[]},{tag:"path",attr:{d:"M11.5,2.568v1.6a.5.5,0,1,0,1,0v-1.6a.5.5,0,1,0-1,0Z"},child:[]},{tag:"path",attr:{d:"M12.5,21.432v-1.6a.5.5,0,0,0-1,0v1.6a.5.5,0,1,0,1,0Z"},child:[]},{tag:"path",attr:{d:"M21.432,11.5h-1.6a.5.5,0,0,0,0,1h1.6a.5.5,0,1,0,0-1Z"},child:[]},{tag:"path",attr:{d:"M2.568,12.5h1.6a.5.5,0,1,0,0-1h-1.6a.5.5,0,1,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M18.316,4.977l-.992.992-.141.141a.514.514,0,0,0-.146.353.508.508,0,0,0,.146.354.5.5,0,0,0,.354.146.515.515,0,0,0,.353-.146l.992-.992.141-.141a.515.515,0,0,0,.147-.354.508.508,0,0,0-.147-.353.5.5,0,0,0-.353-.147.522.522,0,0,0-.354.147Z"},child:[]},{tag:"path",attr:{d:"M5.684,19.023l.992-.992.141-.141a.514.514,0,0,0,.146-.353.508.508,0,0,0-.146-.354.5.5,0,0,0-.354-.146.515.515,0,0,0-.353.146l-.992.992-.141.141a.515.515,0,0,0-.147.354.508.508,0,0,0,.147.353.5.5,0,0,0,.353.147.522.522,0,0,0,.354-.147Z"},child:[]},{tag:"path",attr:{d:"M19.023,18.316l-.992-.992-.141-.141a.514.514,0,0,0-.353-.146.508.508,0,0,0-.354.146.5.5,0,0,0-.146.354.515.515,0,0,0,.146.353l.992.992.141.141a.515.515,0,0,0,.354.147.508.508,0,0,0,.353-.147.5.5,0,0,0,.147-.353.522.522,0,0,0-.147-.354Z"},child:[]},{tag:"path",attr:{d:"M4.977,5.684l.992.992.141.141a.514.514,0,0,0,.353.146.508.508,0,0,0,.354-.146.5.5,0,0,0,.146-.354.515.515,0,0,0-.146-.353l-.992-.992-.141-.141A.515.515,0,0,0,5.33,4.83a.508.508,0,0,0-.353.147.5.5,0,0,0-.147.353.522.522,0,0,0,.147.354Z"},child:[]}]}]}]})(t)}const S6=t=>{const r=On.getItem(jn.Theme)||Rt.Dark,[n,s]=R.useState(r);return y.jsx("div",{className:dt(xe.iconBase,{[xe.iconActive]:n!=="dark",[xe.iconInactive]:n==="dark"}),onClick:()=>{s(n===Rt.Dark?Rt.Light:Rt.Dark),Os.apply(n===Rt.Dark?Rt.Light:Rt.Dark)},children:n===Rt.Dark?y.jsx(k6,{size:t.size}):y.jsx(M6,{size:t.size})})};function T6(t){return De({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 12h10V4H3v8zm2-6h6v4H5V6zM2 6H1V2.5l.5-.5H5v1H2v3zm13-3.5V6h-1V3h-3V2h3.5l.5.5zM14 10h1v3.5l-.5.5H11v-1h3v-3zM2 13h3v1H1.5l-.5-.5V10h1v3z"},child:[]}]})(t)}const C6=t=>{const r=Qt(),n=ue(s=>s.windowControl.fullScreen);return y.jsx("div",{className:dt(xe.iconBase,{[xe.iconActive]:n===1,[xe.iconInactive]:n===0}),onClick:()=>{r(Iy(n?0:1))},children:y.jsx(T6,{size:t.size})})},I6=t=>{const r=Qt(),n=ue(s=>s.windowControl.rightColumn);return y.jsx("div",{className:dt(xe.iconBase,{[xe.iconActive]:n,[xe.iconInactive]:!n}),onClick:()=>{r(Ay())},children:n?y.jsx(D4,{size:t.size}):y.jsx(W4,{size:t.size})})},A6=t=>{const[r,n]=R.useState(!1),s=R.useCallback(()=>{const a=de.getEditor().editor,c=de.getEditor().editor.getModel();if(c){const l=a.getValue().split(`
`).map(h=>/^\s*(\/\/)?\s*set\./.test(h)?h.replace(/^\s+|\*\/.*?$/g,""):void 0).filter(h=>h!==void 0).join(`
`),u=l+(l.length?`

`:"")+`@@ {
  
}
`,d=c.getFullModelRange();a.executeEdits("",[{range:d,text:u,forceMoveMarkers:!0}]),Ie.jumpToLine(u.split(`
`).length-2),a.focus(),a.setPosition({lineNumber:u.split(`
`).length-2,column:3})}},[]);return y.jsx("div",{className:dt(xe.iconBase,{[xe.iconActive]:r,[xe.iconInactive]:!r}),onClick:()=>{r||(s(),n(!0),setTimeout(()=>n(!1),200))},children:r?y.jsx(xf,{size:t.size}):y.jsx(xf,{size:t.size})})};function L6(t){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M58.79 439.13A16 16 0 0 1 48 424c0-73.1 14.68-131.56 43.65-173.77 35-51 90.21-78.46 164.35-81.87V88a16 16 0 0 1 27.05-11.57l176 168a16 16 0 0 1 0 23.14l-176 168A16 16 0 0 1 256 424v-79.77c-45 1.36-79 8.65-106.07 22.64-29.25 15.12-50.46 37.71-73.32 67a16 16 0 0 1-17.82 5.28z"},child:[]}]})(t)}function E6(t){return De({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 440a16 16 0 0 1-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 0 1-27 11.57l-176-168a16 16 0 0 1 0-23.14l176-168A16 16 0 0 1 256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 0 1-16 16z"},child:[]}]})(t)}const N6=t=>{const[r,n]=R.useState(!1),s=R.useCallback(()=>{de.getEditor().editor.trigger("keyboard","undo",null)},[]);return y.jsx("div",{className:dt(xe.iconBase,{[xe.iconActive]:r,[xe.iconInactive]:!r}),onClick:()=>{r||(s(),n(!0),setTimeout(()=>n(!1),200))},children:y.jsx(E6,{size:t.size})})},O6=t=>{const[r,n]=R.useState(!1),s=R.useCallback(()=>{de.getEditor().editor.trigger("keyboard","redo",null)},[]);return y.jsx("div",{className:dt(xe.iconBase,{[xe.iconActive]:r,[xe.iconInactive]:!r}),onClick:()=>{r||(s(),n(!0),setTimeout(()=>n(!1),200))},children:y.jsx(L6,{size:t.size})})};function j6(t){return De({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M.99 19h2.42l1.27-3.58h5.65L11.59 19h2.42L8.75 5h-2.5L.99 19zm4.42-5.61L7.44 7.6h.12l2.03 5.79H5.41zM23 11v2h-8v-2h8z"},child:[]}]})(t)}function B6(t){return De({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M.99 19h2.42l1.27-3.58h5.65L11.59 19h2.42L8.75 5h-2.5L.99 19zm4.42-5.61L7.44 7.6h.12l2.03 5.79H5.41zM20 11h3v2h-3v3h-2v-3h-3v-2h3V8h2v3z"},child:[]}]})(t)}const F6=t=>{const[r,n]=R.useState(!1);return y.jsx("div",{className:dt(xe.iconBase,{[xe.iconActive]:r,[xe.iconInactive]:!r}),onClick:()=>{const s=Ie.getEditorFontsize();!r&&s<24&&(n(!0),setTimeout(()=>n(!1),150),Ie.setEditorFontsize(s+1))},children:y.jsx(B6,{size:t.size})})},R6=t=>{const[r,n]=R.useState(!1);return y.jsx("div",{className:dt(xe.iconBase,{[xe.iconActive]:r,[xe.iconInactive]:!r}),onClick:()=>{const s=Ie.getEditorFontsize();!r&&s>8&&(n(!0),Ie.setEditorFontsize(s-1),setTimeout(()=>n(!1),150))},children:y.jsx(j6,{size:t.size})})},D6=re.memo(()=>y.jsxs("div",{className:xe.controlBottom,children:[y.jsx(P6,{size:"22px"}),y.jsx(N6,{size:"22px"}),y.jsx(O6,{size:"22px"}),y.jsx(A6,{size:"21px"}),y.jsx(R6,{size:"26px"}),y.jsx(F6,{size:"24px"}),y.jsx(S6,{size:"22px"}),y.jsx(C6,{size:"22px"}),y.jsx(I6,{size:"22px"})]})),W6=(t,r)=>{const[n,s]=R.useState(t),[a,c]=R.useState(r);return{leftColumnWidth:n,rightColumnWidth:a,handleMouseDownLeft:d=>{const h=d.clientX,m=n,p=w=>{const P=m+w.clientX-h;s(P)},b=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",b)},handleMouseDownRight:d=>{const h=d.clientX,m=a,p=w=>{const P=m+h-w.clientX;c(P)},b=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",b)}}},U6="_layout_1d5xg_1",z6="_left_1d5xg_5",$6="_right_1d5xg_11",Ca={layout:U6,left:z6,right:$6},q6=()=>y.jsx(y.Fragment,{});function H6(t){return De({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm297.1 84L257.3 234.6 379.4 396H283.8L209 298.1 123.3 396H75.8l111-126.9L69.7 116h98l67.7 89.5L313.6 116h47.5zM323.3 367.6L153.4 142.9H125.1L296.9 367.6h26.3z"},child:[]}]})(t)}const G6=()=>y.jsxs("div",{className:Ca.layout,children:[y.jsx("div",{className:Ca.left,children:nr.Platform===Ka.electron?y.jsx(q6,{}):y.jsx(y.Fragment,{children:nr.title})}),y.jsxs("div",{className:`${Ca.right} commonBG`,children:[y.jsx("div",{children:y.jsx("a",{href:"https://axentax.github.io/docs/quick-start",target:"_blank",children:y.jsx(B4,{size:"22px"})})}),y.jsx("div",{children:y.jsx("a",{href:"https://github.com/axentax/axentax-playground",target:"_blank",children:y.jsx(N4,{size:"22px"})})}),y.jsx("div",{children:y.jsx("a",{href:"https://x.com/_axentax_",target:"_blank",children:y.jsx(H6,{size:"22px"})})})]})]}),K6="_fullHeight_quvy4_13",V6="_container_quvy4_42",Z6="_column_quvy4_48",Y6="_leftColumn_quvy4_55",X6="_rightColumn_quvy4_59",J6="_mainColumn_quvy4_64",Q6="_box_quvy4_75",ex="_titleBox_quvy4_83",tx="_controlArea_quvy4_92",nx="_seekBarArea_quvy4_98",rx="_editorBox_quvy4_104",ix="_editorReserveMargin_quvy4_111",sx="_controlBottomArea_quvy4_116",ox="_laboBox_quvy4_120",ax="_resizer_quvy4_124",He={fullHeight:K6,container:V6,column:Z6,leftColumn:Y6,rightColumn:X6,mainColumn:J6,box:Q6,titleBox:ex,controlArea:tx,seekBarArea:nx,editorBox:rx,editorReserveMargin:ix,controlBottomArea:sx,laboBox:ox,resizer:ax},cx="_contents_1t9jf_2",lx="_flex_1t9jf_7",ux="_fretBoard_1t9jf_13",fx="_hideScrollbar_1t9jf_18",dx="_fretKeyColorRight_1t9jf_27",hx="_fretKeyColorLeft_1t9jf_28",mx="_stringNumberColorLeft_1t9jf_29",Cn={contents:cx,flex:lx,fretBoard:ux,hideScrollbar:fx,fretKeyColorRight:dx,fretKeyColorLeft:hx,stringNumberColorLeft:mx},Ge=[27,76,125,174,221,268,315,361,407,452,496,541,582,618,654,688,721,754,785,816,845,874,902,928];function gx(t){const r=[];return t.forEach(n=>{const s=[...i5[n]],a=s.shift();s.push(a),r.push([...s,...s])}),r}var xd=(t=>(t[t.None=0]="None",t[t.Scale=1]="Scale",t[t.Full=2]="Full",t))(xd||{});const px=re.memo(t=>{var C;const r=((C=t.tuning)==null?void 0:C.length)||6,n=[...t.tuning||["E","A","D","G","B","E"]].reverse();R.useEffect(()=>{const A=$=>{const V=$.target.closest("g");if(!V)return;const Z=V.id;if(t.handleOnClickStrings&&/stringNumber=/.test(Z)){const K=Z.match(/=(\d)/);K&&t.handleOnClickStrings(parseInt(K[1]))}else if(t.handleOnClickFretKeys&&/fretKey=/.test(Z)){const K=Z.match(/=(\d)/);K&&t.handleOnClickFretKeys(parseInt(K[1]),0)}},k=t.svgRefLeft.current;k&&k.addEventListener("click",A);const N=$=>{const V=$.target.closest("g");if(!V)return;const Z=V.id;if(t.handleOnClickFretKeys&&/fretKey=/.test(Z)){const K=Z.match(/=(\d+)_(\d)/);K&&t.handleOnClickFretKeys(parseInt(K[2]),parseInt(K[1])+1)}},U=t.svgRefRight.current;return U&&U.addEventListener("click",N),()=>{k&&k.removeEventListener("click",A),U&&U.removeEventListener("click",N)}},[]);const s=10,a=950,l=[140,136,133,131][r-6]/r,u=[];for(let A=0;A<r;A++){const k=s+A*l;u.push({sym:n[A],loc:k})}const d=50,h=[];let m=0;for(let A=0;A<25;A++){const k=A?d-(A>12?A:A/2):0,N=(d-(A+1>12?A/2+8:(A+1)/2))/2;m+=k,h.push({line:m,loc:m+N})}const p=()=>y.jsx(y.Fragment,{children:gx(n).map((A,k)=>A.map((N,U)=>y.jsx(re.Fragment,{children:y.jsxs("g",{id:t.scrollIdPrefix+"_fretKey="+U+"_"+k,className:`${N.replace(/#/,"s")} ${Cn.fretKeyColorRight}`,style:{opacity:"0.2"},"data-key":t.scrollIdPrefix+"_fretKey="+U+"_"+k,children:[y.jsx("rect",{x:Ge[U]-13,y:u[k].loc+-10,width:"26",height:"22",fill:"red",stroke:"none",fillOpacity:"0"}),y.jsx("text",{x:Ge[U],y:u[k].loc+2,fontFamily:"self",fontWeight:"normal",textAnchor:"middle",dominantBaseline:"middle",fontSize:14,children:N})]})},""+k+U)))}),b=y.jsxs(y.Fragment,{children:[y.jsx("rect",{x:"0",y:"0",width:"100%",height:"138",fill:"#111111"}),n.map((A,k)=>{const N=s+k*l;return y.jsxs(re.Fragment,{children:[y.jsx("line",{x1:"20",y1:N,x2:a,y2:N,stroke:"#777"}),y.jsxs("g",{id:t.scrollIdPrefix+"_stringNumber="+k,className:"stringKey "+(t.handleOnClickStrings?Cn.stringNumberColorLeft:""),children:[y.jsx("rect",{x:0,y:N+2+-9,width:"20",height:"14",fill:"red",stroke:"none",fillOpacity:"0"}),y.jsx("text",{x:"5",y:N+5,fontFamily:"Arial",fontWeight:"bold",fontSize:14,children:k+1})]}),y.jsxs("g",{id:t.scrollIdPrefix+"_fretKey="+k,className:`stringKey ${A.replace(/#/,"s")} `+(t.handleOnClickFretKeys?Cn.fretKeyColorLeft:""),style:{opacity:t.showBoardKey!==0?"0.2":"1"},children:[y.jsx("rect",{x:23,y:N+2+-9,width:"26",height:"16",fill:"red",stroke:"none",fillOpacity:"0"}),y.jsx("text",{x:"30",y:N+2,fontFamily:"Arial",fontSize:14,dominantBaseline:"middle",children:A})]})]},k)})]}),w=y.jsxs(y.Fragment,{children:[y.jsx("rect",{x:"0",y:"0",width:a,height:"138",fill:"#333333"}),y.jsx("circle",{cx:Ge[2],cy:"69",r:"6",textAnchor:"middle",fill:"#636363"}),y.jsx("circle",{cx:Ge[4],cy:"69",r:"6",textAnchor:"middle",fill:"#636363"}),y.jsx("circle",{cx:Ge[6],cy:"69",r:"6",textAnchor:"middle",fill:"#636363"}),y.jsx("circle",{cx:Ge[9],cy:"69",r:"6",textAnchor:"middle",fill:"#636363"}),y.jsx("circle",{cx:Ge[11],cy:"34",r:"6",textAnchor:"middle",fill:"#636363"}),y.jsx("circle",{cx:Ge[11],cy:"104",r:"6",textAnchor:"middle",fill:"#636363"}),y.jsx("circle",{cx:Ge[14],cy:"69",r:"6",textAnchor:"middle",fill:"#636363"}),y.jsx("circle",{cx:Ge[16],cy:"69",r:"6",textAnchor:"middle",fill:"#636363"}),y.jsx("circle",{cx:Ge[18],cy:"69",r:"6",textAnchor:"middle",fill:"#636363"}),y.jsx("circle",{cx:Ge[20],cy:"69",r:"6",textAnchor:"middle",fill:"#636363"}),y.jsx("circle",{cx:Ge[22],cy:"69",r:"6",textAnchor:"middle",fill:"#636363"}),h.map((A,k)=>y.jsxs(re.Fragment,{children:[k<24?y.jsx("text",{x:Ge[k],y:"155",fontFamily:"Arial",fontWeight:"bold",textAnchor:"middle",fontSize:14,fill:"#aaa",children:k+1}):y.jsx(y.Fragment,{}),y.jsx("line",{id:t.scrollIdPrefix+"_scroll_"+(k+1),x1:A.line,y1:s-10,x2:A.line,y2:s+127,stroke:"#999"}),y.jsx("line",{x1:A.line+1,y1:s-10,x2:A.line+1,y2:s+127,stroke:"#BBB"}),y.jsx("line",{x1:A.line+2,y1:s-10,x2:A.line+2,y2:s+127,stroke:"#CCC"}),y.jsx("line",{x1:A.line+3,y1:s-10,x2:A.line+3,y2:s+127,stroke:"#BBB"})]},k)),u.map((A,k)=>y.jsx(re.Fragment,{children:y.jsx("line",{x1:"0",y1:A.loc,x2:a,y2:A.loc,stroke:"#777"})},k))]}),P=u.map((A,k)=>y.jsx(re.Fragment,{children:y.jsx("circle",{className:"pointerL"+k,style:{display:"none"},cx:35,cy:u[k].loc,r:"6",textAnchor:"middle",stroke:"white",strokeWidth:"2",fill:"#1d8cd1"})},k)),S=u.map((A,k)=>y.jsx(re.Fragment,{children:y.jsx("circle",{className:"shadowL"+k,style:{opacity:"0.4",display:"none"},cx:35,cy:u[k].loc,r:"6",textAnchor:"middle",stroke:"white",strokeWidth:"2",fill:"#59d11d"})},k)),L=u.map((A,k)=>y.jsx(re.Fragment,{children:y.jsx("circle",{className:"pointerR"+k,style:{transition:"cx 0.03s ease",display:"none"},cx:Ge[0],cy:u[k].loc,r:"6",textAnchor:"middle",stroke:"white",strokeWidth:"2",fill:"#1d8cd1"})},k)),T=u.map((A,k)=>y.jsx(re.Fragment,{children:y.jsx("circle",{className:"shadowR"+k,style:{transition:"cx 0.03s ease",opacity:"0.4",display:"none"},cx:Ge[2],cy:u[k].loc,r:"6",textAnchor:"middle",stroke:"white",strokeWidth:"2",fill:"#59d11d"})},k));return y.jsx(y.Fragment,{children:y.jsx("div",{className:`${Cn.contents} unSelectable`,children:y.jsxs("div",{className:Cn.flex,children:[y.jsx("div",{className:Cn.fretHeader,children:y.jsxs("svg",{ref:t.svgRefLeft,width:"55",height:155,children:[b,S,P]})}),y.jsx("div",{ref:t.fretBoardRef,className:`${Cn.fretBoard} ${Cn.hideScrollbar}`,children:y.jsxs("svg",{ref:t.svgRefRight,width:"950",height:155,children:[w,t.showBoardKey!==0?p():null,T,L]})})]})})})}),yx=()=>{const t=R.useRef(null),r=R.useRef(null),n=R.useRef(null),s=R.useRef(Ya()),a=R.useCallback(L=>{var T;return(T=t.current)==null?void 0:T.querySelector(".pointerL"+L)},[]),c=R.useCallback(L=>{var T;return(T=t.current)==null?void 0:T.querySelector(".shadowL"+L)},[]),l=R.useCallback(L=>{var T;return(T=r.current)==null?void 0:T.querySelector(".pointerR"+L)},[]),u=R.useCallback(L=>{var T;return(T=r.current)==null?void 0:T.querySelector(".shadowR"+L)},[]),d=R.useCallback(L=>{const T=a(L);T&&(T.style.display="none")},[]),h=R.useCallback(L=>{const T=c(L);T&&(T.style.display="none")},[]),m=R.useCallback(L=>{const T=l(L);T&&(T.style.display="none")},[]),p=R.useCallback(L=>{const T=u(L);T&&(T.style.display="none")},[]),b=R.useCallback((L,T,C=!0)=>{if(T===0){m(L);const A=a(L);A&&(A.style.display="block",A.setAttribute("stroke-width",C?"2":"0"))}else{d(L);const A=l(L);A&&Ge[T-1]!==void 0&&(A.style.display="block",A.setAttribute("cx",Ge[T-1].toString()),A.setAttribute("stroke-width",C?"2":"0"))}},[]),w=R.useCallback((L,T)=>{if(T===0){p(L);const C=c(L);C&&(C.style.display="block")}else{h(L);const C=u(L);C&&Ge[T-1]!==void 0&&(C.style.display="block",C.setAttribute("cx",Ge[T-1].toString()))}},[]),P=R.useCallback(L=>{let T=!1,C=25;const A=k=>{C>k&&k>0&&(C=k,T=!0)};if(L.forEach(k=>{k.fret!==void 0?(b(k.stringIndex,k.fret),A(k.fret)):(d(k.stringIndex),m(k.stringIndex)),k.echo!==void 0&&b(k.stringIndex,k.echo,!1),k.shadow!==void 0?w(k.stringIndex,k.shadow):(h(k.stringIndex),p(k.stringIndex))}),T){const k=document.getElementById(s.current+"_scroll_"+C);if(k&&n.current){const N=n.current,U=N.getBoundingClientRect(),V=k.getBoundingClientRect().left-U.left+N.scrollLeft;N.scrollTo({left:V})}}},[]);return{svgRefLeft:t,svgRefRight:r,fretBoardRef:n,setFingers:P,fretKeyScaleChange:L=>{const T=L.includes(1);["C","Cs","D","Ds","E","F","Fs","G","Gs","A","As","B"].forEach((C,A)=>{var U,$;const k=(U=t.current)==null?void 0:U.querySelectorAll("."+C),N=($=r.current)==null?void 0:$.querySelectorAll("."+C);L[A]&&T?(k==null||k.forEach(V=>V.style.opacity="1"),N==null||N.forEach(V=>V.style.opacity="1")):(k==null||k.forEach(V=>V.style.opacity="0.2"),N==null||N.forEach(V=>V.style.opacity="0.2"))})},scrollIdPrefix:s.current}},vx=re.memo(()=>{const t=ue(p=>{var b;return(b=p.clRegion.region)==null?void 0:b.tuning},Ve.isEqual),r=ue(p=>p.currentScale,Ve.isEqual),n=ue(p=>p.currentNotes.tab,Ve.isEqual),s=ue(p=>p.currentNotes.trueTab,Ve.isEqual),a=ue(p=>p.currentNotes.activeBows,Ve.isEqual),{svgRefLeft:c,svgRefRight:l,fretBoardRef:u,setFingers:d,fretKeyScaleChange:h,scrollIdPrefix:m}=yx();return R.useEffect(()=>{const p=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(r.key),b=r.bin.slice(-p).concat(r.bin.slice(0,-p));h(b)},[r]),R.useEffect(()=>{const p=[];n.length?n.forEach((b,w)=>{const P={stringIndex:w,fret:b};b===void 0&&a[w]!==void 0&&(P.echo=a[w]),s[w]!==void 0&&s[w]!==b&&(P.shadow=s[w]),p.push(P)}):d([0,1,2,3,4,5,6,7,8].map(b=>({stringIndex:b}))),d(p)},[n,s,a]),y.jsx(y.Fragment,{children:y.jsx(px,{svgRefLeft:c,svgRefRight:l,fretBoardRef:u,tuning:t,showBoardKey:xd.Full,scrollIdPrefix:m,handleOnClickFretKeys:(p,b)=>{console.log("labo(f)",p,b)},handleOnClickStrings:p=>{console.log("labo(s)",p)}})})}),bx="_errorText_1ct1w_1",xx={errorText:bx},wx=re.memo(()=>{var r;const t=ue(n=>n.syntaxError);return t.info?y.jsx(y.Fragment,{children:y.jsx("div",{className:xx.errorText,children:y.jsxs("div",{style:{cursor:"pointer"},onClick:()=>{var n;(n=t.info)!=null&&n.line&&Ie.jumpToLine(t.info.line)},children:["[",t.info.line,":",t.info.linePos,"] ",(r=t.info)==null?void 0:r.message]})})}):null});function _x(t){return De({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7 21.5C4.51472 21.5 2.5 19.4853 2.5 17C2.5 14.5147 4.51472 12.5 7 12.5C9.48528 12.5 11.5 14.5147 11.5 17C11.5 19.4853 9.48528 21.5 7 21.5ZM17 11.5C14.5147 11.5 12.5 9.48528 12.5 7C12.5 4.51472 14.5147 2.5 17 2.5C19.4853 2.5 21.5 4.51472 21.5 7C21.5 9.48528 19.4853 11.5 17 11.5ZM7 19.5C8.38071 19.5 9.5 18.3807 9.5 17C9.5 15.6193 8.38071 14.5 7 14.5C5.61929 14.5 4.5 15.6193 4.5 17C4.5 18.3807 5.61929 19.5 7 19.5ZM17 9.5C18.3807 9.5 19.5 8.38071 19.5 7C19.5 5.61929 18.3807 4.5 17 4.5C15.6193 4.5 14.5 5.61929 14.5 7C14.5 8.38071 15.6193 9.5 17 9.5ZM3 8C3 5.23858 5.23858 3 8 3H11V5H8C6.34315 5 5 6.34315 5 8V11H3V8ZM21 13H19V16C19 17.6569 17.6569 19 16 19H13V21H16C18.7614 21 21 18.7614 21 16V13Z"},child:[]}]})(t)}const Px="_contents_1xbta_1",kx="_nowrap_1xbta_6",Mx="_normalComment_1xbta_12",Sx="_fullScreenActive_1xbta_21",Tx="_fullScreenInactive_1xbta_25",Cx="_headerRowWrapper_1xbta_29",Ix="_displayRowWrapper_1xbta_37",Ax="_bendRowWrapper_1xbta_43",Lx="_slideRowWrapper_1xbta_48",Ex="_messageRowWrapper_1xbta_53",Nx="_title_1xbta_58",Ox="_location_1xbta_63",jx="_symArea_1xbta_69",Bx="_chordSymWrapper_1xbta_73",Fx="_tabScoreWrapper_1xbta_87",Rx="_iconSymWrapper_1xbta_93",Dx="_chordSymFont_1xbta_102",Wx="_tabSymFont_1xbta_106",Ux="_movedTab_1xbta_110",zx="_bendWrapper_1xbta_116",$x="_slideWrapper_1xbta_121",qx="_messageWrapper_1xbta_127",$e={contents:Px,nowrap:kx,normalComment:Mx,fullScreenActive:Sx,fullScreenInactive:Tx,headerRowWrapper:Cx,displayRowWrapper:Ix,bendRowWrapper:Ax,slideRowWrapper:Lx,messageRowWrapper:Ex,title:Nx,location:Ox,symArea:jx,chordSymWrapper:Bx,tabScoreWrapper:Fx,iconSymWrapper:Rx,chordSymFont:Dx,tabSymFont:Wx,movedTab:Ux,bendWrapper:zx,slideWrapper:$x,messageWrapper:qx},Hx=re.memo(()=>{const t=ue(r=>r.cursorLocation);return t?y.jsxs(y.Fragment,{children:[t.line,":",t.column]}):y.jsx(y.Fragment,{children:"-:-"})}),Gx=t=>{const r=t.fullX||390,n=t.fullX||50,s=t.slide,a=s.totalStartTick,c=Kx(s,a),l=c.totalEndTick,u=c.approachList.map((h,m)=>y.jsxs(re.Fragment,{children:[y.jsx("line",{x1:r*(h.endTick/l)-1,x2:r*(h.endTick/l)-1,y1:0,y2:n,stroke:"#333"}),y.jsx("line",{x1:r*(h.startTick/l),x2:r*(h.endTick/l)-1,y1:25+(c.approachList.length-m-1)*(c.approachUp?1:-1),y2:25+(c.approachList.length-m-1)*(c.approachUp?1:-1),stroke:"#378c80"})]},m)),d=c.slideList.map((h,m)=>y.jsxs(re.Fragment,{children:[y.jsx("line",{x1:r*(h.startTick/l),x2:r*(h.startTick/l),y1:0,y2:n,stroke:"#333"}),y.jsx("line",{x1:r*(h.startTick/l),x2:r*(h.endTick/l)-1,y1:25+m*(c.slideUp?-1:1),y2:25+m*(c.slideUp?-1:1),stroke:"#378c80"})]},m));return y.jsx(y.Fragment,{children:y.jsxs("svg",{width:r,height:n,children:[y.jsx("rect",{x:"0",y:"0",width:r,height:n,fill:"#000"}),y.jsx("line",{x1:"0",y1:n/2,x2:r,y2:n/2,stroke:"#333"}),u,d,y.jsx("line",{x1:r*(c.middleStartTick/l),y1:n/2,x2:r*(c.middleEndTick/l),y2:n/2,stroke:"#378c80"})]})})};function Kx(t,r){const n=structuredClone(t);return n.approachList.forEach(s=>{s.startTick-=r,s.endTick-=r}),n.slideList.forEach(s=>{s.startTick-=r,s.endTick-=r}),n.middleStartTick-=r,n.middleEndTick-=r,n.totalStartTick-=r,n.totalEndTick-=r,n}const Vx=t=>{const r=t.fullX||390,n=r/2,s=t.fullX||50,a=t.slide,c=a.totalStartTick,l=a.middleStartTick,u=Zx(a,c,l),d=u.middleEndTick-u.totalStartTick,h=u.totalEndTick-u.middleStartTick,m=u.approachList.map((b,w)=>y.jsxs(re.Fragment,{children:[y.jsx("line",{x1:n*(b.endTick/d)-1,x2:n*(b.endTick/d)-1,y1:0,y2:s,stroke:"#333"}),y.jsx("line",{x1:n*(b.startTick/d),x2:n*(b.endTick/d)-1,y1:25+(u.approachList.length-w-1)*(u.approachUp?1:-1),y2:25+(u.approachList.length-w-1)*(u.approachUp?1:-1),stroke:"#378c80"})]},w)),p=u.slideList.map((b,w)=>y.jsxs(re.Fragment,{children:[y.jsx("line",{x1:n+n*(b.startTick/h),x2:n+n*(b.startTick/h),y1:0,y2:s,stroke:"#333"}),y.jsx("line",{x1:n+n*(b.startTick/h),x2:n+n*(b.endTick/h)-1,y1:25+w*(u.slideUp?-1:1),y2:25+w*(u.slideUp?-1:1),stroke:"#378c80"})]},w));return y.jsx(y.Fragment,{children:y.jsxs("svg",{width:r,height:s,children:[y.jsx("rect",{x:"0",y:"0",width:r,height:s,fill:"#000"}),y.jsx("line",{x1:"0",y1:s/2,x2:r,y2:s/2,stroke:"#333"}),y.jsx("line",{x1:r/2,y1:"20",x2:r/2,y2:s-20,stroke:"#378c80"}),m,y.jsx("line",{x1:n*(u.approachList[u.approachList.length-1].endTick/d),y1:s/2,x2:n*(u.middleEndTick/d),y2:s/2,stroke:"#378c80"}),p,y.jsx("line",{x1:n,y1:s/2,x2:n+n*(u.slideList[0].startTick/h),y2:s/2,stroke:"#378c80"}),y.jsx("text",{x:n,y:13,fontFamily:"self",fontWeight:"normal",textAnchor:"middle",dominantBaseline:"middle",color:"#28665e",fontSize:12,children:"omitted"})]})})};function Zx(t,r,n){const s=structuredClone(t);return s.approachList.forEach(a=>{a.startTick-=r,a.endTick-=r}),s.slideList.forEach(a=>{a.startTick-=n,a.endTick-=n}),s.middleStartTick-=n,s.middleEndTick-=r,s.totalStartTick-=r,s.totalEndTick-=n,s}const Yx=()=>{const t=ue(h=>h.currentNotes),r=t.tick,n=t.chord,s=t.trueTab,a=t.tab,c=ue(h=>h.windowControl.fullScreen),l=ue(h=>h.currentBendData.bend),u=ue(h=>h.currentSlideData.slide),d=!/\|/.test(n);return y.jsxs("div",{className:dt($e.contents,{[$e.fullScreenActive]:c===1,[$e.fullScreenInactive]:c===0}),children:[y.jsxs("div",{className:$e.headerRowWrapper,children:[y.jsx("div",{className:$e.title,children:"NOTE LABO"}),y.jsxs("div",{className:$e.location,children:["LOCATION: ",y.jsx(Hx,{})]})]}),y.jsxs("div",{className:$e.displayRowWrapper,children:[y.jsxs("div",{className:dt($e.chordSymWrapper,{[$e.chordSymFont]:d,[$e.tabSymFont]:!d}),children:[y.jsx("div",{children:n||y.jsx("div",{className:$e.normalComment,children:"focus note on editor"})}),Ve.isEqual(a,s)?null:y.jsxs("div",{className:$e.movedTab,children:[y.jsx(_x,{})," ",[...a].reverse().join("|")]})]}),y.jsx("div",{className:$e.iconSymWrapper,children:"step | map | legato | until | velocity"}),y.jsx("div",{className:$e.tabScoreWrapper})]}),y.jsx("div",{className:$e.bendRowWrapper,children:y.jsx("div",{className:$e.bendWrapper,children:l?y.jsx(yd,{bendFlatData:l.flatMap(h=>h.bend),fullX:392,fullY:50,startTick:r.startTick,stopTick:r.stopTick}):y.jsx("div",{className:$e.normalComment,children:"- focus bend note on editor -"})})}),y.jsx("div",{className:$e.slideRowWrapper,children:y.jsx("div",{className:$e.slideWrapper,children:u?u.viewType===gn.one?y.jsx(Gx,{slide:u}):y.jsx(Vx,{slide:u}):y.jsx("div",{className:$e.normalComment,children:"- focus slide note on editor -"})})}),y.jsx("div",{className:$e.messageRowWrapper})]})},Jx=re.memo(()=>{const t=Qt(),[r,n]=R.useState(0),s=ue(m=>m.windowControl.fullScreen),a=ue(m=>m.windowControl.leftColumn),c=ue(m=>m.windowControl.rightColumn),{leftColumnWidth:l,rightColumnWidth:u}=W6(5,nr.defaultRightColumnWidth),d=ue(m=>m.syntaxError),h=R.useCallback(()=>{n(1);try{const m=On.getItem(jn.FileProp);m?setTimeout(()=>{const p=JSON.parse(m);t(Mf(p)),t(Ts({key:"initializedSystem",value:!0}))},200):t(Ts({key:"initializedSystem",value:!0}))}catch{}},[]);return y.jsxs(y.Fragment,{children:[r===0?y.jsx(Pa,{children:" initial console "}):null,r===1?y.jsx(Pa,{backgroundColor:"rgba(0, 0, 0, 0.75)",onClick:()=>{n(2),ve.init(()=>{n(3)})},children:" Click to Start "}):null,r===2?y.jsx(Pa,{backgroundColor:"rgba(0, 0, 0, 0.75)",children:" initial synth "}):null,y.jsxs("div",{className:`${He.fullHeight}`,children:[y.jsx("header",{className:`${He.headerFooter} ${He.header}`}),y.jsx("section",{id:"title-box",className:`${He.box} ${He.titleBox}`,children:y.jsx(G6,{})}),y.jsxs("div",{className:`${He.container} areaBorderBottom `,children:[y.jsx("div",{id:"left-column",className:`
            ${He.column}
            ${He.leftColumn}`,style:{display:a?"block":"none",width:`${l}px`}}),y.jsxs("div",{id:"main-column",className:`${He.column} ${He.mainColumn}`,children:[y.jsx("section",{className:`${He.box} ${He.controlArea}`,children:y.jsx(h6,{})}),y.jsx("section",{className:"areaBorderBottom",style:{display:s?"none":"block"},children:y.jsx(vx,{})}),y.jsx("section",{className:`${He.box} ${He.editorBox} areaBorderBottom`,children:y.jsx(z5,{mountedCB:h})}),d.info?y.jsx(wx,{}):null,y.jsx("section",{className:`${He.box} ${He.controlBottomArea} areaBorderBottom`,children:y.jsx(D6,{})})]}),y.jsxs("div",{id:"right-column",className:`
            ${He.column}
            ${He.rightColumn}`,style:{display:c?"block":"none",width:`${u}px`},children:[y.jsx("div",{children:y.jsx(k4,{})}),y.jsx("div",{children:y.jsx(Yx,{})})]})]}),y.jsx("footer",{className:`${He.headerFooter} ${He.footer}`,children:"Copyright  2025 Axentax."})]})]})});export{Jx as LayoutConsole};
